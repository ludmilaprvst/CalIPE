
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Inventory and documentation of CalIPE functions &#8212; CalIPE_doc 0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Output data files" href="output_files.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="inventory-and-documentation-of-calipe-functions">
<h1>Inventory and documentation of CalIPE functions<a class="headerlink" href="#inventory-and-documentation-of-calipe-functions" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<section id="module-attKov_onedataset">
<span id="calibration-functions"></span><h2>Calibration functions<a class="headerlink" href="#module-attKov_onedataset" title="Permalink to this headline">¶</a></h2>
<p>Created on Wed Jul 28 13:51:29 2021</p>
<p>&#64;author: PROVOST-LUD</p>
<dl class="py function">
<dt class="sig sig-object py" id="attKov_onedataset.Kovbeta_onedataset">
<span class="sig-prename descclassname"><span class="pre">attKov_onedataset.</span></span><span class="sig-name descname"><span class="pre">Kovbeta_onedataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">evtdata_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obsdata_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputfolder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">liste_beta_ini</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ponderation</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binning_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regiondata_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">NminIter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">NmaxIter</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#attKov_onedataset.Kovbeta_onedataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that calibrates the attenuation coefficient beta in the Koveslighety
mathematical formula, with the hypothesis gamma coefficient equal to 0, for a given
list of earthquake, its associated IDPs, depth and its uncertainties and epicentral
intensity and its uncertainties. IDPs are grouped into isoseismal radii, with the
method given by the user. Depth and epicentral intensity are inverted sequentially
with the beta coefficient, within their defined uncertainties.
See Provost, CalIPE (in writing) for more information</p>
<dl>
<dt>evtdata_name<span class="classifier">str</span></dt><dd><p>name of the evt data file. The list of the calibration earthquakes and associated 
metadata are stored in this file. This .txt file contains 16 columns, separated by the “;” string:</p>
<blockquote>
<div><ul class="simple">
<li><p>EVID: ID of the earthquake</p></li>
<li><p>Year: year of occurence of the earthquake</p></li>
<li><p>Month: month of occurence of the earthquake</p></li>
<li><p>Day: day of occurence of the earthquake</p></li>
<li><p>Lon: longitude in WGS84 of the epicenter</p></li>
<li><p>Lat: latitude in WGS84 of the epicenter</p></li>
<li><p>QPos: quality of the epicenter location</p></li>
<li><p>I0 : epicentral intensity</p></li>
<li><p>QI0 : quality of the epicentral intensity value</p></li>
<li><p>Ic : intensity of completeness</p></li>
<li><p>Dc : distance of completeness</p></li>
<li><p>Mag: magnitude of the earthquake</p></li>
<li><p>StdM : uncertainty associated with the magnitude</p></li>
<li><p>Depth: hypocentral depth of the earthquake</p></li>
<li><p>Hmin : lower bound of uncertainty associated to depth</p></li>
<li><p>Hmax : upper bound of uncertainty associated to depth</p></li>
</ul>
</div></blockquote>
</dd>
<dt>obsdata_name<span class="classifier">str</span></dt><dd><p>name of the obs data file. The IDPs of the calibration earthquakes are stored in this file.
This .txt file contains 5 columns, separated by the “;” string:</p>
<blockquote>
<div><ul class="simple">
<li><p>EVID : ID of the earthquake</p></li>
<li><p>Lon: longitude in WGS84 of the IDP</p></li>
<li><p>Lat: latitude in WGS84 of the IDP</p></li>
<li><p>Iobs: value of intensity of the IDP</p></li>
<li><p>QIobs : quality associated to Iobs</p></li>
</ul>
</div></blockquote>
</dd>
<dt>outputfolder<span class="classifier">str</span></dt><dd><p>Folder name where the outputs will be saved. See function write_betaresults()</p>
</dd>
<dt>liste_beta_ini<span class="classifier">list of float</span></dt><dd><p>list with different initial beta values</p>
</dd>
<dt>ponderation<span class="classifier">str</span></dt><dd><p>Name of the ponderation applied to the calibration earthquakes intensity data used
in the inversion process of the beta coefficient</p>
</dd>
<dt>binning_type<span class="classifier">str</span></dt><dd><p>Name of the method applied to the calibration earthquakes intensity date to compute 
isoseismal radii. The isoseismal radii are the intensity data used in the 
inversion process</p>
</dd>
<dt>regiondata_name<span class="classifier">str</span></dt><dd><p>Name of the .txt file which contains the contour of the different regions
defined by the user. Contour is described by a polygon. The coordinates of
the polygon points are in WGS84 longitude and latitude.
The three columns are separeted by “;”:</p>
<blockquote>
<div><ul class="simple">
<li><p>ID_region: ID of the considered region</p></li>
<li><p>Lon: Longitude of the polygon points</p></li>
<li><p>Lat: Latitude of the polygon points</p></li>
</ul>
</div></blockquote>
</dd>
<dt>NminIter<span class="classifier">int</span></dt><dd><p>Minimal number of iteration allowed</p>
</dd>
<dt>NmaxIter<span class="classifier">int</span></dt><dd><p>Maximal number of iteration allowed.</p>
</dd>
</dl>
<p>None.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="attKov_onedataset.Kovbetagamma_onedataset">
<span class="sig-prename descclassname"><span class="pre">attKov_onedataset.</span></span><span class="sig-name descname"><span class="pre">Kovbetagamma_onedataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">evtdata_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obsdata_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputfolder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">liste_beta_ini</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">liste_gamma_ini</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ponderation</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binning_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regiondata_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">NminIter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">NmaxIter</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#attKov_onedataset.Kovbetagamma_onedataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that calibrates the attenuation coefficients beta and gamma in the Koveslighety
mathematical formula,for a given list of earthquake, its associated IDPs
depth and its uncertainties and epicentral intensity and its uncertainties. 
IDPs are grouped into isoseismal radii, with the method given by the user. 
Depth and epicentral intensity are inverted sequentiallyvwith the beta and gamma coefficients, within their defined uncertainties.
See Provost, CalIPE (in writing) for more information</p>
<dl>
<dt>evtdata_name<span class="classifier">str</span></dt><dd><p>name of the evt data file. The list of the calibration earthquakes and associated 
metadata are stored in this file. This .txt file contains 16 columns, separated by the “;” string:</p>
<blockquote>
<div><ul class="simple">
<li><p>EVID: ID of the earthquake</p></li>
<li><p>Year: year of occurence of the earthquake</p></li>
<li><p>Month: month of occurence of the earthquake</p></li>
<li><p>Day: day of occurence of the earthquake</p></li>
<li><p>Lon: longitude in WGS84 of the epicenter</p></li>
<li><p>Lat: latitude in WGS84 of the epicenter</p></li>
<li><p>QPos: quality of the epicenter location</p></li>
<li><p>I0: epicentral intensity</p></li>
<li><p>QI0: quality of the epicentral intensity value</p></li>
<li><p>Ic: intensity of completeness</p></li>
<li><p>Dc: distance of completeness</p></li>
<li><p>Mag: magnitude of the earthquake</p></li>
<li><p>StdM: uncertainty associated with the magnitude</p></li>
<li><p>Depth: hypocentral depth of the earthquake</p></li>
<li><p>Hmin: lower bound of uncertainty associated to depth</p></li>
<li><p>Hmax: upper bound of uncertainty associated to depth</p></li>
</ul>
</div></blockquote>
</dd>
<dt>obsdata_name<span class="classifier">str</span></dt><dd><p>name of the obs data file. The IDPs of the calibration earthquakes are stored in this file.
This .txt file contains 5 columns, separated by the “;” string:</p>
<blockquote>
<div><ul class="simple">
<li><p>EVID: ID of the earthquake</p></li>
<li><p>Lon: longitude in WGS84 of the IDP</p></li>
<li><p>Lat: latitude in WGS84 of the IDP</p></li>
<li><p>Iobs: value of intensity of the IDP</p></li>
<li><p>QIobs: quality associated to Iobs</p></li>
</ul>
</div></blockquote>
</dd>
<dt>outputfolder<span class="classifier">str</span></dt><dd><p>Folder name where the outputs will be saved. See function write_betagammaresults()</p>
</dd>
<dt>liste_beta_ini<span class="classifier">list of float</span></dt><dd><p>list with different initial beta values</p>
</dd>
<dt>liste_gamma_ini<span class="classifier">list of float</span></dt><dd><p>list with different initial gamma values</p>
</dd>
<dt>ponderation<span class="classifier">str</span></dt><dd><p>Name of the ponderation applied to the calibration earthquakes intensity data used
in the inversion process of the beta and gamma coefficients</p>
</dd>
<dt>binning_type<span class="classifier">str</span></dt><dd><p>Name of the method applied to the calibration earthquakes intensity date to compute 
isoseismal radii. The isoseismal radii are the intensity data used in the 
inversion process</p>
</dd>
<dt>regiondata_name<span class="classifier">str</span></dt><dd><p>Name of the .txt file which contains the contour of the different regions
defined by the user. Contour is described by a polygon. The coordinates of
the polygon points are in WGS84 longitude and latitude.
The three columns are separeted by “;”:</p>
<blockquote>
<div><ul class="simple">
<li><p>ID_region: ID of the considered region</p></li>
<li><p>Lon: Longitude of the polygon points</p></li>
<li><p>Lat: Latitude of the polygon points</p></li>
</ul>
</div></blockquote>
</dd>
<dt>NminIter<span class="classifier">int</span></dt><dd><p>Minimal number of iteration allowed</p>
</dd>
<dt>NmaxIter<span class="classifier">int</span></dt><dd><p>Maximal number of iteration allowed</p>
</dd>
</dl>
<p>None.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="attKov_onedataset.write_betagammaresults">
<span class="sig-prename descclassname"><span class="pre">attKov_onedataset.</span></span><span class="sig-name descname"><span class="pre">write_betagammaresults</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputfolder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suivi_beta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta_ini</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suivi_gamma</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma_ini</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cov_betagamma</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">NminIter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">NmaxIter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nbre_evt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nbreI</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evtdata_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obsdata_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obsBin_plus_end</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#attKov_onedataset.write_betagammaresults" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that writes the output of the attenuation coefficients beta and gamma calibration
The outputs will be written in three files. The first file contains:</p>
<blockquote>
<div><ul class="simple">
<li><p>the final beta value of the inversion process (median value of the gaussian),</p></li>
<li><p>its associated standard deviation based on the uncertainties of the intensity data,</p></li>
<li><p>the initial value of the coefficient beta before inversion,</p></li>
<li><p>the final gamma value of the inversion process (median value of the gaussian),</p></li>
<li><p>its associated standard deviation based on the uncertainties of the intensity data,</p></li>
<li><p>the initial value of the coefficient gamma before inversion,</p></li>
<li><p>the number of iteration needed to converge,</p></li>
<li><p>the maximal number of iteration allowed,</p></li>
<li><p>the minimal number of iteration allowed,</p></li>
<li><p>the number of calibration earthquake used,</p></li>
<li><p>the number of intensity data used,</p></li>
<li><p>the Evt file used for the calibration process,</p></li>
<li><p>the Obs file used for the calibration process,</p></li>
<li><p>the name of the python file where this function is called</p></li>
</ul>
</div></blockquote>
<p>The beginning of the first file name is betagammaFinal. The second file contains
the values of the beta coefficient of each iteration. The two columns of the file
are respectively the number of the iteration and the corresponding value of beta.
The beginning of the second file name is betaWay.
The third file contains the intensities data used in the inversion process, along
with the depth and epicentral intensity after inversion for each earthquake.
The columns of this .csv file are:</p>
<blockquote>
<div><ul class="simple">
<li><p>EVID: earthquake ID</p></li>
<li><p>I: value of the intensity of the isoseismal radii</p></li>
<li><p>StdI: Uncertainty associated to I</p></li>
<li><p>Io: epicentral intensity after the inversion process</p></li>
<li><p>Io_std: uncertainty associated to the inital value of Io</p></li>
<li><p>Io_ini: initial value of epicentral intensity</p></li>
<li><p>Depi: value of the epicentral distance of the isoseismal radii</p></li>
<li><p>Ndata: number of data used to compute the isoseismal radii</p></li>
<li><p>Mag: magnitude of the earthquake</p></li>
<li><p>StdM: uncertainty associated to the magnitude</p></li>
<li><p>Depth: hypocentral depth after the inversion process</p></li>
<li><p>Hmin: minimal bound for the depth inversion</p></li>
<li><p>Hmax: maximal bound for the depth inversion</p></li>
<li><p>RegID: ID of the geographical region of the considered earthquake</p></li>
<li><p>eqStd: the equivalent standard deviation used in the inversion process</p></li>
</ul>
<p>to compute weight for each isoseismal radii. (see the weights function)
- Hmin_ini : identical to Hmin
- Hmax_ini : identical to Hmax</p>
</div></blockquote>
<p>The beginning of the third file name is obsbinEnd.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – core name given to the outputs. For example, for the first output
file, the output name would be ‘<a href="#id11"><span class="problematic" id="id12">betaFinal_</span></a>’+ name +’_betaini.txt’</p></li>
<li><p><strong>outputfolder</strong> (<em>str</em>) – folder where the outputs will be saved</p></li>
<li><p><strong>beta</strong> (<em>float</em>) – the value of the beta coefficient after inversion</p></li>
<li><p><strong>suivi_beta</strong> (<em>numpy.darray</em>) – array with the values of the beta coefficient of each iteration in the inversion process</p></li>
<li><p><strong>beta_ini</strong> (<em>float</em>) – initial value of the beta coefficient</p></li>
<li><p><strong>gamma</strong> (<em>float</em>) – the value of the gamma coefficient after inversion</p></li>
<li><p><strong>suivi_gamma</strong> (<em>numpy.darray</em>) – array with the values of the gamma coefficient of each iteration in the inversion process</p></li>
<li><p><strong>gamma_ini</strong> (<em>float</em>) – initial value of the gamma coefficient</p></li>
<li><p><strong>cov_betagamma</strong> (<em>2-D array</em>) – covariance matrix of the beta and gamma coefficients after the inversion process</p></li>
<li><p><strong>NminIter</strong> (<em>int</em>) – minimal number of iteration allowed</p></li>
<li><p><strong>NmaxIter</strong> (<em>int</em>) – maximal number of iteration allowed</p></li>
<li><p><strong>nbre_evt</strong> (<em>int</em>) – number of earthquakes used in the inversion process</p></li>
<li><p><strong>nbreI</strong> (<em>int</em>) – number of intensity data used in the inversion process</p></li>
<li><p><strong>evtdata_name</strong> (<em>str</em>) – name of the Evt file used in the calibration process</p></li>
<li><p><strong>obsdata_name</strong> (<em>str</em>) – name of the Obs file used in the calibration process</p></li>
<li><p><strong>obsBin_plus_end</strong> (<em>pandas.dataframe</em>) – dataframe containing the intensity data used in the calibration process. 
The columns of the dataframe are the same as the obsbinEnd output file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="attKov_onedataset.write_betaresults">
<span class="sig-prename descclassname"><span class="pre">attKov_onedataset.</span></span><span class="sig-name descname"><span class="pre">write_betaresults</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputfolder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suivi_beta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta_ini</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cov_beta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">NminIter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">NmaxIter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nbre_evt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nbreI</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evtdata_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obsdata_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obsBin_plus_end</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#attKov_onedataset.write_betaresults" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that writes the output of the attenuation coefficient beta calibration
The outputs will be written in three files. The first file contains:</p>
<blockquote>
<div><ul class="simple">
<li><p>the final beta value of the inversion process (median value of the gaussian),</p></li>
<li><p>its associated standard deviation based on the uncertainties of the intensity data,</p></li>
<li><p>the initial value of the coefficient beta before inversion,</p></li>
<li><p>the number of iteration needed to converge,</p></li>
<li><p>the maximal number of iteration allowed,</p></li>
<li><p>the minimal number of iteration allowed,</p></li>
<li><p>the number of calibration earthquake used,</p></li>
<li><p>the number of intensity data used,</p></li>
<li><p>the Evt file used for the calibration process,</p></li>
<li><p>the Obs file used for the calibration process,</p></li>
<li><p>the name of the python file where this function is called</p></li>
</ul>
</div></blockquote>
<p>The beginning of the first file name is betaFinal. The second file contains
the values of the beta coefficient of each iteration. The two columns of the file
are respectively the number of the iteration and the corresponding value of beta.
The beginning of the second file name is betaWay.
The third file contains the intensities data used in the inversion process, along
with the depth and epicentral intensity after inversion for each earthquake.
The columns of this .csv file are:</p>
<blockquote>
<div><ul class="simple">
<li><p>EVID : earthquake ID</p></li>
<li><p>I: value of the intensity of the isoseismal radii</p></li>
<li><p>StdI: Uncertainty associated to I</p></li>
<li><p>Io: epicentral intensity after the inversion process</p></li>
<li><p>Io_std : uncertainty associated to the inital value of Io</p></li>
<li><p>Io_ini: initial value of epicentral intensity</p></li>
<li><p>Depi : value of the epicentral distance of the isoseismal radii</p></li>
<li><p>Ndata: number of data used to compute the isoseismal radii</p></li>
<li><p>Mag: magnitude of the earthquake</p></li>
<li><p>StdM : uncertainty associated to the magnitude</p></li>
<li><p>Depth: hypocentral depth after the inversion process</p></li>
<li><p>Hmin : minimal bound for the depth inversion</p></li>
<li><p>Hmax : maximal bound for the depth inversion</p></li>
<li><p>RegID: ID of the geographical region of the considered earthquake</p></li>
<li><p>eqStd: the equivalent standard deviation used in the inversion process</p></li>
</ul>
<p>to compute weight for each isoseismal radii. (see the weights function)
- Hmin_ini : identical to Hmin
- Hmax_ini : identical to Hmax</p>
</div></blockquote>
<p>The beginning of the third file name is obsbinEnd.
:param name: core name given to the outputs. For example, for the first output</p>
<blockquote>
<div><p>file, the output name would be ‘<a href="#id13"><span class="problematic" id="id14">betaFinal_</span></a>’’+ name +’_betaini.txt’</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>outputfolder</strong> (<em>str</em>) – folder where the outputs will be saved</p></li>
<li><p><strong>beta</strong> (<em>float</em>) – the value of the beta coefficient after inversion</p></li>
<li><p><strong>suivi_beta</strong> (<em>numpy.darray</em>) – array with the values of the beta coefficient of each iteration in the inversion process</p></li>
<li><p><strong>beta_ini</strong> (<em>float</em>) – initial value of the beta coefficient</p></li>
<li><p><strong>cov_beta</strong> – covariance matrix of the beta coefficient after the inversion process</p></li>
<li><p><strong>NminIter</strong> – minimal number of iteration allowed</p></li>
<li><p><strong>NmaxIter</strong> – maximal number of iteration allowed</p></li>
<li><p><strong>nbre_evt</strong> – number of earthquakes used in the inversion process</p></li>
<li><p><strong>nbreI</strong> – number of intensity data used in the inversion process</p></li>
<li><p><strong>evtdata_name</strong> – name of the Evt file used in the calibration process</p></li>
<li><p><strong>obsdata_name</strong> – name of the Obs file used in the calibration process</p></li>
<li><p><strong>obsBin_plus_end</strong> – dataframe containing the intensity data used in the calibration process. 
The columns of the dataframe are the same as the obsbinEnd output file.</p></li>
</ul>
</dd>
</dl>
<p>:type cov_beta:2-D array
:type NminIter: int
:type NmaxIter: int
:type nbre_evt: int
:type nbreI: int
:type evtdata_name: str
:type obsdata_name: str
:type obsBin_plus_end: pandas.dataframe</p>
</dd></dl>

<span class="target" id="module-combinaison_calib"></span><p>Created on Thu Jul  1 11:28:50 2021</p>
<p>&#64;author: PROVOST-LUD</p>
<dl class="py function">
<dt class="sig sig-object py" id="combinaison_calib.calib_C1C2">
<span class="sig-prename descclassname"><span class="pre">combinaison_calib.</span></span><span class="sig-name descname"><span class="pre">calib_C1C2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">liste_evt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ObsBin_plus</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">NmaxIter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_I0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#combinaison_calib.calib_C1C2" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Function that calibrate the C1 and the C2 coefficient in the following equation:</dt><dd><p>I = C1 + C2.Mag + beta.log10(hypo) + gamma.hypo</p>
</dd>
</dl>
<p>where I is the intensity at a given hypocentral distance hypo,
Mag is the magnitude of the earthquake, beta, gamma, C1 and C2 are coefficients.
Regionalization of C1 is possible, with a maximal limit of 4 regions.</p>
<dl>
<dt>liste_evt<span class="classifier">list</span></dt><dd><p>list the earthquake whose macroseismic data and metadat will be used to calibrate the C1 and C2 coefficients.</p>
</dd>
<dt>ObsBin_plus<span class="classifier">pandas.DataFrame</span></dt><dd><p>DataFrame with all isoseismal radii (intensity bin) used in the inversion. The dataframe
should contain the isoseismal radii of each earthquake listed in liste_evt. The mandatory columns are:</p>
<blockquote>
<div><ul class="simple">
<li><p>EVID: ID of the earthquake</p></li>
<li><p>RegID: region ID of the location of the earthquake</p></li>
<li><p>Depth: initial depth of the earthquake</p></li>
<li><p>I: intensity value of the isoseismal radii</p></li>
<li><p>StdI: uncertainty associated to I</p></li>
<li><p>Depi: epicentral distance of the isoseismal radii</p></li>
<li><p>beta: the attenuation coefficient beta, corresponding to the region of the location of the earthquake</p></li>
<li><p>gamma: the attenuation coefficient gamma, corresponding to the region of the location of the earthquake</p></li>
<li><p>Mag: magnitude of the earthquake</p></li>
</ul>
</div></blockquote>
</dd>
<dt>NmaxIter<span class="classifier">int, optional</span></dt><dd><p>Maximal number of iteration allowed. The default is 50.</p>
</dd>
<dt>add_I0<span class="classifier">boolean, optional</span></dt><dd><p>option that add the epicentral intensity to the intensity data used in inversion.
The default is True.</p>
</dd>
</dl>
<dl class="simple">
<dt>ObsBin_plus<span class="classifier">pandas.DataFrame</span></dt><dd><p>Same as ObsBin_plus input</p>
</dd>
<dt>resC1regC2<span class="classifier">array</span></dt><dd><p>array with two elements. First element is the popt output of scipy.optimize.curve_fit,
i.e. the optimal values for the parameters so that the sum of the squared residuals
of f(xdata, <a href="#id1"><span class="problematic" id="id2">*</span></a>popt) - ydata is minimized. Second element is pcov output of scipy.optimize.curve_fit,
i.e. the estimated covariance of popt. The diagonals provide the variance of the parameter estimate.
To compute one standard deviation errors on the parameters use perr = np.sqrt(np.diag(pcov))</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="combinaison_calib.calib_C1C2H">
<span class="sig-prename descclassname"><span class="pre">combinaison_calib.</span></span><span class="sig-name descname"><span class="pre">calib_C1C2H</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">liste_evt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ObsBin_plus</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">NmaxIter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_I0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#combinaison_calib.calib_C1C2H" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Function that calibrate the C1 and the C2 coefficient in the following equation:</dt><dd><p>I = C1 + C2.Mag + beta.log10(hypo) + gamma.hypo</p>
</dd>
</dl>
<p>where I is the intensity at a given hypocentral distance hypo,
Mag is the magnitude of the earthquake, beta, gamma, C1 and C2 are coefficients.    
Depth of the calibration earthquakes is also inverted, within its uncertainties. The 
depth parameter is in the hypo term:</p>
<blockquote>
<div><p>hypo = sqrt(depi**2 + depth**2)</p>
</div></blockquote>
<p>Regionalization of C1 is possible, with a maximal limit of 4 regions.</p>
<dl>
<dt>liste_evt<span class="classifier">list</span></dt><dd><p>list the earthquake whose macroseismic data and metadat will be used to calibrate the C1 and C2 coefficients.</p>
</dd>
<dt>ObsBin_plus<span class="classifier">pandas.DataFrame</span></dt><dd><p>DataFrame with all isoseismal radii (intensity bin) used in the inversion. The dataframe
should contain the isoseismal radii of each earthquake listed in liste_evt. The mandatory columns are:</p>
<blockquote>
<div><ul class="simple">
<li><p>EVID: ID of the earthquake</p></li>
<li><p>RegID: region ID of the location of the earthquake</p></li>
<li><p>Depth: initial depth of the earthquake</p></li>
<li><p>Hmin: shallow limit of depth for the inversion</p></li>
<li><p>Hmax: deep limit of depth for the inversion</p></li>
<li><p>I: intensity value of the isoseismal radii</p></li>
<li><p>StdI: uncertainty associated to I</p></li>
<li><p>Depi: epicentral distance of the isoseismal radii</p></li>
<li><p>beta: the attenuation coefficient beta, corresponding to the region of the location of the earthquake</p></li>
<li><p>gamma: the attenuation coefficient gamma, corresponding to the region of the location of the earthquake</p></li>
<li><p>Mag: magnitude of the earthquake</p></li>
<li><dl class="simple">
<dt>eqStd: the equivalent standard deviation used to weight the data used in the inversion.</dt><dd><p>The weights are equal to 1/ObsBin_plus.eqStd.values**2</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</dd>
<dt>NmaxIter<span class="classifier">int, optional</span></dt><dd><p>Maximal number of iteration allowed. The default is 50.</p>
</dd>
<dt>add_I0<span class="classifier">boolean, optional</span></dt><dd><p>option that add the epicentral intensity to the intensity data used in ivnersion.
The default is True.</p>
</dd>
</dl>
<dl class="simple">
<dt>ObsBin_plus<span class="classifier">pandas.DataFrame</span></dt><dd><p>Same as ObsBin_plus input, but with the Depth column updated.</p>
</dd>
<dt>resC1regC2<span class="classifier">array</span></dt><dd><p>array with two elements. First element is the popt output of scipy.optimize.curve_fit,
i.e. the optimal values for the parameters so that the sum of the squared residuals
of f(xdata, <a href="#id3"><span class="problematic" id="id4">*</span></a>popt) - ydata is minimized. Second element is pcov output of scipy.optimize.curve_fit,
i.e. the estimated covariance of popt. The diagonals provide the variance of the parameter estimate.
To compute one standard deviation errors on the parameters use perr = np.sqrt(np.diag(pcov))</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="combinaison_calib.calib_C1C2betaH">
<span class="sig-prename descclassname"><span class="pre">combinaison_calib.</span></span><span class="sig-name descname"><span class="pre">calib_C1C2betaH</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">liste_evt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ObsBin_plus</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">C1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">C2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">NmaxIter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#combinaison_calib.calib_C1C2betaH" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Function that calibrate the C1, the C2and the beta coefficients in the following equation:</dt><dd><p>I = C1 + C2.Mag + beta.log10(hypo)</p>
</dd>
</dl>
<p>where I is the intensity at a given hypocentral distance hypo,
Mag is the magnitude of the earthquake, beta, gamma, C1 and C2 are coefficients.
Depth of the calibration earthquakes is also inverted, within its uncertainties. The 
depth parameter is in the hypo term:</p>
<blockquote>
<div><p>hypo = sqrt(depi**2 + depth**2)</p>
</div></blockquote>
<dl>
<dt>liste_evt<span class="classifier">list</span></dt><dd><p>list the earthquake whose macroseismic data and metadat will be used to calibrate the C1, C2 and beta coefficients.</p>
</dd>
<dt>ObsBin_plus<span class="classifier">pandas.DataFrame</span></dt><dd><p>DataFrame with all isoseismal radii (intensity bin) used in the inversion. The dataframe
should contain the isoseismal radii of each earthquake listed in liste_evt. The mandatory columns are:</p>
<blockquote>
<div><ul class="simple">
<li><p>EVID: ID of the earthquake</p></li>
<li><p>RegID: region ID of the location of the earthquake</p></li>
<li><p>Depth: initial depth of the earthquake</p></li>
<li><p>I: intensity value of the isoseismal radii</p></li>
<li><p>StdI: uncertainty associated to I</p></li>
<li><p>Depi: epicentral distance of the isoseismal radii</p></li>
<li><p>beta: the attenuation coefficient beta, corresponding to the region of the location of the earthquake</p></li>
<li><p>gamma: the attenuation coefficient gamma, corresponding to the region of the location of the earthquake</p></li>
<li><p>Mag: magnitude of the earthquake</p></li>
<li><dl class="simple">
<dt>eqStd: the equivalent standard deviation used to weight the data used in the inversion.</dt><dd><p>The weights are equal to 1/ObsBin_plus.eqStd.values**2</p>
</dd>
</dl>
</li>
<li><p>Hmin: lower bound of uncertainty associated to depth</p></li>
<li><p>Hmax: upper bound of uncertainty associated to depth</p></li>
</ul>
</div></blockquote>
</dd>
<dt>C1<span class="classifier">float</span></dt><dd><p>Initial value of the C1 coefficient.</p>
</dd>
<dt>C2<span class="classifier">float</span></dt><dd><p>Initial value of the C2 coefficient.</p>
</dd>
<dt>beta<span class="classifier">float</span></dt><dd><p>Initial value of the beta coefficient.</p>
</dd>
<dt>NmaxIter<span class="classifier">int, optional</span></dt><dd><p>Maximal number of iteration allowed. The default is 50.</p>
</dd>
<dt>add_I0<span class="classifier">boolean, optional</span></dt><dd><p>option that add the epicentral intensity to the intensity data used in inversion.
The default is True.</p>
</dd>
</dl>
<dl class="simple">
<dt>ObsBin_plus<span class="classifier">pandas.DataFrame</span></dt><dd><p>Same as the input, but with the depth column updated.</p>
</dd>
<dt>C1C2BetaH<span class="classifier">array</span></dt><dd><p>array with two array elements. First element is the popt output of scipy.optimize.curve_fit,
i.e. the optimal values for the parameters so that the sum of the squared residuals
of f(xdata, <a href="#id5"><span class="problematic" id="id6">*</span></a>popt) - ydata is minimized. The three first elments in this array are the C1, the C2 and the beta
coefficient. The other elements are the inverted depths, in the same order as liste_evt.
Second element is pcov output of scipy.optimize.curve_fit,
i.e. the estimated covariance of popt. The diagonals provide the variance of the parameter estimate.
To compute one standard deviation errors on the parameters use perr = np.sqrt(np.diag(pcov))</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="combinaison_calib.calib_C1C2betagammaH">
<span class="sig-prename descclassname"><span class="pre">combinaison_calib.</span></span><span class="sig-name descname"><span class="pre">calib_C1C2betagammaH</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">liste_evt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ObsBin_plus</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">C1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">C2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">NmaxIter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_I0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#combinaison_calib.calib_C1C2betagammaH" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Function that calibrate the C1, the C2, the beta and the gamma coefficients in the following equation:</dt><dd><p>I = C1 + C2.Mag + beta.log10(hypo) + gamma.hypo</p>
</dd>
</dl>
<p>where I is the intensity at a given hypocentral distance hypo,
Mag is the magnitude of the earthquake, beta, gamma, C1 and C2 are coefficients.
Depth of the calibration earthquakes is also inverted, within its uncertainties. The 
depth parameter is in the hypo term:</p>
<blockquote>
<div><p>hypo = sqrt(depi**2 + depth**2)</p>
</div></blockquote>
<dl>
<dt>liste_evt<span class="classifier">list</span></dt><dd><p>list the earthquake whose macroseismic data and metadat will be used to calibrate the C1, C2 and beta coefficients.</p>
</dd>
<dt>ObsBin_plus<span class="classifier">pandas.DataFrame</span></dt><dd><p>DataFrame with all isoseismal radii (intensity bin) used in the inversion. The dataframe
should contain the isoseismal radii of each earthquake listed in liste_evt. The mandatory columns are:</p>
<blockquote>
<div><ul class="simple">
<li><p>EVID: ID of the earthquake</p></li>
<li><p>RegID: region ID of the location of the earthquake</p></li>
<li><p>Depth: initial depth of the earthquake</p></li>
<li><p>I: intensity value of the isoseismal radii</p></li>
<li><p>StdI: uncertainty associated to I</p></li>
<li><p>Depi: epicentral distance of the isoseismal radii</p></li>
<li><p>beta: the attenuation coefficient beta, corresponding to the region of the location of the earthquake</p></li>
<li><p>gamma: the attenuation coefficient gamma, corresponding to the region of the location of the earthquake</p></li>
<li><p>Mag: magnitude of the earthquake</p></li>
<li><dl class="simple">
<dt>eqStd: the equivalent standard deviation used to weight the data used in the inversion.</dt><dd><p>The weights are equal to 1/ObsBin_plus.eqStd.values**2</p>
</dd>
</dl>
</li>
<li><p>Hmin: lower bound of uncertainty associated to depth</p></li>
<li><p>Hmax: upper bound of uncertainty associated to depth</p></li>
</ul>
</div></blockquote>
</dd>
<dt>C1<span class="classifier">float</span></dt><dd><p>Initial value of the C1 coefficient.</p>
</dd>
<dt>C2<span class="classifier">float</span></dt><dd><p>Initial value of the C2 coefficient.</p>
</dd>
<dt>beta<span class="classifier">float</span></dt><dd><p>Initial value of the beta coefficient.</p>
</dd>
<dt>gamma<span class="classifier">float</span></dt><dd><p>Initial value of the gamma coefficient.</p>
</dd>
<dt>NmaxIter<span class="classifier">int optional</span></dt><dd><p>Maximal number of iteration allowed. The default is 50.</p>
</dd>
<dt>add_I0<span class="classifier">boolean, optional</span></dt><dd><p>option that add the epicentral intensity to the intensity data used in inversion. The default is True.</p>
</dd>
</dl>
<dl class="simple">
<dt>ObsBin_plus<span class="classifier">pandas.DataFrame</span></dt><dd><p>Same as the input, but with the depth column updated.</p>
</dd>
<dt>C1C2BetaH<span class="classifier">array</span></dt><dd><p>array with two array elements. First element is the popt output of scipy.optimize.curve_fit,
i.e. the optimal values for the parameters so that the sum of the squared residuals
of f(xdata, <a href="#id7"><span class="problematic" id="id8">*</span></a>popt) - ydata is minimized. The four first elments in this array are the C1, the C2, the beta
and the gamma coefficients. The other elements are the inverted depths, in the same order as liste_evt.
Second element is pcov output of scipy.optimize.curve_fit,
i.e. the estimated covariance of popt. The diagonals provide the variance of the parameter estimate.
To compute one standard deviation errors on the parameters use perr = np.sqrt(np.diag(pcov))</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="combinaison_calib.calib_attBetaGamma_Kov">
<span class="sig-prename descclassname"><span class="pre">combinaison_calib.</span></span><span class="sig-name descname"><span class="pre">calib_attBetaGamma_Kov</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">liste_evt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ObsBin_plus</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta_ini</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma_ini</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">NminIter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">NmaxIter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_beta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.001</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_gamma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_I0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.01</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#combinaison_calib.calib_attBetaGamma_Kov" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that inverse iteratively and sequentially depth, epicentral intensity
and the attenuation coefficients beta and gamma for a given earthquake list and 
binned intensity.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>liste_evt</strong> (<em>list</em>) – Contains the ID of the earthquakes used for the inversion</p></li>
<li><p><strong>ObsBin_plus</strong> (<em>pandas.DataFrame</em>) – <p>dataframe with the binned intensity data for all calibration earthquakes.
This dataframe should at least have have the following
columns :</p>
<blockquote>
<div><ul>
<li><p>I: the binned intensity value,</p></li>
<li><p>StdI: the binned intensity standard deviation,</p></li>
<li><p>Depi: the associated epicentral distance,</p></li>
<li><p>Depth: the initial depth before inversion,</p></li>
<li><p>Hmin: the lower depth limit for inversion,</p></li>
<li><p>Hmax: the upper depth limit for inversion,</p></li>
<li><p>Io: the initial epicentral intensity before inversion,</p></li>
<li><p>Io_ini: the initial epicentral intensity before inversion,</p></li>
<li><p>Io_std: the epicentral intensity standard deviation,</p></li>
<li><dl class="simple">
<dt>eqStd: the inverse of the root square of the weights</dt><dd><p>used in the geometric attenuation coefficient,</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</p></li>
<li><p><strong>beta_ini</strong> (<em>float</em>) – initial value of the geometric attenuation coefficient beta</p></li>
<li><p><strong>gamma_ini</strong> (<em>float</em>) – initial value of the intrinsic attenuation coefficient gamma</p></li>
<li><p><strong>NminIter</strong> (<em>int</em>) – minimum number of iteration</p></li>
<li><p><strong>NmaxIter</strong> (<em>int</em>) – maximal number of iteration</p></li>
<li><p><strong>dossier_suivi</strong> (<em>str</em>) – folder in which the figures with the WRMS will be stored.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the ObsBin_plus dataframe with depth and epicentral intensity after inversion
the output eometric attenuation coefficient beta, the covariance
of the geometric attenuation coefficient, a list with the beta values
for each iteration.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="combinaison_calib.calib_attBetaGamma_Kov_unit">
<span class="sig-prename descclassname"><span class="pre">combinaison_calib.</span></span><span class="sig-name descname"><span class="pre">calib_attBetaGamma_Kov_unit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">liste_evt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ObsBin_plus</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#combinaison_calib.calib_attBetaGamma_Kov_unit" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that inverse sequentially depth, epicentral intensity and the
attenuation coefficients beta and gamma for a given earthquake list and 
binned intensity and one iteration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>liste_evt</strong> (<em>list</em>) – Contains the ID of the earthquakes used for the inversion</p></li>
<li><p><strong>ObsBin_plus</strong> (<em>pandas.DataFrame</em>) – <p>dataframe with the binned intensity data for all calibration earthquakes.
This dataframe should at least have have the following
columns :</p>
<blockquote>
<div><ul>
<li><p>I: the binned intensity value,</p></li>
<li><p>StdI: the binned intensity standard deviation,</p></li>
<li><p>Depi: the associated epicentral distance,</p></li>
<li><p>Depth: the initial depth before inversion,</p></li>
<li><p>Hmin: the lower depth limit for inversion,</p></li>
<li><p>Hmax: the upper depth limit for inversion,</p></li>
<li><p>Io: the initial epicentral intensity before inversion,</p></li>
<li><p>Io_ini: the initial epicentral intensity before inversion,</p></li>
<li><p>Io_std: the epicentral intensity standard deviation,</p></li>
<li><dl class="simple">
<dt>eqStd: the inverse of the root square of the weights</dt><dd><p>used in the geometric attenuation coefficient,</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</p></li>
<li><p><strong>beta</strong> (<em>float</em>) – initial value of the geometric attenuation coefficient beta</p></li>
<li><p><strong>gamma</strong> (<em>float</em>) – initial value of the intrinsic attenuation coefficient gamma</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the ObsBin_plus dataframe with depth and epicentral intensity after inversion
and the inverted attenuation coefficients beta and gamma</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="combinaison_calib.calib_attBeta_Kov">
<span class="sig-prename descclassname"><span class="pre">combinaison_calib.</span></span><span class="sig-name descname"><span class="pre">calib_attBeta_Kov</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">liste_evt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ObsBin_plus</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta_ini</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">NminIter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">NmaxIter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_beta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.001</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_I0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.01</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suivi_inversion</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dossier_suivi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#combinaison_calib.calib_attBeta_Kov" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that inverse iteratively and sequentially depth, epicentral intensity
and the geometric attenuation coefficient beta for a given earthquake list and 
binned intensity.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>liste_evt</strong> (<em>list</em>) – Contains the ID of the earthquakes used for the inversion</p></li>
<li><p><strong>ObsBin_plus</strong> (<em>pandas.DataFrame</em>) – <p>dataframe with the binned intensity data for all calibration earthquakes.
This dataframe should at least have have the following
columns :</p>
<blockquote>
<div><ul>
<li><p>I: the binned intensity value,</p></li>
<li><p>StdI: the binned intensity standard deviation,</p></li>
<li><p>Depi: the associated epicentral distance,</p></li>
<li><p>Depth: the initial depth before inversion,</p></li>
<li><p>Hmin: the lower depth limit for inversion,</p></li>
<li><p>Hmax: the upper depth limit for inversion,</p></li>
<li><p>Io: the initial epicentral intensity before inversion,</p></li>
<li><p>Io_ini: the initial epicentral intensity before inversion,</p></li>
<li><p>Io_std: the epicentral intensity standard deviation,</p></li>
<li><dl class="simple">
<dt>eqStd: the inverse of the root square of the weights</dt><dd><p>used in the geometric attenuation coefficient,</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</p></li>
<li><p><strong>beta_ini</strong> (<em>float</em>) – initial value of the geometric attenuation coefficient beta</p></li>
<li><p><strong>NminIter</strong> (<em>int</em>) – minimum number of iteration</p></li>
<li><p><strong>NmaxIter</strong> (<em>int</em>) – maximal number of iteration</p></li>
<li><p><strong>suivi_inversion</strong> (<em>bool</em>) – option to visualize the WRMS of depth, epicentral
intensity and geometric attenuation coefficient beta
at different iterations. Time consuming option.</p></li>
<li><p><strong>dossier_suivi</strong> (<em>str</em>) – folder in which the figures with the WRMS will be stored.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the ObsBin_plus dataframe with depth and epicentral intensity after inversion
the output eometric attenuation coefficient beta, the covariance
of the geometric attenuation coefficient, a list with the beta values
for each iteration.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="combinaison_calib.calib_attBeta_Kov_unit">
<span class="sig-prename descclassname"><span class="pre">combinaison_calib.</span></span><span class="sig-name descname"><span class="pre">calib_attBeta_Kov_unit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">liste_evt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ObsBin_plus</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#combinaison_calib.calib_attBeta_Kov_unit" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that inverse sequentially depth, epicentral intensity and the
geometric attenuation coefficient beta for a given earthquake list and 
binned intensity and one iteration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>liste_evt</strong> (<em>list</em>) – Contains the ID of the earthquakes used for the inversion</p></li>
<li><p><strong>ObsBin_plus</strong> (<em>pandas.DataFrame</em>) – <p>dataframe with the binned intensity data for all calibration earthquakes.
This dataframe should at least have have the following
columns :</p>
<blockquote>
<div><ul>
<li><p>I: the binned intensity value,</p></li>
<li><p>StdI: the binned intensity standard deviation,</p></li>
<li><p>Depi: the associated epicentral distance,</p></li>
<li><p>Depth: the initial depth before inversion,</p></li>
<li><p>Hmin: the lower depth limit for inversion,</p></li>
<li><p>Hmax: the upper depth limit for inversion,</p></li>
<li><p>Io: the initial epicentral intensity before inversion,</p></li>
<li><p>Io_ini: the initial epicentral intensity before inversion,</p></li>
<li><p>Io_std: the epicentral intensity standard deviation,</p></li>
<li><dl class="simple">
<dt>eqStd: the inverse of the root square of the weights</dt><dd><p>used in the geometric attenuation coefficient,</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</p></li>
<li><p><strong>beta</strong> (<em>float</em>) – initial value of the geometric attenuation coefficient beta</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the ObsBin_plus dataframe with depth and epicentral intensity after inversion
and the inverted geometric attenuation coefficient beta</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="combinaison_calib.check_ifHlim_ok">
<span class="sig-prename descclassname"><span class="pre">combinaison_calib.</span></span><span class="sig-name descname"><span class="pre">check_ifHlim_ok</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obsbin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">C1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">C2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#combinaison_calib.check_ifHlim_ok" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that check if the depth bounds are compatible with the epicentral intensity
and its uncertainty. If not the function returns new depth bounds compatible
with the epicentral intensity and its uncertainty. the following equation is used:</p>
<blockquote>
<div><p>I = C1 + C2.Mag + beta.log10(hypo)</p>
</div></blockquote>
<p>where I is the intensity at a given hypocentral distance hypo,
Mag is the magnitude of the earthquake, beta, C1 and C2 are coefficients provided by the user.</p>
<dl class="simple">
<dt>obsbin<span class="classifier">pandas.Dataframe</span></dt><dd><dl class="simple">
<dt>DataFrame with all isoseismal radii (intensity bin) of one earthquake. The mandatory columns are:</dt><dd><ul class="simple">
<li><p>Io_ini: initial epicentral intensity of the earthquake</p></li>
<li><p>Io_std: uncertainty associated to the epicentral intensity value</p></li>
<li><p>Mag: magnitude of the earthquake</p></li>
<li><p>Hmin_ini: initial minimal depth bounds</p></li>
<li><p>Hmax_ini: initial maximal depth bounds</p></li>
</ul>
</dd>
</dl>
</dd>
<dt>beta<span class="classifier">float</span></dt><dd><p>beta coefficient in the equation used to check the depth bounds.</p>
</dd>
<dt>C1<span class="classifier">float</span></dt><dd><p>C1 coefficient in the equation used to check the depth bounds.</p>
</dd>
<dt>C2<span class="classifier">float</span></dt><dd><p>C2 coefficient in the equation used to check the depth bounds.</p>
</dd>
</dl>
<dl class="simple">
<dt>Hmin<span class="classifier">float</span></dt><dd><p>if needed, new minimal depth bounds compatible
with the epicentral intensity and its uncertainty. 
Else, the output value is equal to the initial minimal depth bounds.</p>
</dd>
<dt>Hmax<span class="classifier">float</span></dt><dd><p>if needed, new maximal depth bounds compatible
with the epicentral intensity and its uncertainty. 
Else, the output value is equal to the initial maximal depth bounds.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="combinaison_calib.critere_arret_HI0">
<span class="sig-prename descclassname"><span class="pre">combinaison_calib.</span></span><span class="sig-name descname"><span class="pre">critere_arret_HI0</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">suivi_depth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suivi_I0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_I0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.01</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#combinaison_calib.critere_arret_HI0" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the conditions are met to stop the inversion process in the initialize_HI0() function.</p>
<dl class="simple">
<dt>suivi_depth<span class="classifier">dict</span></dt><dd><p>Dictionary that contains by earthquake ID (key of the dictionary) by chronological
order the depth for each iteration of the inversion scheme of the initialize_HI0() function.</p>
</dd>
<dt>suivi_I0<span class="classifier">dict</span></dt><dd><p>Dictionary that contains by earthquake ID (key of the dictionary) by chronological
order the epicentral intensity for each iteration of the inversion scheme of the initialize_HI0() function.</p>
</dd>
<dt>stop_depth<span class="classifier">float, optional</span></dt><dd><p>Criterion to achieve to end the inversion process of the initialize_HI0() function. The default is 0.05.
To compute the value compared to this criterion, first the mean of the difference of the three last 
depths in the iteration is calculated for each earthquake. The means of all calibration earthquakes are then added.</p>
</dd>
<dt>stop_I0<span class="classifier">float, optional</span></dt><dd><p>Criterion to achieve to end the inversion process of the initialize_HI0() function. The default is 0.01.
To compute the value compared to this criterion, first the mean of the difference of the three last 
epicentral intensities in the iteration is calculated for each earthquake. The means of all calibration earthquakes are then added.</p>
</dd>
</dl>
<dl class="simple">
<dt>condition<span class="classifier">boolean</span></dt><dd><p>Equal to True if the values compared to both stop_I0 and stop_depth are smaller to
stop_I0 and stop_depth.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="combinaison_calib.critere_stop">
<span class="sig-prename descclassname"><span class="pre">combinaison_calib.</span></span><span class="sig-name descname"><span class="pre">critere_stop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">suivi_beta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suivi_depth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suivi_I0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_beta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.001</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_I0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.01</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#combinaison_calib.critere_stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that check if the stop criteria of the iterative inversion are reached.
The inversion stop if the three last inverted parameters is stable: the mean
difference of the three last values should be under a given value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>suivi_beta</strong> (<em>list</em>) – Contains the inverted geometric attenuation coefficient beta from the
first iteration to the current iteration</p></li>
<li><p><strong>suivi_depth</strong> (<em>dict</em>) – Contains for each earthquake the inverted depth values from the
first iteration to the current iteration</p></li>
<li><p><strong>suivi_I0</strong> (<em>dict</em>) – Contains for each earthquake the inverted epicentral intensity
values from the first iteration to the current iteration</p></li>
<li><p><strong>stop_beta</strong> (<em>float</em>) – stop value for the geometric attenuation coefficient beta</p></li>
<li><p><strong>stop_depth</strong> (<em>float</em>) – stop value for the depth. The mean difference of the three
last values is meaned over the earthquakes</p></li>
<li><p><strong>stop_I0</strong> (<em>float</em>) – stop value for the epicentral intensity. The mean difference
of the three last values is meaned over the earthquakes</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="combinaison_calib.critere_stop2">
<span class="sig-prename descclassname"><span class="pre">combinaison_calib.</span></span><span class="sig-name descname"><span class="pre">critere_stop2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">suivi_beta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suivi_gamma</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suivi_depth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suivi_I0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_beta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.001</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_gamma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_I0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.01</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#combinaison_calib.critere_stop2" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that check if the stop criteria of the iterative inversion are reached.
The inversion stop if the three last inverted parameters is stable: the mean
difference of the three last values should be under a given value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>suivi_beta</strong> (<em>list</em>) – Contains the inverted geometric attenuation coefficient beta from the
first iteration to the current iteration</p></li>
<li><p><strong>suivi_depth</strong> (<em>dict</em>) – Contains for each earthquake the inverted depth values from the
first iteration to the current iteration</p></li>
<li><p><strong>suivi_I0</strong> (<em>dict</em>) – Contains for each earthquake the inverted epicentral intensity
values from the first iteration to the current iteration</p></li>
<li><p><strong>NminIter</strong> (<em>int</em>) – minimal number of iterations before stop</p></li>
<li><p><strong>stop_beta</strong> (<em>float</em>) – stop value for the geometric attenuation coefficient beta</p></li>
<li><p><strong>stop_depth</strong> (<em>float</em>) – stop value for the depth. The mean difference of the three
last values is meaned over the earthquakes</p></li>
<li><p><strong>stop_I0</strong> (<em>float</em>) – stop value for the epicentral intensity. The mean difference
of the three last values is meaned over the earthquakes</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="combinaison_calib.define_ls_color_bydepth">
<span class="sig-prename descclassname"><span class="pre">combinaison_calib.</span></span><span class="sig-name descname"><span class="pre">define_ls_color_bydepth</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">depth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'viridis_r'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#combinaison_calib.define_ls_color_bydepth" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that associates a color to a number.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>depth</strong> (<em>int</em>) – the number for which a color is needed.</p></li>
<li><p><strong>cmap</strong> (<em>str</em>) – colormap choosed to attribute the colors (see matplotlib colormaps)</p></li>
<li><p><strong>vmin</strong> (<em>float</em>) – minimum value to define the color map</p></li>
<li><p><strong>vmax</strong> (<em>float</em>) – maximal value to define the color map</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a line style, the color associated to the input number, the chosen
colormap object, the norm object associated to the colormap and
defined by vmin and vmax.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="combinaison_calib.define_ls_color_byevt">
<span class="sig-prename descclassname"><span class="pre">combinaison_calib.</span></span><span class="sig-name descname"><span class="pre">define_ls_color_byevt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">count</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'tab20b'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">len_cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#combinaison_calib.define_ls_color_byevt" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that attribute a different color and line style to a number.
The number should be lower than 99.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>count</strong> (<em>int</em>) – the number for which a color and a line style is needed.</p></li>
<li><p><strong>cmap</strong> (<em>str</em>) – colormap choosed to attribute the colors (see matplotlib colormaps)</p></li>
<li><p><strong>len_cmap</strong> (<em>int</em>) – number of color considered</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a line style and a color</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="combinaison_calib.initialize_C1C2">
<span class="sig-prename descclassname"><span class="pre">combinaison_calib.</span></span><span class="sig-name descname"><span class="pre">initialize_C1C2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ObsBin_plus</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#combinaison_calib.initialize_C1C2" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Give initial values for C1 and C2 coefficient for the following equation:</dt><dd><p>I = C1 + C2.Mag + beta.log10(hypo) + gamma.hypo</p>
</dd>
</dl>
<p>where I is the intensity at a given hypocentral distance hypo,
Mag is the magnitude of the earthquake and beta and gamma are attenuation coefficients, supposed known.</p>
<dl>
<dt>ObsBin_plus<span class="classifier">pandas.DataFrame</span></dt><dd><p>DataFrame with all isoseismal radii (intensity bin) used in the inversion.
The mandatory columns are:</p>
<blockquote>
<div><ul class="simple">
<li><p>EVID: ID of the earthquake</p></li>
<li><p>Depth: initial depth of the earthquake</p></li>
<li><p>I: intensity value of the isoseismal radii</p></li>
<li><p>Depi: epcientral distance of the isoseismal radii</p></li>
<li><p>beta: the attenuation coefficient beta</p></li>
<li><p>gamma: the attenuation coefficient gamma</p></li>
<li><dl class="simple">
<dt>eqStd: the equivalent standard deviation used to weight the data used in the inversion.</dt><dd><p>The weights are equal to 1/ObsBin_plus.eqStd.values**2</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</dd>
</dl>
<dl class="simple">
<dt>C1<span class="classifier">float</span></dt><dd><p>C1 coefficient value</p>
</dd>
<dt>C2<span class="classifier">float</span></dt><dd><p>C2 coefficient value</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="combinaison_calib.initialize_HI0">
<span class="sig-prename descclassname"><span class="pre">combinaison_calib.</span></span><span class="sig-name descname"><span class="pre">initialize_HI0</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ObsBin_plus</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">liste_evt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">NmaxIter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#combinaison_calib.initialize_HI0" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute a depth and an epicentral intensity compatible with a beta and a gamma
value using the Koveslighety equation:</p>
<blockquote>
<div><p>I = I0 + beta.log10(hypo/depth) + gamma.(hypo-depth)</p>
</div></blockquote>
<p>with I0 the epicentral intensity and hypo the hyocentral distance
Depth and epicentral intensity are estimated 
within bounds representing their uncertainties. Depth and epicentral intensity are estimated
for all earthquakes listed in liste_evt.
For more information, see Provost (in writing), CalIPE</p>
<dl>
<dt>ObsBin_plus<span class="classifier">pandas.DataFrame</span></dt><dd><p>DataFrame with all isoseismal radii (intensity bin) used in the inversion. The dataframe
should contain the isoseismal radii of each earthquake listed in liste_evt. The mandatory columns are:</p>
<blockquote>
<div><ul class="simple">
<li><p>EVID: ID of the earthquake</p></li>
<li><p>Depth: initial depth of the earthquake</p></li>
<li><p>Hmin: minimal value of the depth uncertainty bounds</p></li>
<li><p>Hmax: maximal value of the depth uncertainty bounds</p></li>
<li><p>I: intensity value of the isoseismal radii</p></li>
<li><p>StdI: uncertainty associated to I</p></li>
<li><p>Depi: epcientral distance of the isoseismal radii</p></li>
<li><p>I0: initial epicentral intensity of the earthquake</p></li>
<li><p>Io_ini: same as I0</p></li>
<li><p>Io_std: uncertainty associated to the epicentral intensity value</p></li>
</ul>
</div></blockquote>
</dd>
<dt>liste_evt<span class="classifier">list</span></dt><dd><p>list the earthquake whose depths and epicentral intensities will be inverted</p>
</dd>
<dt>beta<span class="classifier">float</span></dt><dd><p>beta coefficient in the Koveslighety equation.</p>
</dd>
<dt>gamma<span class="classifier">float</span></dt><dd><p>gamma coefficient in the Koveslighety equation.</p>
</dd>
<dt>NmaxIter<span class="classifier">int, optional</span></dt><dd><p>Maximal number of iteration allowed. The default is 50.</p>
</dd>
</dl>
<dl class="simple">
<dt>ObsBin_plus<span class="classifier">pandas.DataFrame</span></dt><dd><p>One column is added to the input ObsBin_plus, called StdIo_inv. This
column contains the output standard deviation of the inversion of epicentral intensity.
Columns I0 and Depth are updated with the output values ot the inversion process.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="combinaison_calib.update_depth">
<span class="sig-prename descclassname"><span class="pre">combinaison_calib.</span></span><span class="sig-name descname"><span class="pre">update_depth</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ObsBin_plus</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depths</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">liste_evt</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#combinaison_calib.update_depth" title="Permalink to this definition">¶</a></dt>
<dd><p>function that updates the depth in the ObsBin_plus dataframe</p>
<dl>
<dt>ObsBin_plus<span class="classifier">pandas.DataFrame</span></dt><dd><p>DataFrame with all isoseismal radii (intensity bin) used in the inversion. The dataframe
should contain the isoseismal radii of each earthquake listed in liste_evt. 
The mandatories columns for this function are:</p>
<blockquote>
<div><ul class="simple">
<li><p>EVID: ID of the earthquake</p></li>
<li><p>Depth: depth of the earthquake</p></li>
</ul>
</div></blockquote>
<p>TThe ObsBin_plus dataframe should at least contains information about the isoseismal radii, i.e.
I (intensity value of the isoseismal radii) and Depi (epicentral distance of the isoseismal radii) but
those columns are not necessary in this function.</p>
</dd>
<dt>depths<span class="classifier">list</span></dt><dd><p>list of depths of the earthquakes listed in liste_evt. Order in depths and liste_evt must be the same.</p>
</dd>
<dt>liste_evt<span class="classifier">list</span></dt><dd><p>list of earthquakes listed. Order in depths and liste_evt must be the same.</p>
</dd>
</dl>
<dl class="simple">
<dt>ObsBin_plus<span class="classifier">pandas.DataFrame</span></dt><dd><p>Same as ObsBin_plus input but with the column Depth updated with the depths input.</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-create_subsets"></span><p>Created on Tue Jul 27 14:56:53 2021</p>
<p>&#64;author: PROVOST-LUD</p>
<dl class="py function">
<dt class="sig sig-object py" id="create_subsets.check_duplicate">
<span class="sig-prename descclassname"><span class="pre">create_subsets.</span></span><span class="sig-name descname"><span class="pre">check_duplicate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">global_liste</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">criteres</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#create_subsets.check_duplicate" title="Permalink to this definition">¶</a></dt>
<dd><p>Check in a list of calibration datasets if two calibration datasets are identical.
Duplicate calibration datasets are deleted.</p>
<dl class="simple">
<dt>global_liste<span class="classifier">list</span></dt><dd><p>list of the different list of calibration earthquakes, identified by their ID.</p>
</dd>
<dt>criteres<span class="classifier">pandas.DataFrame</span></dt><dd><p>dataframe that traces the criteria used to create each of the subsets listed in global_list.</p>
</dd>
</dl>
<dl class="simple">
<dt>no_duplicate_list<span class="classifier">list</span></dt><dd><p>list of the different list of calibration earthquakes with no duplicated calibration datasets.</p>
</dd>
<dt>no_duplicat_criteres<span class="classifier">TYPE</span></dt><dd><p>dataframe that traces the criteria used to create each of the subsets listed in no_duplicate_list.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="create_subsets.create_basicdb_criteria">
<span class="sig-prename descclassname"><span class="pre">create_subsets.</span></span><span class="sig-name descname"><span class="pre">create_basicdb_criteria</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">evtdata_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obsdata_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binning_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ROBS'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputfolder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regiondata_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ponderation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Ponderation</span> <span class="pre">evt-uniforme'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#create_subsets.create_basicdb_criteria" title="Permalink to this definition">¶</a></dt>
<dd><p>Complete the evt file with information about the number of intensity class (Nclass)
after binning (to create isoseismal radii) by earthquake and the total number of 
intensity data points (IDP) used to compute theisoseismal radii (Ndata) by earthquake.</p>
<dl>
<dt>evtdata_name<span class="classifier">str</span></dt><dd><p>name of the evt data file. The list of the calibration earthquakes and associated 
metadata are stored in this file. This .txt file contains 16 columns, separated by the “;” string:</p>
<blockquote>
<div><ul class="simple">
<li><p>EVID: ID of the earthquake</p></li>
<li><p>Year: year of occurence of the earthquake</p></li>
<li><p>Month: month of occurence of the earthquake</p></li>
<li><p>Day: day of occurence of the earthquake</p></li>
<li><p>Lon: longitude in WGS84 of the epicenter</p></li>
<li><p>Lat: latitude in WGS84 of the epicenter</p></li>
<li><p>QPos: quality of the epicenter location</p></li>
<li><p>I0: epicentral intensity</p></li>
<li><p>QI0: quality of the epicentral intensity value</p></li>
<li><p>Ic: intensity of completeness</p></li>
<li><p>Dc: distance of completeness</p></li>
<li><p>Mag: magnitude of the earthquake</p></li>
<li><p>StdM: uncertainty associated with the magnitude</p></li>
<li><p>Depth: hypocentral depth of the earthquake</p></li>
<li><p>Hmin: lower bound of uncertainty associated to depth</p></li>
<li><p>Hmax: upper bound of uncertainty associated to depth</p></li>
</ul>
</div></blockquote>
</dd>
<dt>obsdata_name<span class="classifier">str</span></dt><dd><p>name of the obs data file. The IDPs of the calibration earthquakes are stored in this file.
This .txt file contains 5 columns, separated by the “;” string:</p>
<blockquote>
<div><ul class="simple">
<li><p>EVID: ID of the earthquake</p></li>
<li><p>Lon: longitude in WGS84 of the IDP</p></li>
<li><p>Lat: latitude in WGS84 of the IDP</p></li>
<li><p>Iobs: value of intensity of the IDP</p></li>
<li><p>QIobs: quality associated to Iobs</p></li>
</ul>
</div></blockquote>
</dd>
<dt>binning_type<span class="classifier">str, optional</span></dt><dd><p>Name of the method applied to the calibration earthquakes intensity date to compute 
isoseismal radii. The isoseismal radii are the intensity data used in the 
inversion process Availaible values are : ‘ROBS’, ‘RAVG’, ‘RP50’ and ‘RP84’. 
The default is ‘ROBS’.</p>
</dd>
<dt>outputfolder<span class="classifier">str, optional</span></dt><dd><p>path to the outputfolder where the output dataframe will be saved in a excel file.
The default is ‘’ (file saved in the folder where the function is executed)</p>
</dd>
<dt>regiondata_name<span class="classifier">str, optional</span></dt><dd><p>Name of the .txt file which contains the contour of the different regions
defined by the user. Contour is described by a polygon. The coordinates of
the polygon points are in WGS84 longitude and latitude.
The three columns are separeted by “;”:</p>
<blockquote>
<div><ul class="simple">
<li><p>ID_region: ID of the considered region</p></li>
<li><p>Lon: Longitude of the polygon points</p></li>
<li><p>Lat: Latitude of the polygon points.</p></li>
</ul>
</div></blockquote>
<p>The default is ‘’.</p>
</dd>
<dt>ponderation<span class="classifier">TYPE, optional</span></dt><dd><p>Name of the ponderation applied to the calibration earthquakes intensity data used
in the inversion process of the beta coefficient. The default is ‘Ponderation evt-uniforme’.</p>
</dd>
</dl>
<dl class="simple">
<dt>criteria<span class="classifier">pandas.dataframe</span></dt><dd><p>dataframe with the same columns as the evt file with two supplementary columns
NClass (number of isoseismal radii) per earthquake and Ndata (number of IDP used to</p>
</dd>
</dl>
<p>compute the isoseismal radii) per earthquake.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="create_subsets.create_bootstrap_notrandom">
<span class="sig-prename descclassname"><span class="pre">create_subsets.</span></span><span class="sig-name descname"><span class="pre">create_bootstrap_notrandom</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">liste_base</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#create_subsets.create_bootstrap_notrandom" title="Permalink to this definition">¶</a></dt>
<dd><p>Create subsets useable for a bootstrap study for a basic calibration dataset.
The subsets are created by deleting one earthquake from the basic calibration dataset.
Each earthquake of the basic calibration dataset will be deleted to create the subsets:</p>
<blockquote>
<div><p>for example, if the basic calibration dataset contains 10 earthquakes,
the function will create 10 subsets, with in each subset one earthquake deleted from
the calibration list.</p>
</div></blockquote>
<dl class="simple">
<dt>liste_base<span class="classifier">list</span></dt><dd><p>list of calibration earthquake, identified by their ID.</p>
</dd>
</dl>
<dl class="simple">
<dt>bootstrap_list<span class="classifier">list</span></dt><dd><p>list of the different bootstrap susbets</p>
</dd>
<dt>bootstrap_criteres<span class="classifier">pandas.DataFrame</span></dt><dd><p>dataframe containing the deleted earthquake ID for each subset.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="create_subsets.create_liste_subset">
<span class="sig-prename descclassname"><span class="pre">create_subsets.</span></span><span class="sig-name descname"><span class="pre">create_liste_subset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">criteria</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year_inf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year_sup</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">QH</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">NClass</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Nobs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Dc</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#create_subsets.create_liste_subset" title="Permalink to this definition">¶</a></dt>
<dd><p>Create subsets from a calibration dataset (called hereafter basic calibration database)
and the following criteria:</p>
<blockquote>
<div><p>year of occurence of the earthquake
Quality of the depth estimate
Number of intensity class of the isoseismal radii of the earthquake
Number of data used to compute the isoseismal radii of the earthquake
Distance of completeness of the earthquake’s macroseismic field</p>
</div></blockquote>
<dl class="simple">
<dt>criteria<span class="classifier">pandas.DataFrame</span></dt><dd><dl class="simple">
<dt>dataframe with metadata about the earthquakes of the basic calibration. The metadata required are:</dt><dd><ul class="simple">
<li><p>EVID: ID of the earthquake</p></li>
<li><p>Year: year of occurence of the earthquake</p></li>
<li><p>Dc: distance of completeness of the earthquake’s macroseismic field</p></li>
<li><p>NClass: number of intensity class of the isoseismal radii of the earthquake</p></li>
<li><p>Ndata: number of data used to compute the isoseismal radii of the earthquake</p></li>
<li><p>QH: quality of the depth estimate</p></li>
</ul>
</dd>
</dl>
</dd>
<dt>year_inf<span class="classifier">list of int</span></dt><dd><p>list of the minimal year of occurence allowed.</p>
</dd>
<dt>year_sup<span class="classifier">list int</span></dt><dd><p>list of the maximal year of occurence allowed.</p>
</dd>
<dt>QH<span class="classifier">list</span></dt><dd><p>List of list of the quality of the depth estimate in the metadata wished.
Example : QH = [[‘A’, ‘B’], [‘A’, ‘B’, ‘C’]]
The quality of the depth estimate in the metadata is based on expert opinion. 
A is the best quality factor and E the worst. E quality means that we have no
idea about the depth of the earthquake. In the example, the subsets created will contain
earthquakes with ‘A’ and ‘B’ or ‘A’, ‘B’ and ‘C’ depth quality.</p>
</dd>
<dt>NClass<span class="classifier">list of int</span></dt><dd><p>list of the minimal number of intensity class allowed.</p>
</dd>
<dt>Nobs<span class="classifier">list of int</span></dt><dd><p>list of the minimal number of data used to compute isoseismal radii allowed.</p>
</dd>
<dt>Dc<span class="classifier">list of float</span></dt><dd><p>list of the minimal distance of completeness of the earthquake’s macroseismic field
allowed.</p>
</dd>
</dl>
<dl class="simple">
<dt>global_liste<span class="classifier">list</span></dt><dd><p>list of the different list of calibration earthquakes.</p>
</dd>
<dt>criteres<span class="classifier">pandas.DataFrame</span></dt><dd><p>dataframe that traces the criteria used to create each of the subsets.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="create_subsets.create_subsets">
<span class="sig-prename descclassname"><span class="pre">create_subsets.</span></span><span class="sig-name descname"><span class="pre">create_subsets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">global_liste</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">criteres</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evtdata_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">basename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column_criteria</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['Year_inf',</span> <span class="pre">'Year_sup',</span> <span class="pre">'NClass',</span> <span class="pre">'QH',</span> <span class="pre">'Ndata',</span> <span class="pre">'Dc']</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#create_subsets.create_subsets" title="Permalink to this definition">¶</a></dt>
<dd><p>Create calibration Evt files from a list of calibration susbsets.</p>
<dl class="simple">
<dt>global_liste<span class="classifier">list</span></dt><dd><p>list of list of earthquakes identified by their ID of calibration subsets.</p>
</dd>
<dt>criteres<span class="classifier">pandas.DataFrame</span></dt><dd><p>dataframe with the criteria used to define the subsets. Each line corresponds to
one subset. The order is the same as the list of subsets of global_liste.</p>
</dd>
<dt>evtdata_name<span class="classifier">str</span></dt><dd><p>Name of the Evt file of the basic calibration dataset. The subsets are created from
the basic dataset.</p>
</dd>
<dt>folder<span class="classifier">str, optional</span></dt><dd><p>Name of the folder where the subset files will be saved. The default is ‘’.</p>
</dd>
<dt>basename<span class="classifier">str, optional</span></dt><dd><p>basename of the basic calibration dataset. Used to name the folder where the
subset files will be saved. The default is ‘’. In this case, the evtdata_name will
be used.</p>
</dd>
<dt>column_criteria<span class="classifier">list, optional</span></dt><dd><p>List of the columns of the criteria used to define the subsets from the
basic calibration database. The default is [‘Year_inf’, ‘Year_sup’, ‘NClass’, ‘QH’, ‘Ndata’, ‘Dc’].</p>
</dd>
</dl>
<p>None.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="create_subsets.filter_by_nevt">
<span class="sig-prename descclassname"><span class="pre">create_subsets.</span></span><span class="sig-name descname"><span class="pre">filter_by_nevt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">global_liste</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">criteres</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nmin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#create_subsets.filter_by_nevt" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter a list of calibration sets and keep only the calibration sets with 
a minimal number of earthquakes.</p>
<dl class="simple">
<dt>global_liste<span class="classifier">list</span></dt><dd><p>list of the different list of calibration earthquakes, identified by their ID.</p>
</dd>
<dt>criteres<span class="classifier">pandas.DataFrame</span></dt><dd><p>dataframe that traces the criteria used to create each of the subsets listed in global_list.</p>
</dd>
<dt>nmin<span class="classifier">int, optional</span></dt><dd><p>minimal number of earthquake allowed in the calibration datasubsets. The default is 10.</p>
</dd>
</dl>
<dl class="simple">
<dt>filt_nevt_liste<span class="classifier">list</span></dt><dd><p>global_liste filtered from the datasets with a number of earthquakes smaller than nmin.</p>
</dd>
<dt>filt_criteres<span class="classifier">TYPE</span></dt><dd><p>criteres filtered from the datasets with a number of earthquakes smaller than nmin.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="create_subsets.same_values_2array">
<span class="sig-prename descclassname"><span class="pre">create_subsets.</span></span><span class="sig-name descname"><span class="pre">same_values_2array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">array2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#create_subsets.same_values_2array" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if two arrays of the same length contains the same values</p>
<dl class="simple">
<dt>array1<span class="classifier">array</span></dt><dd><p>first array to check.</p>
</dd>
<dt>array2<span class="classifier">array</span></dt><dd><p>second array to check.</p>
</dd>
</dl>
<dl class="simple">
<dt>bool</dt><dd><p>is the two arrays contains the same values, return True. Else return False</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-EvtIntensityObject"></span><p>Created on Tue Jun 22 16:41:31 2021</p>
<p>&#64;author: PROVOST-LUD</p>
<span class="target" id="module-library_bin"></span><p>Created on Fri Jul  9 16:23:37 2021</p>
<p>&#64;author: PROVOST-LUD</p>
<dl class="py function">
<dt class="sig sig-object py" id="library_bin.RAVG">
<span class="sig-prename descclassname"><span class="pre">library_bin.</span></span><span class="sig-name descname"><span class="pre">RAVG</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obsdata</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Ic</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">I0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">QI0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#library_bin.RAVG" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that bins intensiy data points in intensity class for one earthquake.
For each intensity class, the epicentral distance of the intensity data points
are meaned (on the log10 of the epicentral distance). Intensity within the intensity
class is also meaned. Both means are weighted mean.
Width of the intensity class : 1.
Standard deviation associated to the intensity class is equal to the log. standard
deviation of the meaned epicentral distances multiplied by the absolute value
of a geometric attenuation coefficient equal to -3.5.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obsdata</strong> (<em>pandas.DataFrame</em>) – dataframe with the following columns : Iobs, value of the
intensity data point, Depi the associated epicentral intensity,
QIobs the associated quality (A, B or C) and EVID the earthquake ID.</p></li>
<li><p><strong>depth</strong> (<em>float</em>) – hypocentral depth of the considered earthquake</p></li>
<li><p><strong>Ic</strong> – intensity of completeness of the macroseismic field</p></li>
<li><p><strong>I0</strong> (<em>float</em>) – epicentral intensity of the earthquake</p></li>
<li><p><strong>QI0</strong> (<em>float</em>) – epicentral intensity quality translated in standard deviation</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a pandas.DataFrame with the binned intensity. The columns are:
- EVID: the earthquake ID, 
- I: the value of the binned intensity,
- Depi: the associated epicentral distance,
- Hypo: the associated hypocentral distance,
- StdLogR: the log standard deviation of the epicentral geometric mean,
- StdI: the standard deviation associatedto the binned intensity value,
- Io: the epicentral intensity,
- Io_std: the epicentral intensity standard deviation,
- Ndata: the number of intensity data point used compute the intensity bin.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="library_bin.RF50">
<span class="sig-prename descclassname"><span class="pre">library_bin.</span></span><span class="sig-name descname"><span class="pre">RF50</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obsdata</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Ic</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">I0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">QI0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#library_bin.RF50" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that bins intensiy data points in intensity class for one earthquake.
The epicentral distance associated to each intensity class is equal
to the weighted median of the log10 of the epicentral distance of the intensity data points.
Only one intensity class is kept and correspond to the most far and most reliable isoseismal of 
the considered earthquake (see Traversa et al 2017)</p>
<p>Width of the intensity class : 0.
Standard deviation associated to the intensity class is equal to the log. standard
deviation of the meaned epicentral distances multiplied by the absolute value
of a geometric attenuation coefficient equal to -3.5.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obsdata</strong> (<em>pandas.DataFrame</em>) – dataframe with the following columns : Iobs, value of the
intensity data point, Depi the associated epicentral intensity,
QIobs the associated quality (A, B or C) and EVID the earthquake ID.</p></li>
<li><p><strong>depth</strong> (<em>float</em>) – hypocentral depth of the considered earthquake</p></li>
<li><p><strong>Ic</strong> – intensity of completeness of the macroseismic field</p></li>
<li><p><strong>I0</strong> (<em>float</em>) – epicentral intensity of the earthquake</p></li>
<li><p><strong>QI0</strong> (<em>float</em>) – epicentral intensity quality translated in standard deviation</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a pandas.DataFrame with the binned intensity. The columns are:
- EVID: the earthquake ID, 
- I: the value of the binned intensity,
- Depi: the associated epicentral distance,
- Hypo: the associated hypocentral distance,
- StdLogR: the log standard deviation of the epicentral geometric mean,
- StdI: the standard deviation associatedto the binned intensity value,
- Io: the epicentral intensity,
- Io_std: the epicentral intensity standard deviation,
- Ndata: the number of intensity data point used compute the intensity bin.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="library_bin.RF84">
<span class="sig-prename descclassname"><span class="pre">library_bin.</span></span><span class="sig-name descname"><span class="pre">RF84</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obsdata</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Ic</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">I0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">QI0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#library_bin.RF84" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that bins intensiy data points in intensity class for one earthquake.
The epicentral distance associated to each intensity class is equal
to the weighted 84th percentile of the log10 of the epicentral distance of the intensity data points.
Only one intensity class is kept and correspond to the most far and most reliable isoseismal of 
the considered earthquake (see Traversa et al 2017)</p>
<p>Width of the intensity class : 0.
Standard deviation associated to the intensity class is equal to the log. standard
deviation of the meaned epicentral distances multiplied by the absolute value
of a geometric attenuation coefficient equal to -3.5.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obsdata</strong> (<em>pandas.DataFrame</em>) – dataframe with the following columns : Iobs, value of the
intensity data point, Depi the associated epicentral intensity,
QIobs the associated quality (A, B or C) and EVID the earthquake ID.</p></li>
<li><p><strong>depth</strong> (<em>float</em>) – hypocentral depth of the considered earthquake</p></li>
<li><p><strong>Ic</strong> – intensity of completeness of the macroseismic field</p></li>
<li><p><strong>I0</strong> (<em>float</em>) – epicentral intensity of the earthquake</p></li>
<li><p><strong>QI0</strong> (<em>float</em>) – epicentral intensity quality translated in standard deviation</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a pandas.DataFrame with the binned intensity. The columns are:
- EVID: the earthquake ID, 
- I: the value of the binned intensity,
- Depi: the associated epicentral distance,
- Hypo: the associated hypocentral distance,
- StdLogR: the log standard deviation of the epicentral geometric mean,
- StdI: the standard deviation associatedto the binned intensity value,
- Io: the epicentral intensity,
- Io_std: the epicentral intensity standard deviation,
- Ndata: the number of intensity data point used compute the intensity bin.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="library_bin.ROBS">
<span class="sig-prename descclassname"><span class="pre">library_bin.</span></span><span class="sig-name descname"><span class="pre">ROBS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obsdata</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Ic</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">I0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">QI0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#library_bin.ROBS" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that bins intensiy data points in intensity class for one earthquake.
For each intensity class, the epicentral distance of the intensity data points
are meaned (on the log10 of the epicentral distance).
Width of the intensity class : 0.
Standard deviation associated to the intensity class is equal to the log. standard
deviation of the meaned epicentral distances multiplied by the absolute value
of a geometric attenuation coefficient equal to -3.5.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obsdata</strong> (<em>pandas.DataFrame</em>) – dataframe with the following columns : Iobs, value of the
intensity data point, Depi the associated epicentral intensity,
QIobs the associated quality (A, B or C) and EVID the earthquake ID.</p></li>
<li><p><strong>depth</strong> (<em>float</em>) – hypocentral depth of the considered earthquake</p></li>
<li><p><strong>Ic</strong> – intensity of completeness of the macroseismic field</p></li>
<li><p><strong>I0</strong> (<em>float</em>) – epicentral intensity of the earthquake</p></li>
<li><p><strong>QI0</strong> (<em>float</em>) – epicentral intensity quality translated in standard deviation</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a pandas.DataFrame with the binned intensity. The columns are:
- EVID: the earthquake ID, 
- I: the value of the binned intensity,
- Depi: the associated epicentral distance,
- Hypo: the associated hypocentral distance,
- StdLogR: the log standard deviation of the epicentral geometric mean,
- StdI: the standard deviation associatedto the binned intensity value,
- Io: the epicentral intensity,
- Io_std: the epicentral intensity standard deviation,
- Ndata: the number of intensity data point used compute the intensity bin.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="library_bin.RP50">
<span class="sig-prename descclassname"><span class="pre">library_bin.</span></span><span class="sig-name descname"><span class="pre">RP50</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obsdata</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Ic</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">I0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">QI0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#library_bin.RP50" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that bins intensiy data points in intensity class for one earthquake.
The epicentral distance associated to each intensity class is equal
to the weighted median of the log10 of the epicentral distance of the intensity data points.</p>
<p>Width of the intensity class : 0.
Standard deviation associated to the intensity class is equal to the log. standard
deviation of the meaned epicentral distances multiplied by the absolute value
of a geometric attenuation coefficient equal to -3.5.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obsdata</strong> (<em>pandas.DataFrame</em>) – dataframe with the following columns : Iobs, value of the
intensity data point, Depi the associated epicentral intensity,
QIobs the associated quality (A, B or C) and EVID the earthquake ID.</p></li>
<li><p><strong>depth</strong> (<em>float</em>) – hypocentral depth of the considered earthquake</p></li>
<li><p><strong>Ic</strong> – intensity of completeness of the macroseismic field</p></li>
<li><p><strong>I0</strong> (<em>float</em>) – epicentral intensity of the earthquake</p></li>
<li><p><strong>QI0</strong> (<em>float</em>) – epicentral intensity quality translated in standard deviation</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a pandas.DataFrame with the binned intensity. The columns are:
- EVID: the earthquake ID, 
- I: the value of the binned intensity,
- Depi: the associated epicentral distance,
- Hypo: the associated hypocentral distance,
- StdLogR: the log standard deviation of the epicentral geometric mean,
- StdI: the standard deviation associatedto the binned intensity value,
- Io: the epicentral intensity,
- Io_std: the epicentral intensity standard deviation,
- Ndata: the number of intensity data point used compute the intensity bin.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="library_bin.RP84">
<span class="sig-prename descclassname"><span class="pre">library_bin.</span></span><span class="sig-name descname"><span class="pre">RP84</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obsdata</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Ic</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">I0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">QI0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#library_bin.RP84" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that bins intensiy data points in intensity class for one earthquake.
The epicentral distance associated to each intensity class is equal
to the weighted 84th percentile of the log10 of the epicentral distance of the intensity data points.</p>
<p>Width of the intensity class : 0.
Standard deviation associated to the intensity class is equal to the log. standard
deviation of the meaned epicentral distances multiplied by the absolute value
of a geometric attenuation coefficient equal to -3.5.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obsdata</strong> (<em>pandas.DataFrame</em>) – dataframe with the following columns : Iobs, value of the
intensity data point, Depi the associated epicentral intensity,
QIobs the associated quality (A, B or C) and EVID the earthquake ID.</p></li>
<li><p><strong>depth</strong> (<em>float</em>) – hypocentral depth of the considered earthquake</p></li>
<li><p><strong>Ic</strong> – intensity of completeness of the macroseismic field</p></li>
<li><p><strong>I0</strong> (<em>float</em>) – epicentral intensity of the earthquake</p></li>
<li><p><strong>QI0</strong> (<em>float</em>) – epicentral intensity quality translated in standard deviation</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a pandas.DataFrame with the binned intensity. The columns are:
- EVID: the earthquake ID, 
- I: the value of the binned intensity,
- Depi: the associated epicentral distance,
- Hypo: the associated hypocentral distance,
- StdLogR: the log standard deviation of the epicentral geometric mean,
- StdI: the standard deviation associatedto the binned intensity value,
- Io: the epicentral intensity,
- Io_std: the epicentral intensity standard deviation,
- Ndata: the number of intensity data point used compute the intensity bin.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="library_bin.weighted_percentile">
<span class="sig-prename descclassname"><span class="pre">library_bin.</span></span><span class="sig-name descname"><span class="pre">weighted_percentile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">percents</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#library_bin.weighted_percentile" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the weighted percentile of data. To compute the value of 
the wished percentile, the function uses a piecewise linear function on the data
where  the knots are the values midway through the steps of the 
empirical data. This is popular amongst hydrologists.</p>
<dl class="simple">
<dt>data<span class="classifier">array</span></dt><dd><p>values of the data.</p>
</dd>
<dt>percents<span class="classifier">int</span></dt><dd><p>percentile in % wished.</p>
</dd>
<dt>weights<span class="classifier">array, optional</span></dt><dd><p>weights associated to the data. Should have the same length as data. The default is None.</p>
</dd>
</dl>
<dl class="simple">
<dt>float</dt><dd><p>The value of the data at the wished percentile</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="library_bin.weighted_percentile_old">
<span class="sig-prename descclassname"><span class="pre">library_bin.</span></span><span class="sig-name descname"><span class="pre">weighted_percentile_old</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">percents</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#library_bin.weighted_percentile_old" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the weighted percentile of data</p>
<dl class="simple">
<dt>data<span class="classifier">array</span></dt><dd><p>values of the data.</p>
</dd>
<dt>percents<span class="classifier">int</span></dt><dd><p>percentile in % wished.</p>
</dd>
<dt>weights<span class="classifier">array, optional</span></dt><dd><p>weights associated to the data. Should have the same length as data. The default is None.</p>
</dd>
</dl>
<dl class="simple">
<dt>TYPE</dt><dd><p>DESCRIPTION.</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-ponderations"></span><p>Created on Thu Jul 15 10:25:33 2021</p>
<p>&#64;author: PROVOST-LUD</p>
<dl class="py function">
<dt class="sig sig-object py" id="ponderations.Kovatt_ponderation_evt_uniforme">
<span class="sig-prename descclassname"><span class="pre">ponderations.</span></span><span class="sig-name descname"><span class="pre">Kovatt_ponderation_evt_uniforme</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obsbin_plus</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ponderations.Kovatt_ponderation_evt_uniforme" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that attribute an equal weight to each earthquake.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>obsbin_plus</strong> (<em>pandas.DataFrame</em>) – dataframe with the binned intensity data for all calibration earthquakes.
This dataframe should at least have have the following
columns : ‘EVID’ and ‘StdI’, which are respectively id
of the chosen earthquake and the standard deviation
associated to the binned intensity data</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a completed obsbin_plus DataFrame, with a eqStd column that contains
the inverse of the root square of the normalized weigths per earthquake.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ponderations.attribute_region">
<span class="sig-prename descclassname"><span class="pre">ponderations.</span></span><span class="sig-name descname"><span class="pre">attribute_region</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_evt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obsbin_plus</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fichier_regions</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ponderations.attribute_region" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that attribute a region ID to each line of the obsbin_plus input parameter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_evt</strong> (<em>pandas.DataFrame</em>) – dataframe with the following columns: ‘EVID’, the earthquake ID,
‘Lon’ and ‘Lat’ the longitude and the latitude of the earthquake epicenter.</p></li>
<li><p><strong>obsbin_plus</strong> (<em>pandas.DataFrame</em>) – <p>dataframe with the binned intensity data for all calibration earthquakes.
This dataframe should at least have have the following
columns :</p>
<blockquote>
<div><ul>
<li><p>EVID: the id of the earthquake associated</p></li>
</ul>
</div></blockquote>
<p>to each intensity data.</p>
</p></li>
<li><p><strong>fichier_regions</strong> (<em>str</em>) – .txt file with the region limits. This file should have three columns
‘ID_region’, ‘Lon’, ‘Lat’. Each region is delimited by a polygon.
Lon and Lat columns described the longitude and latitude of each
point of the polygon. The ID_region column indicate which region is
described by the corresponding Lon and Lat.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a completed obsbin_plus DataFrame, with a RegID column indicating
in which region occured the earthquake</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ponderations.evt_weights">
<span class="sig-prename descclassname"><span class="pre">ponderations.</span></span><span class="sig-name descname"><span class="pre">evt_weights</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obsbin_plus</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">option_ponderation</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ponderations.evt_weights" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that attribute a weight to the intensity data
:param obsbin_plus:dataframe with the binned intensity data for all calibration earthquakes.</p>
<blockquote>
<div><p>This dataframe should at least have a column named StdI.
The other mandatory columns depends on the chosen weighting
scheme:</p>
<blockquote>
<div><ul class="simple">
<li><p>StdI: the associated standard deviation,</p></li>
<li><p>EVID: the earthquake ID,</p></li>
<li><p>StdM: standard deviation associated to the magnitude</p></li>
</ul>
<p>value
- Hmin: minimal (shallow) limit of known depth
- Hmax: maximal (deep) limit of known depth
- RegID: the region ID in which the earthquake
is located</p>
</div></blockquote>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>option_ponderation</strong> (<em>str</em>) – type of weighting whished. Possible values:
- ‘IStdI’,
- ‘IStdI_evtUni’,
- ‘IStdI_evtStdM’,
- ‘IStdI_evtStdH’,
- ‘IStdI_evtStdM_gRegion’
- ‘IStdI_evtStdM_gMclass’</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a completed obsbin_plus DataFrame, with a eqStd column that contains
the associated inverse square root of the weights</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ponderations.lecture_fichierregions">
<span class="sig-prename descclassname"><span class="pre">ponderations.</span></span><span class="sig-name descname"><span class="pre">lecture_fichierregions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fichier_regions</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ponderations.lecture_fichierregions" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that read the .txt file with the region limits</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fichier_regions</strong> (<em>str</em>) – .txt file with the region limits. This file should have three columns
‘ID_region’, ‘Lon’, ‘Lat’. Each region is delimited by a polygon.
Lon and Lat columns described the longitude and latitude of each
point of the polygon. The ID_region column indicate which region is
described by the corresponding Lon and Lat.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a dictionnary in which each key represent a region and the associated
object in a matplotlib polygon object (matplotlib.path.Path())</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ponderations.normaliser_par_MClass">
<span class="sig-prename descclassname"><span class="pre">ponderations.</span></span><span class="sig-name descname"><span class="pre">normaliser_par_MClass</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obsbin_plus</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bin_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ponderations.normaliser_par_MClass" title="Permalink to this definition">¶</a></dt>
<dd><p>Function which normalizes weights of each event within a given area. Sum
of the weights within one region is equal to one.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>regid</strong> (<em>str</em><em> or </em><em>float</em>) – id of the region for which weights should be normalized</p></li>
<li><p><strong>obsbin_plus</strong> (<em>pandas.DataFrame</em>) – <p>dataframe with the binned intensity data for all calibration earthquakes.
This dataframe should at least have have the following
columns :</p>
<blockquote>
<div><ul>
<li><p>I:  the binned intensity,</p></li>
<li><p>StdI: the associated standard deviation,</p></li>
<li><p>EVID: the earthquake ID,</p></li>
<li><p>RegID: the region ID in which the earthquake</p></li>
</ul>
<p>is located</p>
</div></blockquote>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a completed obsbin_plus DataFrame, with a Poids_inreg_norm column that contains
normalized weigths per region.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ponderations.normaliser_par_region">
<span class="sig-prename descclassname"><span class="pre">ponderations.</span></span><span class="sig-name descname"><span class="pre">normaliser_par_region</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">regid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obsbin_plus</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ponderations.normaliser_par_region" title="Permalink to this definition">¶</a></dt>
<dd><p>Function which normalizes weights associated to the event within a given area.
Sum of the weights within one region is equal to one.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>regid</strong> (<em>str</em><em> or </em><em>float</em>) – id of the region for which weights should be normalized</p></li>
<li><p><strong>obsbin_plus</strong> (<em>pandas.DataFrame</em>) – <p>dataframe with the binned intensity data for all calibration earthquakes.
This dataframe should at least have have the following
columns :</p>
<blockquote>
<div><ul>
<li><p>I:  the binned intensity,</p></li>
<li><p>StdI: the associated standard deviation,</p></li>
<li><p>EVID: the earthquake ID,</p></li>
<li><p>RegID: the region ID in which the earthquake</p></li>
</ul>
<p>is located</p>
</div></blockquote>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a completed obsbin_plus DataFrame, with a Poids_inreg_norm column that contains
normalized weigths per region.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ponderations.normaliser_poids_par_evt">
<span class="sig-prename descclassname"><span class="pre">ponderations.</span></span><span class="sig-name descname"><span class="pre">normaliser_poids_par_evt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">evid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obsbin_plus</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ponderations.normaliser_poids_par_evt" title="Permalink to this definition">¶</a></dt>
<dd><p>Function which normalizes the weights associated to the binned intensity
within one event.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>evid</strong> (<em>str</em><em> or </em><em>float</em>) – id of the earthquake for which weights should be normalized</p></li>
<li><p><strong>obsbin_plus</strong> (<em>pandas.DataFrame</em>) – dataframe with the binned intensity data for all calibration earthquakes.
This dataframe should at least have have the following
columns : ‘EVID’ and ‘Poids_int’, which are respectively id
of the chosen earthquake and the weight
associated to the binned intensity data.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a completed obsbin_plus DataFrame, with a Poids_inevt column that contains
normalized weigths per earthquake. Sum of the weights of one earthquake
data is be equal to one.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ponderations.savename_weights">
<span class="sig-prename descclassname"><span class="pre">ponderations.</span></span><span class="sig-name descname"><span class="pre">savename_weights</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">option_ponderation</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ponderations.savename_weights" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that gives the savename id of the chosen wieghting scheme
:param option_ponderation: type of weighting whished. Possible values:</p>
<blockquote>
<div><p>‘Ponderation dI’, ‘Ponderation evt-uniforme’,
‘Ponderation evt-reg’, ‘Ponderation evt-depth’</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a str with the savename id. For ‘Ponderation dI’, ‘wStdI’,
for ‘Ponderation evt-uniforme’, ‘wdevt-uni’, for’Ponderation evt-reg’,
‘wdevt-reg’, and for ‘Ponderation evt-depth’, ‘wdevt-depth’.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ponderations.weight_IStdI">
<span class="sig-prename descclassname"><span class="pre">ponderations.</span></span><span class="sig-name descname"><span class="pre">weight_IStdI</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obsbin_plus</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ponderations.weight_IStdI" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that compute a weight based on intensity standard deviation
:param obsbin_plus: dataframe with the binned intensity data for all</p>
<blockquote>
<div><p>calibration earthquakes.This dataframe should at least
have a column named ‘StdI’, which is the  standard deviation
associated to the binned intensity.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a completed obsbin_plus DataFrame, with a column called ‘eqStd’
that contains the associated inverse square root of the weights</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ponderations.weight_IStdI_evtStdH">
<span class="sig-prename descclassname"><span class="pre">ponderations.</span></span><span class="sig-name descname"><span class="pre">weight_IStdI_evtStdH</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obsbin_plus</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ponderations.weight_IStdI_evtStdH" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that attribute a weight based on instrumental depth uncertainties.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>obsbin_plus</strong> (<em>pandas.DataFrame</em>) – <p>dataframe with the binned intensity data for all
calibration earthquakes.
This dataframe should at least have have the following
columns :</p>
<blockquote>
<div><ul class="simple">
<li><p>EVID: id of the considered earthquake</p></li>
<li><p>Hmax: upper (deep) limit of the depth uncertainties</p></li>
<li><p>Hmin: lower (shallow) limit of the depth uncertainties</p></li>
<li><p>StdI: the standard deviation associated to the binned intensity data</p></li>
</ul>
</div></blockquote>
</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a completed obsbin_plus DataFrame, with a eqStd column that contains
the inverse of the root square of a weight based on instrumental depth uncertainties.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ponderations.weight_IStdI_evtStdM">
<span class="sig-prename descclassname"><span class="pre">ponderations.</span></span><span class="sig-name descname"><span class="pre">weight_IStdI_evtStdM</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obsbin_plus</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ponderations.weight_IStdI_evtStdM" title="Permalink to this definition">¶</a></dt>
<dd><p>Attribute a weight to each binned intensity data that combine a weight based
on the intensity associated standard deviation and a event-weight based on
magnitude standard deviation (StdM). In one event, the data
have a weight based on the intensity standard deviation StdI.
In practice, the weight_IStdI weighting scheme is applied, then the weights
are normalized within each event: after normalization, the sum of the weights
based on StdI within one event is equal to 1. Then the StdM-event weight is
applied.</p>
<dl>
<dt>obsbin_plus<span class="classifier">pandas.DataFrame</span></dt><dd><p>Dataframe with the binned intensity data for all calibration earthquakes.
This dataframe should at least have the following columns:</p>
<blockquote>
<div><ul class="simple">
<li><p>“EVID”: contains the ID of each event,</p></li>
<li><p>“StdI”: the standard deviation associated to each binned intensity</p></li>
</ul>
<p>data,
- “StdM”: the standard deviation associated to the magnitude of each
event.</p>
</div></blockquote>
</dd>
</dl>
<dl>
<dt>obsbin_plus<span class="classifier">pandas.DataFrame</span></dt><dd><dl>
<dt>Completed input dataframe, with the following additional columns:</dt><dd><ul class="simple">
<li><p>‘Poids_evt’: the uniform weight of the different event, equal to</p></li>
</ul>
<p>1/n, where n is the number of event in the input dataframe.
- ‘Poids_int_norm’: the normalized by event weights associated to StdI,
- ‘Poids’: the combined weight
- ‘eqStd’: the equivalent standard deviation corresponding to Poids,
used in all inversion functions.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ponderations.weight_IStdI_evtStdM_gMclass">
<span class="sig-prename descclassname"><span class="pre">ponderations.</span></span><span class="sig-name descname"><span class="pre">weight_IStdI_evtStdM_gMclass</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obsbin_plus</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ponderations.weight_IStdI_evtStdM_gMclass" title="Permalink to this definition">¶</a></dt>
<dd><p>Attribute a weight that balance the effect of the different magnitude classes.
A calibration dataset is composed by events with different magnitude. Often,
events with small and great magnitudes are underrepresented in comparison
to medium magnitude events. For example, in France, the number of calibration
earthquake with magnitude greater than 5 is small. This weighting scheme
aims to balance the contribution of the different magnitude classes of the
calibration dataset. The magnitude bin width is equal to 0.5 and will begin
with the smallest magnitude of the calibration dataset.
Weight of the intensity bins, associated to the intensity uncertainty within
each event and weight of the event, associated to the magnitude uncertainty
within each magnitude class are propagated and included in the final weight.</p>
<dl>
<dt>obsbin_plus<span class="classifier">pandas.DataFrame</span></dt><dd><p>Dataframe with the binned intensity data for all calibration earthquakes.
This dataframe should at least have the following columns:</p>
<blockquote>
<div><ul class="simple">
<li><p>“EVID”: the ID of each event,</p></li>
<li><p>“Mag”: magnitude of the event,</p></li>
<li><p>“StdM”: uncertainty associated to the magnitude,</p></li>
<li><p>“StdI”: uncertainty associated to the intensity bin,</p></li>
</ul>
</div></blockquote>
</dd>
</dl>
<dl class="simple">
<dt>obsbin_plus<span class="classifier">pandas.DataFrame</span></dt><dd><p>completed obsbin_plus DataFrame, with a eqStd column that contains
the weight that balance the effect of the different magnitude classes.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ponderations.weight_IStdI_evtStdM_gRegion">
<span class="sig-prename descclassname"><span class="pre">ponderations.</span></span><span class="sig-name descname"><span class="pre">weight_IStdI_evtStdM_gRegion</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obsbin_plus</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ponderations.weight_IStdI_evtStdM_gRegion" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that attribute an equal weight to each region.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>obsbin_plus</strong> (<em>pandas.DataFrame</em>) – <p>dataframe with the binned intensity data for all calibration earthquakes.
This dataframe should at least have have the following
columns :</p>
<blockquote>
<div><ul class="simple">
<li><p>I:  the binned intensity,</p></li>
<li><p>StdI: the associated standard deviation,</p></li>
<li><p>EVID: the earthquake ID,</p></li>
<li><p>RegID: the region ID in which the earthquake</p></li>
</ul>
<p>is located</p>
</div></blockquote>
</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a completed obsbin_plus DataFrame, with a eqStd column that contains
the inverse of the root square of the normalized weigths per region.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ponderations.weight_IStdI_evtUni">
<span class="sig-prename descclassname"><span class="pre">ponderations.</span></span><span class="sig-name descname"><span class="pre">weight_IStdI_evtUni</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obsbin_plus</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ponderations.weight_IStdI_evtUni" title="Permalink to this definition">¶</a></dt>
<dd><p>Attribute a weight to each binned intensity data that combine a weight based
on the intensity associated standard deviation and a event-uniform
weight. In this scheme, each event has the same weight. In one event, the data
have a weight based on the intensity standard deviation StdI.
In practice, the weight_IStdI weighting scheme is applied, then the weights
are normalized within each event: after normalization, the sum of the weights
based on StdI within one event is equal to 1. Then the uniform-event weight is
applied.</p>
<dl>
<dt>obsbin_plus<span class="classifier">pandas.DataFrame</span></dt><dd><p>Dataframe with the binned intensity data for all calibration earthquakes.
This dataframe should at least have the following columns:</p>
<blockquote>
<div><ul class="simple">
<li><p>“EVID”: contains the ID of each event,</p></li>
<li><p>“StdI”: the standard deviation associated to each binned intensity</p></li>
</ul>
<p>data.</p>
</div></blockquote>
</dd>
</dl>
<dl>
<dt>obsbin_plus<span class="classifier">pandas.DataFrame</span></dt><dd><dl>
<dt>Completed input dataframe, with the following additional columns:</dt><dd><ul class="simple">
<li><p>‘Poids_evt’: the uniform weight of the different event, equal to</p></li>
</ul>
<p>1/n, where n is the number of event in the input dataframe.
- ‘Poids_int_norm’: the normalized by event weights associated to StdI,
- ‘Poids’: the combined weight
- ‘eqStd’: the equivalent standard deviation corresponding to Poids,
used in all inversion functions.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ponderations.weight_evtStdH">
<span class="sig-prename descclassname"><span class="pre">ponderations.</span></span><span class="sig-name descname"><span class="pre">weight_evtStdH</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obsbin_plus</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ponderations.weight_evtStdH" title="Permalink to this definition">¶</a></dt>
<dd><p>Attribute a weight based on the hypocentral depth uncertainty to each event.
Depth uncertainty is characterized here by a minimal (shallow) and a maximal
(deep) possible depth. 
Weight = 1/((Hmax-Hmin)/2)**2</p>
<dl>
<dt>obsbin_plus<span class="classifier">pandas.DataFrame</span></dt><dd><p>Dataframe with the binned intensity data for all calibration earthquakes.
This dataframe should at least have the following columns:</p>
<blockquote>
<div><ul class="simple">
<li><p>“EVID”: the ID of each event,</p></li>
<li><p>“Hmin”: minimal (shallow) possible depth,</p></li>
<li><p>“Hmax”: maximal (shallow) possible depth,</p></li>
</ul>
</div></blockquote>
</dd>
</dl>
<p>Completed input dataframe, with an additional column ‘Poids_evt’, which 
contains the weight based on the hypocentral depth uncertainty to each event.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ponderations.weight_evtStdM">
<span class="sig-prename descclassname"><span class="pre">ponderations.</span></span><span class="sig-name descname"><span class="pre">weight_evtStdM</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obsbin_plus</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ponderations.weight_evtStdM" title="Permalink to this definition">¶</a></dt>
<dd><p>Attribute a weight based on the magnitude standard deviation StdM to each event.
Waight = 1/StdM**2, with a minimal value of StdM equal to 0.1.</p>
<dl>
<dt>obsbin_plus<span class="classifier">pandas.DataFrame</span></dt><dd><p>Dataframe with the binned intensity data for all calibration earthquakes.
This dataframe should at least have the following columns:</p>
<blockquote>
<div><ul class="simple">
<li><p>“EVID”: the ID of each event,</p></li>
<li><p>“StdM”: the magnitude standard deviation,</p></li>
</ul>
</div></blockquote>
</dd>
</dl>
<p>Completed input dataframe, with an additional column ‘Poids_evt’, which 
contains the weight based on the magnitude standard deviation StdM to each
event.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ponderations.weight_evtUni">
<span class="sig-prename descclassname"><span class="pre">ponderations.</span></span><span class="sig-name descname"><span class="pre">weight_evtUni</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obsbin_plus</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ponderations.weight_evtUni" title="Permalink to this definition">¶</a></dt>
<dd><p>Attribute a uniform weight to each event.</p>
<dl class="simple">
<dt>obsbin_plus<span class="classifier">pandas.DataFrame</span></dt><dd><p>Dataframe with the binned intensity data for all calibration earthquakes.
This dataframe should at least have a column called “EVID”, which contains
the ID of each event.</p>
</dd>
</dl>
<p>Completed input dataframe, with an additional column ‘Poids_evt’, which 
contains the uniform weight of the different event, equal to 1/n, where n
is the number of event in the input dataframe.</p>
</dd></dl>

<span class="target" id="module-prepa_data"></span><p>Created on Wed Jul 21 10:52:50 2021</p>
<p>&#64;author: PROVOST-LUD</p>
<dl class="py function">
<dt class="sig sig-object py" id="prepa_data.add_I0as_datapoint">
<span class="sig-prename descclassname"><span class="pre">prepa_data.</span></span><span class="sig-name descname"><span class="pre">add_I0as_datapoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obsbin_plus</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">liste_evt</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#prepa_data.add_I0as_datapoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the epicentral intensity in the isoseismal radii</p>
<dl class="simple">
<dt>obsbin_plus<span class="classifier">pandas.DataFrame</span></dt><dd><p>See prepare_input4calibration.</p>
</dd>
<dt>liste_evt<span class="classifier">list</span></dt><dd><p>List of the calibration earthquakes in obsbin_plus.</p>
</dd>
</dl>
<p>obsbin_plus with a supplementary isoseismal for each earthquake 
with intensity equal to eipcentral intensity and epicentral distance
equal to 0.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="prepa_data.fichier_input">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">prepa_data.</span></span><span class="sig-name descname"><span class="pre">fichier_input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obsdata</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evtdata</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#prepa_data.fichier_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Class used to create an object input to the class Evt in EvtIntensityObject.py</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="prepa_data.prepare_input4calibration">
<span class="sig-prename descclassname"><span class="pre">prepa_data.</span></span><span class="sig-name descname"><span class="pre">prepare_input4calibration</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obsdata_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evtdata_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ponderation</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regiondata_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binning_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ROBS'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Beta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">3.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Gamma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#prepa_data.prepare_input4calibration" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare the data stored in evt file and obs file into a dataframe useable by the CalIPE
tool.</p>
<dl>
<dt>obsdata_name<span class="classifier">str</span></dt><dd><p>Name of the obs file that contains the macroseismic fields of the calibration
earthquakes.
Mandatory columns for the Obs file:</p>
<blockquote>
<div><ul class="simple">
<li><p>EVID: ID of the earthquake</p></li>
<li><p>Iobs: intenstity in the locality (coordinates Lon/Lat)</p></li>
<li><p>QIobs: quality of the value of Iobs. Possible values: A (very good quality), B (fair quality) and C (bad quality)</p></li>
<li><p>Lon: Longitude in WGS84 of the locality</p></li>
<li><p>Lat: Latitude in WGS84 of the locality</p></li>
</ul>
</div></blockquote>
</dd>
<dt>evtdata_name<span class="classifier">str</span></dt><dd><p>Name of the evt file that contains the metadata of different earthquakes. 
Mandatory columns for evtdata:</p>
<blockquote>
<div><ul class="simple">
<li><p>EVID: ID of the earthquake</p></li>
<li><p>Lon: longitude in WGS84 of the earthquake location</p></li>
<li><p>Lat: latitude in WGS84 of the earthquake location</p></li>
<li><p>Qpos: quality associated to the earthquake location (A for very good quality, E for bad quality, i.e. more than 50 km of possible error)</p></li>
<li><p>I0: epicentral intensity of the earthquake</p></li>
<li><p>QI0: quality associated to the value of I0 (A to E)</p></li>
<li><p>Year: year of occurence of the earthquake</p></li>
<li><p>Month: month of occurence of the earthquake</p></li>
<li><p>Day: day of occurence of the earthquake</p></li>
<li><dl class="simple">
<dt>Ic: intensity of completeness of the earthquake. The intensities smaller than Ic in a macroseismic field are considered as incomplete</dt><dd><p>In the isoseismal radii based on intensity bins, intensities smaller than Ic are not taken into account
to compute the isoseismal radii.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<dl class="simple">
<dt>Optional columns for EvtFile:</dt><dd><ul class="simple">
<li><p>Dc: distance of completeness of the earthquake. The macroseismic field located at greater epicentral distance than Dc is considered as incomplete</p></li>
<li><p>Depth: hypocentral depth of the earthquake</p></li>
<li><p>Hmin: lower bound of depth uncertainty</p></li>
<li><p>Hmax: upper bound of depth uncertainty</p></li>
<li><p>Mag: magnitude of the earthquake</p></li>
<li><p>StdM: uncertainty associated to magnitude.</p></li>
</ul>
</dd>
</dl>
</dd>
<dt>ponderation<span class="classifier">str</span></dt><dd><p>Name of the ponderation option that weight the earthquakes in the attenuation calibration.
Available values are ‘Ponderation dI’, ‘Ponderation evt-uniforme’, ‘Ponderation evt-reg’ and
‘Ponderation evt-depth’. See ponderations.py documentation of more information.
process (2 steps method).</p>
</dd>
<dt>regiondata_name<span class="classifier">str, optional</span></dt><dd><p>Name of the file that contains the contour of different regions. Each region is identifed by an ID.
Coordinates of the points that define the contour are in WGS84. The default is ‘’.</p>
</dd>
<dt>binning_type<span class="classifier">str, optional</span></dt><dd><p>Name of the method used to bin the intensity data points (define isoseismal radii).
The default is ‘ROBS’.</p>
</dd>
<dt>Beta<span class="classifier">float, optional</span></dt><dd><p>DESCRIPTION. The default is -3.5.</p>
</dd>
<dt>Gamma<span class="classifier">TYPE, optional</span></dt><dd><p>DESCRIPTION. The default is 0.</p>
</dd>
</dl>
<dl>
<dt>obsbin_plus<span class="classifier">pandas.DataFrame</span></dt><dd><p>Dataframe that contains metadata of the calibration earthquakes and the
isoseismal radii of the calibration earthquakes.
Columns of the dataframe:</p>
<blockquote>
<div><ul class="simple">
<li><p>EVID: earthquake ID</p></li>
<li><p>I: intensity value of the isoseismal</p></li>
<li><p>StdI: uncertainty associated to I</p></li>
<li><p>Depi: epicentral distance (km) of the isoseismal</p></li>
<li><p>Ndata: number of intensity data point used to compute the isoseismal</p></li>
<li><p>Io: epicentral intensity</p></li>
<li><p>Io_std: uncertainty associated to Io</p></li>
<li><p>Mag: magnitude of the earthquake</p></li>
<li><p>StdM: uncertainty associated to the magnitude</p></li>
<li><p>Depth: hypocentral depth of the earthquake</p></li>
<li><p>Hmin: lower bound of the depth uncertainty</p></li>
<li><p>Hmax: upper bound of the depth uncertainty</p></li>
<li><p>Io_ini: initial value of Io in inversion process. Equal to Io in this function. Used in the calibration process</p></li>
<li><p>Hmin_ini: initial value of Hmin in inversion process. Equal to Hmin in this function. Used in the calibration process</p></li>
<li><p>Hmax_ini: initial value of Hmax in inversion process. Equal to Hmax in this function. Used in the calibration process</p></li>
<li><p>StdIo_inv: Value of the standard deviation associated to Io after inversion. In this function, equal to Io_std</p></li>
<li><p>eqStd: equivalent standard deviation used to weight the earthquakes in the calibration process (weight=1/std**2)</p></li>
</ul>
</div></blockquote>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-postprocessing_IPEs">
<span id="post-processing-functions"></span><h2>Post-processing functions<a class="headerlink" href="#module-postprocessing_IPEs" title="Permalink to this headline">¶</a></h2>
<p>Created on Mon Jun 12 16:45:36 2023</p>
<p>&#64;author: PROVOST-LUD</p>
<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_IPEs.apply_IPE">
<span class="sig-prename descclassname"><span class="pre">postprocessing_IPEs.</span></span><span class="sig-name descname"><span class="pre">apply_IPE</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">C1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">C2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depi</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_IPEs.apply_IPE" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply an IPE to epicentral distance data, for given depth and magnitude corresponding to one earthquake</p>
<dl class="simple">
<dt>C1<span class="classifier">float or array</span></dt><dd><p>C1 coefficient value.</p>
</dd>
<dt>C2<span class="classifier">float or array</span></dt><dd><p>C2 coefficient value.</p>
</dd>
<dt>beta<span class="classifier">float or array</span></dt><dd><p>beta coefficient value.</p>
</dd>
<dt>gamma<span class="classifier">float or array</span></dt><dd><p>gamma coefficient value.</p>
</dd>
<dt>depth<span class="classifier">float</span></dt><dd><p>Hypocentral depth of the earthquake.</p>
</dd>
<dt>mag<span class="classifier">float</span></dt><dd><p>Magnitude of the earthquake.</p>
</dd>
<dt>depi<span class="classifier">float or array</span></dt><dd><p>Epicentral distance for which the predicted intensity is computed.</p>
</dd>
</dl>
<dl class="simple">
<dt>float or array</dt><dd><p>intensity predicted by the input IPE for the given depth and magnitude at epicentral distance depi.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_IPEs.compute_WEresiduals">
<span class="sig-prename descclassname"><span class="pre">postprocessing_IPEs.</span></span><span class="sig-name descname"><span class="pre">compute_WEresiduals</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">outputname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_IPEs.compute_WEresiduals" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute wihtin residuals for a given IPE and a list of given observations</p>
<dl>
<dt>outputname<span class="classifier">str</span></dt><dd><p>Name of the .csv file which contains the observed intensities, associated epicentral
distance, hypocentral depth and magnitude and the IPE coefficient.
Mandatory columns are:</p>
<blockquote>
<div><ul class="simple">
<li><p>C1: C1 coefficient value</p></li>
<li><p>C2: C2 coefficient value</p></li>
<li><p>beta: beta coefficient value</p></li>
<li><p>gamma: gamma coefficient value</p></li>
<li><p>I: observed (binned) intensity</p></li>
<li><p>Depi: epicentral distance associated to I</p></li>
<li><p>EVID: ID of the earthquake</p></li>
<li><p>Depth: hypocentral depth of the earthquake identified by EVID</p></li>
<li><p>Mag: magnitude of the earthquake identified by EVID</p></li>
</ul>
</div></blockquote>
</dd>
<dt>path<span class="classifier">str</span></dt><dd><p>path to the folder where outputname is saved.</p>
</dd>
</dl>
<dl class="simple">
<dt>pandas.DataFrame</dt><dd><p>dataframe with a mean intensity residual per earthquake columns (dImeanevt) and a within_residual column.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_IPEs.plot_BEresiduals_Mag">
<span class="sig-prename descclassname"><span class="pre">postprocessing_IPEs.</span></span><span class="sig-name descname"><span class="pre">plot_BEresiduals_Mag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">outputname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evthighlight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'None'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_I0data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color_on</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'None'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_IPEs.plot_BEresiduals_Mag" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the intensity within-residual of a given IPE in respect with epicentral distance</p>
<dl>
<dt>outputname<span class="classifier">str</span></dt><dd><p>Name of the .csv file which contains the observed intensities, associated epicentral
distance, hypocentral depth and magnitude and the IPE coefficient.
Mandatory columns are:</p>
<blockquote>
<div><ul class="simple">
<li><p>C1: C1 coefficient value</p></li>
<li><p>C2: C2 coefficient value</p></li>
<li><p>beta: beta coefficient value</p></li>
<li><p>gamma: gamma coefficient value</p></li>
<li><p>I: observed (binned) intensity</p></li>
<li><p>Depi: epicentral distance (km) associated to I</p></li>
<li><p>EVID: ID of the earthquake</p></li>
<li><p>Depth: hypocentral depth of the earthquake identified by EVID</p></li>
<li><p>Mag: magnitude of the earthquake identified by EVID.</p></li>
</ul>
</div></blockquote>
</dd>
<dt>path<span class="classifier">str</span></dt><dd><p>path to the folder where outputname is saved..</p>
</dd>
<dt>ax<span class="classifier">TYPE</span></dt><dd><p>Matplotlib axe holding the plot.</p>
</dd>
<dt>evthighlight<span class="classifier">str or float, optional</span></dt><dd><p>ID of the wished highlighted earthquake. One earthquake can have a different color on the plot. The default is ‘None’.</p>
</dd>
<dt>color_on: str</dt><dd><p>Name of the obsbin column used to color the plot scatter points. The default is ‘None’, which means no special color is used.</p>
</dd>
</dl>
<p>None.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_IPEs.plot_WEresiduals_Depi">
<span class="sig-prename descclassname"><span class="pre">postprocessing_IPEs.</span></span><span class="sig-name descname"><span class="pre">plot_WEresiduals_Depi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">outputname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evthighlight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'None'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_I0data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color_on</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'None'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_IPEs.plot_WEresiduals_Depi" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the intensity within-residual of a given IPE in respect with epicentral distance</p>
<dl>
<dt>outputname<span class="classifier">str</span></dt><dd><p>Name of the .csv file which contains the observed intensities, associated epicentral
distance, hypocentral depth and magnitude and the IPE coefficient.
Mandatory columns are:</p>
<blockquote>
<div><ul class="simple">
<li><p>C1: C1 coefficient value</p></li>
<li><p>C2: C2 coefficient value</p></li>
<li><p>beta: beta coefficient value</p></li>
<li><p>gamma: gamma coefficient value</p></li>
<li><p>I: observed (binned) intensity</p></li>
<li><p>Depi: epicentral distance (km) associated to I</p></li>
<li><p>EVID: ID of the earthquake</p></li>
<li><p>Depth: hypocentral depth of the earthquake identified by EVID</p></li>
<li><p>Mag: magnitude of the earthquake identified by EVID.</p></li>
</ul>
</div></blockquote>
</dd>
<dt>path<span class="classifier">str</span></dt><dd><p>path to the folder where outputname is saved..</p>
</dd>
<dt>ax<span class="classifier">TYPE</span></dt><dd><p>Matplotlib axe holding the plot.</p>
</dd>
<dt>evthighlight<span class="classifier">str or float, optional</span></dt><dd><p>ID of the wished highlighted earthquake. One earthquake can have a different color on the plot. The default is ‘None’.</p>
</dd>
<dt>color_on: str</dt><dd><p>Name of the obsbin column used to color the plot scatter points. The default is ‘None’, which means no special color is used.</p>
</dd>
</dl>
<p>None.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_IPEs.plot_WEresiduals_I">
<span class="sig-prename descclassname"><span class="pre">postprocessing_IPEs.</span></span><span class="sig-name descname"><span class="pre">plot_WEresiduals_I</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">outputname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evthighlight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'None'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_I0data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color_on</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'None'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_IPEs.plot_WEresiduals_I" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the intensity within-residual of a given IPE in respect with observed intensity</p>
<dl>
<dt>outputname<span class="classifier">str</span></dt><dd><p>Name of the .csv file which contains the observed intensities, associated epicentral
distance, hypocentral depth and magnitude and the IPE coefficient.
Mandatory columns are:</p>
<blockquote>
<div><ul class="simple">
<li><p>C1: C1 coefficient value</p></li>
<li><p>C2: C2 coefficient value</p></li>
<li><p>beta: beta coefficient value</p></li>
<li><p>gamma: gamma coefficient value</p></li>
<li><p>I: observed (binned) intensity</p></li>
<li><p>Depi: epicentral distance (km) associated to I</p></li>
<li><p>EVID: ID of the earthquake</p></li>
<li><p>Depth: hypocentral depth of the earthquake identified by EVID</p></li>
<li><p>Mag: magnitude of the earthquake identified by EVID.</p></li>
</ul>
</div></blockquote>
</dd>
<dt>path<span class="classifier">str</span></dt><dd><p>path to the folder where outputname is saved..</p>
</dd>
<dt>ax<span class="classifier">TYPE</span></dt><dd><p>Matplotlib axe holding the plot.</p>
</dd>
<dt>evthighlight<span class="classifier">str or float, optional</span></dt><dd><p>ID of the wished highlighted earthquake. One earthquake can have a different color on the plot. The default is ‘None’.</p>
</dd>
<dt>color_on: str</dt><dd><p>Name of the obsbin column used to color the plot scatter points. The default is ‘None’, which means no special color is used.</p>
</dd>
</dl>
<p>None.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_IPEs.plot_dI_Depi">
<span class="sig-prename descclassname"><span class="pre">postprocessing_IPEs.</span></span><span class="sig-name descname"><span class="pre">plot_dI_Depi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">outputname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evthighlight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'None'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_I0data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color_on</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'None'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_IPEs.plot_dI_Depi" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the intensityresidual of a given IPE in respect with epicentral distance</p>
<dl>
<dt>outputname<span class="classifier">str</span></dt><dd><p>Name of the .csv file which contains the observed intensities, associated epicentral
distance, hypocentral depth and magnitude and the IPE coefficient.
Mandatory columns are:</p>
<blockquote>
<div><ul class="simple">
<li><p>C1: C1 coefficient value</p></li>
<li><p>C2: C2 coefficient value</p></li>
<li><p>beta: beta coefficient value</p></li>
<li><p>gamma: gamma coefficient value</p></li>
<li><p>I: observed (binned) intensity</p></li>
<li><p>Depi: epicentral distance (km) associated to I</p></li>
<li><p>EVID: ID of the earthquake</p></li>
<li><p>Depth: hypocentral depth of the earthquake identified by EVID</p></li>
<li><p>Mag: magnitude of the earthquake identified by EVID.</p></li>
</ul>
</div></blockquote>
</dd>
<dt>path<span class="classifier">str</span></dt><dd><p>path to the folder where outputname is saved..</p>
</dd>
<dt>ax<span class="classifier">TYPE</span></dt><dd><p>Matplotlib axe holding the plot.</p>
</dd>
<dt>evthighlight<span class="classifier">str or float, optional</span></dt><dd><p>ID of the wished highlighted earthquake. One earthquake can have a different color on the plot. The default is ‘None’.</p>
</dd>
<dt>color_on: str</dt><dd><p>Name of the obsbin column used to color the plot scatter points. The default is ‘None’, which means no special color is used.</p>
</dd>
</dl>
<p>None.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_IPEs.plot_dI_I">
<span class="sig-prename descclassname"><span class="pre">postprocessing_IPEs.</span></span><span class="sig-name descname"><span class="pre">plot_dI_I</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">outputname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evthighlight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'None'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_I0data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color_on</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'None'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_IPEs.plot_dI_I" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the intensity residual of a given IPE in respect with observed intensity</p>
<dl>
<dt>outputname<span class="classifier">str</span></dt><dd><p>Name of the .csv file which contains the observed intensities, associated epicentral
distance, hypocentral depth and magnitude and the IPE coefficient.
Mandatory columns are:</p>
<blockquote>
<div><ul class="simple">
<li><p>C1: C1 coefficient value</p></li>
<li><p>C2: C2 coefficient value</p></li>
<li><p>beta: beta coefficient value</p></li>
<li><p>gamma: gamma coefficient value</p></li>
<li><p>I: observed (binned) intensity</p></li>
<li><p>Depi: epicentral distance (km) associated to I</p></li>
<li><p>EVID: ID of the earthquake</p></li>
<li><p>Depth: hypocentral depth of the earthquake identified by EVID</p></li>
<li><p>Mag: magnitude of the earthquake identified by EVID.</p></li>
</ul>
</div></blockquote>
</dd>
<dt>path<span class="classifier">str</span></dt><dd><p>path to the folder where outputname is saved..</p>
</dd>
<dt>ax<span class="classifier">TYPE</span></dt><dd><p>Matplotlib axe holding the plot.</p>
</dd>
<dt>evthighlight<span class="classifier">str or float, optional</span></dt><dd><p>ID of the wished highlighted earthquake. One earthquake can have a different color on the plot. The default is ‘None’.</p>
</dd>
<dt>color_on: str</dt><dd><p>Name of the obsbin column used to color the plot scatter points. The default is ‘None’, which means no special color is used.</p>
</dd>
</dl>
<p>None.</p>
</dd></dl>

<span class="target" id="module-postprocessing_Kovbeta"></span><p>Created on Wed Jul 28 17:48:09 2021</p>
<p>&#64;author: PROVOST-LUD</p>
<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_Kovbeta.apply_KovBetaeq">
<span class="sig-prename descclassname"><span class="pre">postprocessing_Kovbeta.</span></span><span class="sig-name descname"><span class="pre">apply_KovBetaeq</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">I0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Depi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">H</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_Kovbeta.apply_KovBetaeq" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Apply the following equation:</dt><dd><p>I = I0 + beta.log10(sqrt(depi**2+h**2))</p>
</dd>
</dl>
<p>with I the intensity at epicentral distance depi. h is the hypocentral depth of 
the earthquake, I0 the epicentral intensity and beta the attenuation coefficient.</p>
<dl class="simple">
<dt>I0<span class="classifier">float</span></dt><dd><p>Epicentral intensity.</p>
</dd>
<dt>beta<span class="classifier">float</span></dt><dd><p>Attenuation coefficient.</p>
</dd>
<dt>Depi<span class="classifier">float or array</span></dt><dd><p>Epicentral distance.</p>
</dd>
<dt>H<span class="classifier">float</span></dt><dd><p>Hypocentral depth.</p>
</dd>
</dl>
<dl class="simple">
<dt>float or array</dt><dd><p>Intensity at epicentral distance depi.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_Kovbeta.compute_WEresidualsKov">
<span class="sig-prename descclassname"><span class="pre">postprocessing_Kovbeta.</span></span><span class="sig-name descname"><span class="pre">compute_WEresidualsKov</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obsbin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_Kovbeta.compute_WEresidualsKov" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute wihtin residuals for a given IPE and a list of given observations</p>
<dl>
<dt>outputname<span class="classifier">str</span></dt><dd><p>Name of the .csv file which contains the observed intensities, associated epicentral
distance, hypocentral depth and magnitude and the IPE coefficient.
Mandatory columns are:</p>
<blockquote>
<div><ul class="simple">
<li><p>C1: C1 coefficient value</p></li>
<li><p>C2: C2 coefficient value</p></li>
<li><p>beta: beta coefficient value</p></li>
<li><p>gamma: gamma coefficient value</p></li>
<li><p>I: observed (binned) intensity</p></li>
<li><p>Depi: epicentral distance associated to I</p></li>
<li><p>EVID: ID of the earthquake</p></li>
<li><p>Depth: hypocentral depth of the earthquake identified by EVID</p></li>
<li><p>Mag: magnitude of the earthquake identified by EVID</p></li>
</ul>
</div></blockquote>
</dd>
<dt>path<span class="classifier">str</span></dt><dd><p>path to the folder where outputname is saved.</p>
</dd>
</dl>
<dl class="simple">
<dt>pandas.DataFrame</dt><dd><p>dataframe with a mean intensity residual per earthquake columns (dImeanevt) and a within_residual column.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_Kovbeta.compute_pearsonDepi_1db">
<span class="sig-prename descclassname"><span class="pre">postprocessing_Kovbeta.</span></span><span class="sig-name descname"><span class="pre">compute_pearsonDepi_1db</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">run_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_Kovbeta.compute_pearsonDepi_1db" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the pearson coefficient between the intensity residual and the epicentral
distance.</p>
<dl class="simple">
<dt>run_name<span class="classifier">str</span></dt><dd><p>core name of the output files..</p>
</dd>
<dt>path<span class="classifier">str</span></dt><dd><p>path to the folder where the output files are saved.</p>
</dd>
</dl>
<dl class="simple">
<dt>PearsonRResult</dt><dd><dl class="simple">
<dt>An object with the following attributes:</dt><dd><dl class="simple">
<dt>statisticfloat</dt><dd><p>Pearson product-moment correlation coefficient.</p>
</dd>
<dt>pvaluefloat</dt><dd><p>The p-value associated with the chosen alternative.</p>
</dd>
</dl>
</dd>
</dl>
</dd>
<dt>beta<span class="classifier">float</span></dt><dd><p>Value of the attenuation coefficient beta associated to the outputs.</p>
</dd>
<dt>mean_dI<span class="classifier">float</span></dt><dd><p>Mean of the intensity residuals of the outputs.</p>
</dd>
<dt>max_dI<span class="classifier">float</span></dt><dd><p>Maximal value of the absolute values of the intensity residuals.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_Kovbeta.compute_pearsonDhypo_1db">
<span class="sig-prename descclassname"><span class="pre">postprocessing_Kovbeta.</span></span><span class="sig-name descname"><span class="pre">compute_pearsonDhypo_1db</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">run_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_Kovbeta.compute_pearsonDhypo_1db" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the pearson coefficient between the intensity residual and the hypocentral
distance.</p>
<dl class="simple">
<dt>run_name<span class="classifier">str</span></dt><dd><p>core name of the output files..</p>
</dd>
<dt>path<span class="classifier">str</span></dt><dd><p>path to the folder where the output files are saved.</p>
</dd>
</dl>
<dl class="simple">
<dt>PearsonRResult</dt><dd><dl class="simple">
<dt>An object with the following attributes:</dt><dd><dl class="simple">
<dt>statisticfloat</dt><dd><p>Pearson product-moment correlation coefficient.</p>
</dd>
<dt>pvaluefloat</dt><dd><p>The p-value associated with the chosen alternative.</p>
</dd>
</dl>
</dd>
</dl>
</dd>
<dt>beta<span class="classifier">float</span></dt><dd><p>Value of the attenuation coefficient beta associated to the outputs.</p>
</dd>
<dt>mean_dI<span class="classifier">float</span></dt><dd><p>Mean of the intensity residuals of the outputs.</p>
</dd>
<dt>max_dI<span class="classifier">float</span></dt><dd><p>Maximal value of the absolute values of the intensity residuals.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_Kovbeta.compute_pearsonH_1db">
<span class="sig-prename descclassname"><span class="pre">postprocessing_Kovbeta.</span></span><span class="sig-name descname"><span class="pre">compute_pearsonH_1db</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">run_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_Kovbeta.compute_pearsonH_1db" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the pearson coefficient between the between-event intensity residual 
and the hypocentral depth of each calibration earthquake.</p>
<dl class="simple">
<dt>run_name<span class="classifier">str</span></dt><dd><p>core name of the output files..</p>
</dd>
<dt>path<span class="classifier">str</span></dt><dd><p>path to the folder where the output files are saved.</p>
</dd>
</dl>
<dl class="simple">
<dt>PearsonRResult</dt><dd><dl class="simple">
<dt>An object with the following attributes:</dt><dd><dl class="simple">
<dt>statisticfloat</dt><dd><p>Pearson product-moment correlation coefficient.</p>
</dd>
<dt>pvaluefloat</dt><dd><p>The p-value associated with the chosen alternative.</p>
</dd>
</dl>
</dd>
</dl>
</dd>
<dt>beta<span class="classifier">float</span></dt><dd><p>Value of the attenuation coefficient beta associated to the outputs.</p>
</dd>
<dt>mean_dI<span class="classifier">float</span></dt><dd><p>Mean of the intensity residuals of the outputs.</p>
</dd>
<dt>max_dI<span class="classifier">float</span></dt><dd><p>Maximal value of the absolute values of the intensity residuals.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_Kovbeta.compute_pearsonI0_1db">
<span class="sig-prename descclassname"><span class="pre">postprocessing_Kovbeta.</span></span><span class="sig-name descname"><span class="pre">compute_pearsonI0_1db</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">run_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_Kovbeta.compute_pearsonI0_1db" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the pearson coefficient between the between-event intensity residual 
and the epicentral intensity.</p>
<dl class="simple">
<dt>run_name<span class="classifier">str</span></dt><dd><p>core name of the output files..</p>
</dd>
<dt>path<span class="classifier">str</span></dt><dd><p>path to the folder where the output files are saved.</p>
</dd>
</dl>
<dl class="simple">
<dt>PearsonRResult</dt><dd><dl class="simple">
<dt>An object with the following attributes:</dt><dd><dl class="simple">
<dt>statisticfloat</dt><dd><p>Pearson product-moment correlation coefficient.</p>
</dd>
<dt>pvaluefloat</dt><dd><p>The p-value associated with the chosen alternative.</p>
</dd>
</dl>
</dd>
</dl>
</dd>
<dt>beta<span class="classifier">float</span></dt><dd><p>Value of the attenuation coefficient beta associated to the outputs.</p>
</dd>
<dt>mean_dI<span class="classifier">float</span></dt><dd><p>Mean of the intensity residuals of the outputs.</p>
</dd>
<dt>max_dI<span class="classifier">float</span></dt><dd><p>Maximal value of the absolute values of the intensity residuals.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_Kovbeta.compute_pearsonI_1db">
<span class="sig-prename descclassname"><span class="pre">postprocessing_Kovbeta.</span></span><span class="sig-name descname"><span class="pre">compute_pearsonI_1db</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">run_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_Kovbeta.compute_pearsonI_1db" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the pearson coefficient between the intensity residual and the intensity
value.</p>
<dl class="simple">
<dt>run_name<span class="classifier">str</span></dt><dd><p>core name of the output files..</p>
</dd>
<dt>path<span class="classifier">str</span></dt><dd><p>path to the folder where the output files are saved.</p>
</dd>
</dl>
<dl class="simple">
<dt>PearsonRResult</dt><dd><dl class="simple">
<dt>An object with the following attributes:</dt><dd><dl class="simple">
<dt>statisticfloat</dt><dd><p>Pearson product-moment correlation coefficient.</p>
</dd>
<dt>pvaluefloat</dt><dd><p>The p-value associated with the chosen alternative.</p>
</dd>
</dl>
</dd>
</dl>
</dd>
<dt>beta<span class="classifier">float</span></dt><dd><p>Value of the attenuation coefficient beta associated to the outputs.</p>
</dd>
<dt>mean_dI<span class="classifier">float</span></dt><dd><p>Mean of the intensity residuals of the outputs.</p>
</dd>
<dt>max_dI<span class="classifier">float</span></dt><dd><p>Maximal value of the absolute values of the intensity residuals.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_Kovbeta.compute_pearsonMag_1db">
<span class="sig-prename descclassname"><span class="pre">postprocessing_Kovbeta.</span></span><span class="sig-name descname"><span class="pre">compute_pearsonMag_1db</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">run_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_Kovbeta.compute_pearsonMag_1db" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the pearson coefficient between the between-event intensity residual 
and the magnitude.</p>
<dl class="simple">
<dt>run_name<span class="classifier">str</span></dt><dd><p>core name of the output files..</p>
</dd>
<dt>path<span class="classifier">str</span></dt><dd><p>path to the folder where the output files are saved.</p>
</dd>
</dl>
<dl class="simple">
<dt>PearsonRResult</dt><dd><dl class="simple">
<dt>An object with the following attributes:</dt><dd><dl class="simple">
<dt>statisticfloat</dt><dd><p>Pearson product-moment correlation coefficient.</p>
</dd>
<dt>pvaluefloat</dt><dd><p>The p-value associated with the chosen alternative.</p>
</dd>
</dl>
</dd>
</dl>
</dd>
<dt>beta<span class="classifier">float</span></dt><dd><p>Value of the attenuation coefficient beta associated to the outputs.</p>
</dd>
<dt>mean_dI<span class="classifier">float</span></dt><dd><p>Mean of the intensity residuals of the outputs.</p>
</dd>
<dt>max_dI<span class="classifier">float</span></dt><dd><p>Maximal value of the absolute values of the intensity residuals.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_Kovbeta.compute_stats">
<span class="sig-prename descclassname"><span class="pre">postprocessing_Kovbeta.</span></span><span class="sig-name descname"><span class="pre">compute_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">run_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_Kovbeta.compute_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the mean intensity residual, the variance, the within-event sigma,
the between-event sigma, the sigma and the WRMS of a dataset and a given IPE with the following mathematical 
formulation:</p>
<blockquote>
<div><p>I = I0 + beta.log10(sqrt(depi**2+h**2))</p>
</div></blockquote>
<p>Use the outputs of the Kovatt calibration part of CalIPE</p>
<dl class="simple">
<dt>run_name<span class="classifier">str</span></dt><dd><p>core name of the output files.</p>
</dd>
<dt>path<span class="classifier">str</span></dt><dd><p>path to the folder where the output files are saved.</p>
</dd>
</dl>
<dl class="simple">
<dt>mean_dI<span class="classifier">float</span></dt><dd><p>mean intensity residual associated to the given outputs of the Kovatt calibration.</p>
</dd>
<dt>variance<span class="classifier">float</span></dt><dd><p>variance associated to the given outputs of the Kovatt calibration.</p>
</dd>
<dt>withinevt_sigma<span class="classifier">float</span></dt><dd><p>within-event sigma associated to the given outputs of the Kovatt calibration.</p>
</dd>
<dt>betweennevt_sigma<span class="classifier">float</span></dt><dd><p>between-event sigma associated to the given outputs of the Kovatt calibration.</p>
</dd>
<dt>sigma<span class="classifier">float</span></dt><dd><p>sigma associated to the given outputs of the Kovatt calibration.</p>
</dd>
<dt>wrms<span class="classifier">float</span></dt><dd><p>WRMS sigma associated to the given outputs of the Kovatt calibration.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_Kovbeta.compute_withinbetweenevt_sigma">
<span class="sig-prename descclassname"><span class="pre">postprocessing_Kovbeta.</span></span><span class="sig-name descname"><span class="pre">compute_withinbetweenevt_sigma</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obsbin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_Kovbeta.compute_withinbetweenevt_sigma" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the within and the between event sigma for a given dataset and a given IPE.
The IPE is represented by the following equation:</p>
<blockquote>
<div><p>I = I0 + beta.log10(sqrt(depi**2+h**2))</p>
</div></blockquote>
<dl>
<dt>obsbin<span class="classifier">pandas.DataFrame</span></dt><dd><p>dataframe which contains the dataset.
Mandatory columns are:</p>
<blockquote>
<div><ul class="simple">
<li><p>EVID: ID of the earthquake</p></li>
<li><p>Depth: hypocentral depth of the earthquake identified by EVID</p></li>
<li><p>Io: epicentral intensity of the earthquake identified by EVID</p></li>
<li><p>I: observed (binned) intensity</p></li>
<li><p>Depi: epicentral distance associated to I</p></li>
</ul>
</div></blockquote>
</dd>
<dt>beta<span class="classifier">float</span></dt><dd><p>value of the beta coefficient in the IPE.</p>
</dd>
</dl>
<dl class="simple">
<dt>withinevt_sigma<span class="classifier">float</span></dt><dd><p>within-event sigma of the dataset.</p>
</dd>
<dt>betweennevt_sigma<span class="classifier">float</span></dt><dd><p>between-event sigma of the dataset.</p>
</dd>
<dt>sigma<span class="classifier">float</span></dt><dd><p>sigma of the dataset and the IPE (standard deviation of the IPE for the given dataset).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_Kovbeta.create_savedir">
<span class="sig-prename descclassname"><span class="pre">postprocessing_Kovbeta.</span></span><span class="sig-name descname"><span class="pre">create_savedir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">run_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_Kovbeta.create_savedir" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a folder</p>
<dl class="simple">
<dt>run_name<span class="classifier">str</span></dt><dd><p>Name of the folder.</p>
</dd>
<dt>path<span class="classifier">str</span></dt><dd><p>path to the location where the folder will be created.</p>
</dd>
</dl>
<dl class="simple">
<dt>directory<span class="classifier">str</span></dt><dd><p>path to the created directory.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_Kovbeta.define_ls_color_byevt">
<span class="sig-prename descclassname"><span class="pre">postprocessing_Kovbeta.</span></span><span class="sig-name descname"><span class="pre">define_ls_color_byevt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">count</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'tab20b'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">len_cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_Kovbeta.define_ls_color_byevt" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that attribute a different color and line style to a number.
The number should be lower than 99.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>count</strong> (<em>int</em>) – the number for which a color and a line style is needed.</p></li>
<li><p><strong>cmap</strong> (<em>str</em>) – colormap choosed to attribute the colors (see matplotlib colormaps)</p></li>
<li><p><strong>len_cmap</strong> (<em>int</em>) – number of color considered</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a line style and a color</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_Kovbeta.define_plotstyle">
<span class="sig-prename descclassname"><span class="pre">postprocessing_Kovbeta.</span></span><span class="sig-name descname"><span class="pre">define_plotstyle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">list_evt</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_Kovbeta.define_plotstyle" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that attribute a color and a marker style to each item in a list.</p>
<dl class="simple">
<dt>list_evt<span class="classifier">list</span></dt><dd><p>list of the item to which a color and a marker style will be attributed.</p>
</dd>
</dl>
<dl class="simple">
<dt>df_plotstyle<span class="classifier">pandas.DataFrame</span></dt><dd><p>dataframe with the item and corresponding color and marker style.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_Kovbeta.plot_Hlim">
<span class="sig-prename descclassname"><span class="pre">postprocessing_Kovbeta.</span></span><span class="sig-name descname"><span class="pre">plot_Hlim</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">run_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_Kovbeta.plot_Hlim" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the bounds used in the inversion to constrain depth for each earthquake.
xaxis represents each earthquake, identified by their ID. yaxis represents
the depth bounds , in a gray vertical line. This vertical line represents
the domain in which the depth is inverted.
The plot is done from the output files of one inversion.</p>
<dl class="simple">
<dt>run_name<span class="classifier">str</span></dt><dd><p>core name of the output files.</p>
</dd>
<dt>path<span class="classifier">str</span></dt><dd><p>path to the folder where the output files are saved.</p>
</dd>
<dt>ax<span class="classifier">matplotlib.axes</span></dt><dd><p>Axe on which the depth bounds will be plotted.</p>
</dd>
</dl>
<p>None.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_Kovbeta.plot_Iolim">
<span class="sig-prename descclassname"><span class="pre">postprocessing_Kovbeta.</span></span><span class="sig-name descname"><span class="pre">plot_Iolim</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">run_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_Kovbeta.plot_Iolim" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the bounds used in the inversion to constrain epicentral intensity for each earthquake.
xaxis represents each earthquake, identified by their ID. yaxis represents
the epicentral intensity bounds , in a gray vertical line. This vertical line represents
the domain in which the epicentral intensity is inverted.
The plot is done from the output files of one inversion.</p>
<dl>
<dt>run_name<span class="classifier">str</span></dt><dd><p>core name of the output files.</p>
</dd>
<dt>path<span class="classifier">str</span></dt><dd><p>path to the folder where the output files are saved.</p>
</dd>
<dt>ax<span class="classifier">matplotlib.axes</span></dt><dd><blockquote>
<div><p>Axe on which the depth bounds will be plotted.</p>
</div></blockquote>
<p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_Kovbeta.plot_WE_Depi">
<span class="sig-prename descclassname"><span class="pre">postprocessing_Kovbeta.</span></span><span class="sig-name descname"><span class="pre">plot_WE_Depi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">run_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evthighlight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'None'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_Kovbeta.plot_WE_Depi" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>plot the within-event residual intensity from beta calibration output files. Only work for the following equation:</dt><dd><p>I = I0 + beta.log10(sqrt(depi**2+h**2))</p>
</dd>
</dl>
<p>with I the intensity at epicentral distance depi. h is the hypocentral depth of 
the earthquake, I0 the epicentral intensity and beta the attenuation coefficient.
The intensity residual are plotted in respect with the epicentral distance.</p>
<dl class="simple">
<dt>run_name<span class="classifier">str</span></dt><dd><p>core name of the output files.</p>
</dd>
<dt>path<span class="classifier">str</span></dt><dd><p>path to the folder where the output files are saved.</p>
</dd>
<dt>ax<span class="classifier">matplotlib.axes</span></dt><dd><p>axe where the data are plotted.</p>
</dd>
<dt>evthighlight<span class="classifier">TYPE, optional</span></dt><dd><p>ID of the wished highlighted earthquake. One earthquake can have a different color on the plot. The default is ‘None’.</p>
</dd>
</dl>
<dl class="simple">
<dt>outsiders<span class="classifier">pandas.DataFrame</span></dt><dd><p>Data for which the absolute value of the intensity residual is greater than 0.5.</p>
</dd>
<dt>obsbin<span class="classifier">pandas.DataFram</span></dt><dd><p>Intensity data with the within-event residual.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_Kovbeta.plot_WE_Iobs">
<span class="sig-prename descclassname"><span class="pre">postprocessing_Kovbeta.</span></span><span class="sig-name descname"><span class="pre">plot_WE_Iobs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">run_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evthighlight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'None'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_Kovbeta.plot_WE_Iobs" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>plot within-event residual intensity from beta calibration output files. Only work for the following equation:</dt><dd><p>I = I0 + beta.log10(sqrt(depi**2+h**2))</p>
</dd>
</dl>
<p>with I the intensity at epicentral distance depi. h is the hypocentral depth of 
the earthquake, I0 the epicentral intensity and beta the attenuation coefficient.
The intensity residual are plotted in respect with the observed intensity value.</p>
<dl class="simple">
<dt>run_name<span class="classifier">str</span></dt><dd><p>core name of the output files.</p>
</dd>
<dt>path<span class="classifier">str</span></dt><dd><p>path to the folder where the output files are saved.</p>
</dd>
<dt>ax<span class="classifier">matplotlib.axes</span></dt><dd><p>axe where the data are plotted.</p>
</dd>
<dt>evthighlight<span class="classifier">TYPE, optional</span></dt><dd><p>ID of the wished highlighted earthquake. One earthquake can have a different color on the plot. The default is ‘None’.</p>
</dd>
</dl>
<dl class="simple">
<dt>outsiders<span class="classifier">pandas.DataFrame</span></dt><dd><p>Data for which the absolute value of the intensity residual is greater than 0.5.</p>
</dd>
<dt>obsbin<span class="classifier">pandas.DataFram</span></dt><dd><p>Intensity data with the within-event residual.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_Kovbeta.plot_dIH">
<span class="sig-prename descclassname"><span class="pre">postprocessing_Kovbeta.</span></span><span class="sig-name descname"><span class="pre">plot_dIH</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">run_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_Kovbeta.plot_dIH" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>plot mean residual intensity by earthquake from beta calibration output files. Only work for the following equation:</dt><dd><p>I = I0 + beta.log10(sqrt(depi**2+h**2))</p>
</dd>
</dl>
<p>with I the intensity at epicentral distance depi. h is the hypocentral depth of 
the earthquake, I0 the epicentral intensity and beta the attenuation coefficient.
The mean intensity residual are plotted in respect with the hypocentral depth.</p>
<dl class="simple">
<dt>run_name<span class="classifier">str</span></dt><dd><p>core name of the output files.</p>
</dd>
<dt>path<span class="classifier">str</span></dt><dd><p>path to the folder where the output files are saved.</p>
</dd>
<dt>ax<span class="classifier">matplotlib.axes</span></dt><dd><p>axe where the data are plotted.</p>
</dd>
<dt>evthighlight<span class="classifier">TYPE, optional</span></dt><dd><p>ID of the wished highlighted earthquake. One earthquake can have a different color on the plot. The default is ‘None’.</p>
</dd>
</dl>
<dl class="simple">
<dt>outsiders<span class="classifier">pandas.DataFrame</span></dt><dd><p>Data for which the absolute value of the mean intensity residual is greater than 0.5.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_Kovbeta.plot_dII0">
<span class="sig-prename descclassname"><span class="pre">postprocessing_Kovbeta.</span></span><span class="sig-name descname"><span class="pre">plot_dII0</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">run_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_Kovbeta.plot_dII0" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>plot mean residual intensity by earthquake from beta calibration output files. Only work for the following equation:</dt><dd><p>I = I0 + beta.log10(sqrt(depi**2+h**2))</p>
</dd>
</dl>
<p>with I the intensity at epicentral distance depi. h is the hypocentral depth of 
the earthquake, I0 the epicentral intensity and beta the attenuation coefficient.
The mean intensity residual are plotted in respect with the epicentral intensity.</p>
<dl class="simple">
<dt>run_name<span class="classifier">str</span></dt><dd><p>core name of the output files.</p>
</dd>
<dt>path<span class="classifier">str</span></dt><dd><p>path to the folder where the output files are saved.</p>
</dd>
<dt>ax<span class="classifier">matplotlib.axes</span></dt><dd><p>axe where the data are plotted.</p>
</dd>
<dt>evthighlight<span class="classifier">TYPE, optional</span></dt><dd><p>ID of the wished highlighted earthquake. One earthquake can have a different color on the plot. The default is ‘None’.</p>
</dd>
</dl>
<dl class="simple">
<dt>outsiders<span class="classifier">pandas.DataFrame</span></dt><dd><p>Data for which the absolute value of the mean intensity residual is greater than 0.5.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_Kovbeta.plot_dIMag">
<span class="sig-prename descclassname"><span class="pre">postprocessing_Kovbeta.</span></span><span class="sig-name descname"><span class="pre">plot_dIMag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">run_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_Kovbeta.plot_dIMag" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>plot mean residual intensity by earthquake from beta calibration output files. Only work for the following equation:</dt><dd><p>I = I0 + beta.log10(sqrt(depi**2+h**2))</p>
</dd>
</dl>
<p>with I the intensity at epicentral distance depi. h is the hypocentral depth of 
the earthquake, I0 the epicentral intensity and beta the attenuation coefficient.
The mean intensity residual are plotted in respect with the magnitude.</p>
<dl class="simple">
<dt>run_name<span class="classifier">str</span></dt><dd><p>core name of the output files.</p>
</dd>
<dt>path<span class="classifier">str</span></dt><dd><p>path to the folder where the output files are saved.</p>
</dd>
<dt>ax<span class="classifier">matplotlib.axes</span></dt><dd><p>axe where the data are plotted.</p>
</dd>
<dt>evthighlight<span class="classifier">str, int, optional</span></dt><dd><p>ID of the wished highlighted earthquake. One earthquake can have a different color on the plot. The default is ‘None’.</p>
</dd>
</dl>
<dl class="simple">
<dt>outsiders<span class="classifier">pandas.DataFrame</span></dt><dd><p>Data for which the absolute value of the mean intensity residual is greater than 0.5.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_Kovbeta.plot_dI_Depi">
<span class="sig-prename descclassname"><span class="pre">postprocessing_Kovbeta.</span></span><span class="sig-name descname"><span class="pre">plot_dI_Depi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">run_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evthighlight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'None'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_Kovbeta.plot_dI_Depi" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>plot the intensity residual  from beta calibration output files. Only work for the following equation:</dt><dd><p>I = I0 + beta.log10(sqrt(depi**2+h**2))</p>
</dd>
</dl>
<p>with I the intensity at epicentral distance depi. h is the hypocentral depth of 
the earthquake, I0 the epicentral intensity and beta the attenuation coefficient.
The intensity residual are plotted in respect with the epicentral distance.</p>
<dl class="simple">
<dt>run_name<span class="classifier">str</span></dt><dd><p>core name of the output files.</p>
</dd>
<dt>path<span class="classifier">str</span></dt><dd><p>path to the folder where the output files are saved.</p>
</dd>
<dt>ax<span class="classifier">matplotlib.axes</span></dt><dd><p>axe where the data are plotted.</p>
</dd>
<dt>evthighlight<span class="classifier">TYPE, optional</span></dt><dd><p>ID of the wished highlighted earthquake. One earthquake can have a different color on the plot. The default is ‘None’.</p>
</dd>
</dl>
<dl class="simple">
<dt>outsiders<span class="classifier">pandas.DataFrame</span></dt><dd><p>Data for which the absolute value of the intensity residual is greater than 0.5.</p>
</dd>
<dt>obsbin<span class="classifier">pandas.DataFram</span></dt><dd><p>Intensity data with the within-event residual.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_Kovbeta.plot_dI_Dhypo">
<span class="sig-prename descclassname"><span class="pre">postprocessing_Kovbeta.</span></span><span class="sig-name descname"><span class="pre">plot_dI_Dhypo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">run_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evthighlight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'None'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_Kovbeta.plot_dI_Dhypo" title="Permalink to this definition">¶</a></dt>
<dd><p>plot the intensity residual in function of hypocentral distance</p>
<dl class="simple">
<dt>run_name<span class="classifier">str</span></dt><dd><p>core name of the output files.</p>
</dd>
<dt>path<span class="classifier">str</span></dt><dd><p>path to the folder where the output files are saved.</p>
</dd>
<dt>ax<span class="classifier">matplotlib.axes</span></dt><dd><p>axe where the data are plotted.</p>
</dd>
<dt>evthighlight<span class="classifier">str, int, optional</span></dt><dd><p>ID of the wished highlighted earthquake. One earthquake can have a different color on the plot. The default is ‘None’.</p>
</dd>
</dl>
<dl class="simple">
<dt>outsiders<span class="classifier">pandas.DataFrame</span></dt><dd><p>Dataframe with all intensity data for which the absolute residual is
greater than 0.5.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_Kovbeta.plot_dI_Iobs">
<span class="sig-prename descclassname"><span class="pre">postprocessing_Kovbeta.</span></span><span class="sig-name descname"><span class="pre">plot_dI_Iobs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">run_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evthighlight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'None'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_Kovbeta.plot_dI_Iobs" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>plot residual intensity from beta calibration output files. Only work for the following equation:</dt><dd><p>I = I0 + beta.log10(sqrt(depi**2+h**2))</p>
</dd>
</dl>
<p>with I the intensity at epicentral distance depi. h is the hypocentral depth of 
the earthquake, I0 the epicentral intensity and beta the attenuation coefficient.
The intensity residual are plotted in respect with the observed intensity value.</p>
<dl class="simple">
<dt>run_name<span class="classifier">str</span></dt><dd><p>core name of the output files.</p>
</dd>
<dt>path<span class="classifier">str</span></dt><dd><p>path to the folder where the output files are saved.</p>
</dd>
<dt>ax<span class="classifier">matplotlib.axes</span></dt><dd><p>axe where the data are plotted.</p>
</dd>
<dt>evthighlight<span class="classifier">TYPE, optional</span></dt><dd><p>ID of the wished highlighted earthquake. One earthquake can have a different color on the plot. The default is ‘None’.</p>
</dd>
</dl>
<dl class="simple">
<dt>outsiders<span class="classifier">pandas.DataFrame</span></dt><dd><p>Data for which the absolute value of the intensity residual is greater than 0.5.</p>
</dd>
<dt>obsbin<span class="classifier">pandas.DataFram</span></dt><dd><p>Intensity data with the within-event residual.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_Kovbeta.plot_endH_diffSubsets">
<span class="sig-prename descclassname"><span class="pre">postprocessing_Kovbeta.</span></span><span class="sig-name descname"><span class="pre">plot_endH_diffSubsets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_folder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">basicdatabasename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta_min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta_center</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">colorbar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'viridis'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_Kovbeta.plot_endH_diffSubsets" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the final depth (after inversion) of each calibration earthquake for different
calibration runs using different datasubsets created from a basic calibration
database.
xaxis represents each earthquake, identified by their ID. yaxis represents
the final depth with a circle marker. The color correspond to the final attenuation
coefficient beta value.</p>
<dl class="simple">
<dt>output_folder<span class="classifier">str</span></dt><dd><p>Name of the folder (and path) where the output files of the calibration
process for which the user wish to visualize the pearson coeffcients are stored.</p>
</dd>
<dt>basicdatabasename<span class="classifier">str</span></dt><dd><p>Name containing the path of the input evt file containing the calibration
earthquake of the basic calibration database.</p>
</dd>
<dt>ax<span class="classifier">matplotlib.axes</span></dt><dd><p>Axe on which the final depth will be plotted.</p>
</dd>
<dt>beta_min<span class="classifier">float, optional</span></dt><dd><p>minimal value of beta used to define the colormap of each marker. The default is -4.</p>
</dd>
<dt>beta_max<span class="classifier">float, optional</span></dt><dd><p>maximal value of beta used to define the colormap of each marker. The default is -2.</p>
</dd>
<dt>beta_center<span class="classifier">float, optional</span></dt><dd><p>central value of beta used to define the colormap of each marker. In the
case of diverging colormaps, this value will be associated to the middle
of the colormap (for example white for the seismic colormapà. The default is -3.</p>
</dd>
<dt>colorbar<span class="classifier">bool, optional</span></dt><dd><p>Boolean that activate the plot of a colorbar. The default is True.</p>
</dd>
<dt>cmap<span class="classifier">str, optional</span></dt><dd><p>name of the chosen colormap. See matplotlib documentation for the available
colormaps and their associated names. The default is ‘viridis’.</p>
</dd>
</dl>
<p>None.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_Kovbeta.plot_endH_oneDataset">
<span class="sig-prename descclassname"><span class="pre">postprocessing_Kovbeta.</span></span><span class="sig-name descname"><span class="pre">plot_endH_oneDataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">run_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">basicdatabase</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta_min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta_center</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">colorbar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'viridis'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_Kovbeta.plot_endH_oneDataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the final depth (after inversion) of each calibration earthquake for one calibration run.
xaxis represents each earthquake, identified by their ID. yaxis represents
the final depth with a circle marker. The color correspond to the final attenuation
coefficient beta value.</p>
<p>This function was written to plot the final depth for different runs (calibration subsets,
different initial values). The ‘basicdatabase’ and the ‘beta_x’ parameters help
to plot the final depths for different runs using differents calibration datasubset created from
a basicdataset.</p>
<dl class="simple">
<dt>run_name<span class="classifier">str</span></dt><dd><p>core name of the output files.</p>
</dd>
<dt>path<span class="classifier">str</span></dt><dd><p>path to the folder where the output files are saved.</p>
</dd>
<dt>basicdatabase<span class="classifier">pandas.DataFrame</span></dt><dd><p>DataFrame that contains all calibration earthquakes with their ID. 
In this basicdatabase dataframe, one column, named EVID, is mandatory and
contains the ID of the calibration earthquakes.
If the user want to plot the final depths of the runs using only one dataset,
the basicdatabase parameter contains all the ID of the dataset used in the targeted calibration run.
If the targeted output used a data subset and if the user wish to plot on the 
same axe (ax parameter) the final depths of calibration runs using different subsets,
the basicdatabase parameter should contain all ID of the earthquakes used in the
different datasubsets.</p>
</dd>
<dt>ax<span class="classifier">matplotlib.axes</span></dt><dd><p>Axe on which the final depth will be plotted.</p>
</dd>
<dt>beta_min<span class="classifier">float, optional</span></dt><dd><p>minimal value of beta used to define the colormap of each marker. The default is -4.</p>
</dd>
<dt>beta_max<span class="classifier">float, optional</span></dt><dd><p>maximal value of beta used to define the colormap of each marker. The default is -2.</p>
</dd>
<dt>beta_center<span class="classifier">float, optional</span></dt><dd><p>central value of beta used to define the colormap of each marker. In the
case of diverging colormaps, this value will be associated to the middle
of the colormap (for example white for the seismic colormapà. The default is -3.</p>
</dd>
<dt>colorbar<span class="classifier">bool, optional</span></dt><dd><p>Boolean that activate the plot of a colorbar. The default is True.</p>
</dd>
<dt>cmap<span class="classifier">str, optional</span></dt><dd><p>name of the chosen colormap. See matplotlib documentation for the available
colormaps and their associated names. The default is ‘viridis’.</p>
</dd>
</dl>
<p>None.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_Kovbeta.plot_endIo_diffSubsets">
<span class="sig-prename descclassname"><span class="pre">postprocessing_Kovbeta.</span></span><span class="sig-name descname"><span class="pre">plot_endIo_diffSubsets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_folder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">basicdatabasename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta_min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta_center</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">colorbar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'viridis'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_Kovbeta.plot_endIo_diffSubsets" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the final epicentral intensity (after inversion) of each calibration earthquake for different
calibration runs using different datasubsets created from a basic calibration
database.
xaxis represents each earthquake, identified by their ID. yaxis represents
the final epicentral intensity with a circle marker. The color correspond to the final attenuation
coefficient beta value.</p>
<dl class="simple">
<dt>output_folder<span class="classifier">str</span></dt><dd><p>Name of the folder (and path) where the output files of the calibration
process for which the user wish to visualize the pearson coeffcients are stored.</p>
</dd>
<dt>basicdatabasename<span class="classifier">str</span></dt><dd><p>Name containing the path of the input evt file containing the calibration
earthquake of the basic calibration database.</p>
</dd>
<dt>ax<span class="classifier">matplotlib.axes</span></dt><dd><p>Axe on which the final depth will be plotted.</p>
</dd>
<dt>beta_min<span class="classifier">float, optional</span></dt><dd><p>minimal value of beta used to define the colormap of each marker. The default is -4.</p>
</dd>
<dt>beta_max<span class="classifier">float, optional</span></dt><dd><p>maximal value of beta used to define the colormap of each marker. The default is -2.</p>
</dd>
<dt>beta_center<span class="classifier">float, optional</span></dt><dd><p>central value of beta used to define the colormap of each marker. In the
case of diverging colormaps, this value will be associated to the middle
of the colormap (for example white for the seismic colormapà. The default is -3.</p>
</dd>
<dt>colorbar<span class="classifier">bool, optional</span></dt><dd><p>Boolean that activate the plot of a colorbar. The default is True.</p>
</dd>
<dt>cmap<span class="classifier">str, optional</span></dt><dd><p>name of the chosen colormap. See matplotlib documentation for the available
colormaps and their associated names. The default is ‘viridis’.</p>
</dd>
</dl>
<p>None.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_Kovbeta.plot_endIo_oneDataset">
<span class="sig-prename descclassname"><span class="pre">postprocessing_Kovbeta.</span></span><span class="sig-name descname"><span class="pre">plot_endIo_oneDataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">run_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">basicdatabase</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta_min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta_center</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">colorbar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'viridis'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_Kovbeta.plot_endIo_oneDataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the final epicentral intensity (after inversion) of each calibration 
earthquake for one calibration run.
xaxis represents each earthquake, identified by their ID. yaxis represents
the final depth with a circle marker. The color correspond to the final attenuation
coefficient beta value.</p>
<p>This function was written to plot the final epicentral intensity for different runs (calibration subsets,
different initial values). The ‘basicdatabase’ and the ‘beta_x’ parameters help
to plot the final epicentral intensities for different runs using differents calibration datasubset created from
a basicdataset.</p>
<dl class="simple">
<dt>run_name<span class="classifier">str</span></dt><dd><p>core name of the output files.</p>
</dd>
<dt>path<span class="classifier">str</span></dt><dd><p>path to the folder where the output files are saved.</p>
</dd>
<dt>basicdatabase<span class="classifier">pandas.DataFrame</span></dt><dd><p>DataFrame that contains all calibration earthquakes with their ID. 
In this basicdatabase dataframe, one column, named EVID, is mandatory and
contains the ID of the calibration earthquakes.
If the user want to plot the final epicentral intensities of the runs using only one dataset,
the basicdatabase parameter contains all the ID of the dataset used in the targeted calibration run.
If the targeted output used a data subset and if the user wish to plot on the 
same axe (ax parameter) the final epicentral intensities of calibration runs using different subsets,
the basicdatabase parameter should contain all ID of the earthquakes used in the
different datasubsets.</p>
</dd>
<dt>ax<span class="classifier">matplotlib.axes</span></dt><dd><p>Axe on which the final depth will be plotted.</p>
</dd>
<dt>beta_min<span class="classifier">float, optional</span></dt><dd><p>minimal value of beta used to define the colormap of each marker. The default is -4.</p>
</dd>
<dt>beta_max<span class="classifier">float, optional</span></dt><dd><p>maximal value of beta used to define the colormap of each marker. The default is -2.</p>
</dd>
<dt>beta_center<span class="classifier">float, optional</span></dt><dd><p>central value of beta used to define the colormap of each marker. In the
case of diverging colormaps, this value will be associated to the middle
of the colormap (for example white for the seismic colormapà. The default is -3.</p>
</dd>
<dt>colorbar<span class="classifier">bool, optional</span></dt><dd><p>Boolean that activate the plot of a colorbar. The default is True.</p>
</dd>
<dt>cmap<span class="classifier">str, optional</span></dt><dd><p>name of the chosen colormap. See matplotlib documentation for the available
colormaps and their associated names. The default is ‘viridis’.</p>
</dd>
</dl>
<p>None.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_Kovbeta.plot_meandI_diffDB">
<span class="sig-prename descclassname"><span class="pre">postprocessing_Kovbeta.</span></span><span class="sig-name descname"><span class="pre">plot_meandI_diffDB</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_folder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_Kovbeta.plot_meandI_diffDB" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that plot the mean intensity residual of each attenuation
inversion runs saved in the given output folder.</p>
<dl>
<dt>output_folder<span class="classifier">str</span></dt><dd><p>path to the folder where the output files are saved.</p>
</dd>
<dt>ax<span class="classifier">matplotlib.axe</span></dt><dd><blockquote>
<div><p>axe where the data are plotted.</p>
</div></blockquote>
<p>mean_dI : list
List of the mean intensity residual of each inversion run
beta_list : list
List of the values of the out beta coefficient of each inversion run</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_Kovbeta.plot_pearson_diffDB">
<span class="sig-prename descclassname"><span class="pre">postprocessing_Kovbeta.</span></span><span class="sig-name descname"><span class="pre">plot_pearson_diffDB</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_folder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xvalue_tested</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'None'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_Kovbeta.plot_pearson_diffDB" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the pearson coefficient between the intensity residual and the the data
chosen by the user for different runs/results of the (Kov) calibration in respect
of the output attenuation coefficient beta corresponding to each run.
All outputs of the runs should be in the same folder.</p>
<dl>
<dt>output_folder<span class="classifier">str</span></dt><dd><p>Name of the folder (and path) where the output files of the calibration
process for which the user wish to visualize the pearson coeffcients are stored.</p>
</dd>
<dt>fig<span class="classifier">matplotlib.figure</span></dt><dd><p>Figure on which the pearson coefficients will be plotted.</p>
</dd>
<dt>ax<span class="classifier">matplotlib.axes</span></dt><dd><p>Axe on which the pearson coefficients will be plotted.</p>
</dd>
<dt>xvalue_tested<span class="classifier">str</span></dt><dd><p>Data chosen by the user to compute the pearson coefficient with the intensity
residual. The possible values are:</p>
<blockquote>
<div><ul class="simple">
<li><p>Iobs, the intensity values</p></li>
<li><p>Depi, the epicentral distance</p></li>
<li><p>Dhypo, the hypocentral distance</p></li>
<li><p>Mag, the magnitude</p></li>
<li><p>I0, the epicentral intensity</p></li>
<li><p>Depth, the depth</p></li>
</ul>
</div></blockquote>
</dd>
<dt>color<span class="classifier">str, optional</span></dt><dd><p>The points corresponding to the pearson coefficient on the plot can be colored
in function of the corresponding mean intensity residual or the corresponding
maximal value of the absolute of the intensity residual. The possible values are:</p>
<blockquote>
<div><p>meandI, maxdI and None.
The default is ‘None’.</p>
</div></blockquote>
</dd>
<dt><a href="#id9"><span class="problematic" id="id10">**</span></a>kwargs<span class="classifier">Line 2D properties, optional</span></dt><dd><p>Same as matplotlib.axes.Axes.scatter.</p>
</dd>
</dl>
<dl class="simple">
<dt>KeyError</dt><dd><p>raise an error if one of the input parameter xvalue_tested and color
is not available/does not exist.</p>
</dd>
</dl>
<dl class="simple">
<dt>pearson_list<span class="classifier">list</span></dt><dd><p>List of the pearson coefficients.</p>
</dd>
<dt>beta_list<span class="classifier">list</span></dt><dd><p>List of the attenuation coefficients beta corresponding to the list of 
the pearson coefficients.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_Kovbeta.plot_sigma_diffDB">
<span class="sig-prename descclassname"><span class="pre">postprocessing_Kovbeta.</span></span><span class="sig-name descname"><span class="pre">plot_sigma_diffDB</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_folder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_Kovbeta.plot_sigma_diffDB" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that plot the intensity residual sigma, the witin-event and between-event
sigma for all attenuation inversion runs saved in the given output folder.</p>
<dl>
<dt>output_folder<span class="classifier">str</span></dt><dd><p>path to the folder where the output files are saved.</p>
</dd>
<dt>ax<span class="classifier">matplotlib.axe</span></dt><dd><blockquote>
<div><p>axe where the data are plotted.</p>
</div></blockquote>
<p>withinevt_sigma_list : list
List of the within-event sigma of each inversion run
betweennevt_sigma_list : list
List of the between-event sigma of each inversion run
sigma_list : list
List of the intensity residual sigma of each inversion run
beta_list : list
List of the values of the out beta coefficient of each inversion run</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_Kovbeta.plot_stats_diffDB">
<span class="sig-prename descclassname"><span class="pre">postprocessing_Kovbeta.</span></span><span class="sig-name descname"><span class="pre">plot_stats_diffDB</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_folder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_Kovbeta.plot_stats_diffDB" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that plot the mean intensity residual of each attenuation
inversion runs saved in the given output folder and the intensity residual sigma,
the witin-event and between-event sigma of each attenuation inversion runs
saved in the given output folder</p>
<dl>
<dt>output_folder<span class="classifier">str</span></dt><dd><p>path to the folder where the output files are saved.</p>
</dd>
<dt>ax<span class="classifier">matplotlib.axe</span></dt><dd><blockquote>
<div><p>axe where the data are plotted.</p>
</div></blockquote>
<p>mean_dI : list
List of the mean intensity residual of each inversion run
beta_list : list
List of the values of the out beta coefficient of each inversion run</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_Kovbeta.plot_wmrsHI0_byevt">
<span class="sig-prename descclassname"><span class="pre">postprocessing_Kovbeta.</span></span><span class="sig-name descname"><span class="pre">plot_wmrsHI0_byevt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">run_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fig_wrms</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minH</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxH</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pasH</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minI0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxI0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pasI0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">99</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_Kovbeta.plot_wmrsHI0_byevt" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the WRMS for each calibration earthquake used in a calibration run for different
depth and epicentral intensity. Use the Kovatt output files. The attenuation coefficient
beta is fixed and read from the output files. This function only take into account the case
where gamma is fixed equal to 0.</p>
<dl class="simple">
<dt>run_name<span class="classifier">str</span></dt><dd><p>core name of the output files.</p>
</dd>
<dt>path<span class="classifier">str</span></dt><dd><p>path to the folder where the output files are saved.</p>
</dd>
<dt>evid<span class="classifier">str, float, int</span></dt><dd><p>ID of the earthquake.</p>
</dd>
<dt>fig_wrms<span class="classifier">matplotlib.figure</span></dt><dd><p>Figure on which the WRMS in function of depth and epicentral intensity will be plotted.</p>
</dd>
<dt>minH<span class="classifier">float, optional</span></dt><dd><p>Minimal depth in km used to compute and plot the WRMS. The default is 1.</p>
</dd>
<dt>maxH<span class="classifier">float, optional</span></dt><dd><p>Maximal depth in km used to compute and plot the WRMS. The default is 25.</p>
</dd>
<dt>pasH<span class="classifier">float, optional</span></dt><dd><p>Step in km between two values of depth used to compute WRMS. The default is 0.25.</p>
</dd>
<dt>minI0<span class="classifier">float, optional</span></dt><dd><p>Minimal epicentral intensity used to compute and plot the WRMS. The default is 2.</p>
</dd>
<dt>maxI0<span class="classifier">float, optional</span></dt><dd><p>Maximal epicentral intensity used to compute and plot the WRMS. The default is 10.</p>
</dd>
<dt>pasI0<span class="classifier">TYPE, optional</span></dt><dd><p>Step  between two values of epicentral intensity used to compute WRMS. The default is 0.1.</p>
</dd>
<dt>vmax<span class="classifier">float, optional</span></dt><dd><p>Maximal value of WRMS used for the upper limit of the colormap. The default is -99, in this case,
the maximal value of WRMS computed is used.</p>
</dd>
</dl>
<p>None.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_Kovbeta.plot_wmrsbeta_byevt">
<span class="sig-prename descclassname"><span class="pre">postprocessing_Kovbeta.</span></span><span class="sig-name descname"><span class="pre">plot_wmrsbeta_byevt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">run_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minbeta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxbeta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pasbeta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">custom_color_ls</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'none'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_Kovbeta.plot_wmrsbeta_byevt" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the WRMS for each calibration earthquake used in a calibration run for different
attenuation coefficient beta. Use the Kovatt output files. Depth and epicentral are fixed 
and read from the output files.</p>
<dl>
<dt>run_name<span class="classifier">str</span></dt><dd><p>core name of the output files.</p>
</dd>
<dt>path<span class="classifier">str</span></dt><dd><p>path to the folder where the output files are saved.</p>
</dd>
<dt>ax<span class="classifier">matplotlib.axes</span></dt><dd><p>Axe on which the WRMS of each calibration earthquake will be plotted.</p>
</dd>
<dt>minbeta<span class="classifier">float</span></dt><dd><p>Minimal value of beta used to plot the WRMS.</p>
</dd>
<dt>maxbeta<span class="classifier">TYPE</span></dt><dd><p>Maximal value of beta used to plot the WRMS.</p>
</dd>
<dt>pasbeta<span class="classifier">float</span></dt><dd><p>Step between two values of beta used to plot the WRMS.</p>
</dd>
<dt>custom_color_ls<span class="classifier">pandas.DataFrame, optional</span></dt><dd><dl class="simple">
<dt>dataframe with the earthquake ID and corresponding color and marker style. Mandatory columns are:</dt><dd><p>EVID : Id of the earthquake
color: color associated
linestyle: linestyle associated.</p>
</dd>
</dl>
<p>The default is ‘none’.</p>
</dd>
</dl>
<p>None.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_Kovbeta.readBetaFile">
<span class="sig-prename descclassname"><span class="pre">postprocessing_Kovbeta.</span></span><span class="sig-name descname"><span class="pre">readBetaFile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nomFichier</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_Kovbeta.readBetaFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the output file of the beta calibration (see write_betaresults)</p>
<dl class="simple">
<dt>nomFichier<span class="classifier">str</span></dt><dd><p>name and path of the beta file.</p>
</dd>
</dl>
<dl class="simple">
<dt>beta<span class="classifier">float</span></dt><dd><p>Result of the calibration process: value of the beta coefficient (optimal value).</p>
</dd>
<dt>stdbeta<span class="classifier">float</span></dt><dd><p>Standard deviation associated to beta, based on the standard deviation associated
to the isoseismal intensity values.</p>
</dd>
<dt>beta_ini<span class="classifier">float</span></dt><dd><p>Value of beta used to initialize the calibration process.</p>
</dd>
<dt>nbre_iteration<span class="classifier">int</span></dt><dd><p>Number of iteration needed before convergence of the calibration process.</p>
</dd>
<dt>nbre_iterationMax<span class="classifier">int</span></dt><dd><p>Maximal number of iteration allowed.</p>
</dd>
<dt>nbre_iterationMin<span class="classifier">int</span></dt><dd><p>Minimal number of iteration allowed.</p>
</dd>
<dt>nbreEvt<span class="classifier">int</span></dt><dd><p>Number of calibration earthquake used in the calibration process.</p>
</dd>
<dt>nbreI<span class="classifier">int</span></dt><dd><p>Number of intensity data used in the calibration process.</p>
</dd>
<dt>evtfile<span class="classifier">str</span></dt><dd><p>Name of the evt file that contains the metadata of different earthquakes.</p>
</dd>
<dt>obsfile<span class="classifier">str</span></dt><dd><p>Name and path of the obs file that contain the macroseismic fields of the calibration.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="postprocessing_Kovbeta.readBetaGammaFile">
<span class="sig-prename descclassname"><span class="pre">postprocessing_Kovbeta.</span></span><span class="sig-name descname"><span class="pre">readBetaGammaFile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nomFichier</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#postprocessing_Kovbeta.readBetaGammaFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the output file of the beta/gamma calibration (see write_betagammaresults)</p>
<dl class="simple">
<dt>nomFichier<span class="classifier">str</span></dt><dd><p>name and path of the beta/gamma file..</p>
</dd>
</dl>
<dl class="simple">
<dt>beta<span class="classifier">float</span></dt><dd><p>Result of the calibration process: value of the beta coefficient (optimal value).</p>
</dd>
<dt>stdbeta<span class="classifier">float</span></dt><dd><p>Standard deviation associated to beta, based on the standard deviation associated
to the isoseismal intensity values.</p>
</dd>
<dt>beta_ini<span class="classifier">float</span></dt><dd><p>Value of beta used to initialize the calibration process.</p>
</dd>
<dt>gamma<span class="classifier">float</span></dt><dd><p>Result of the calibration process: value of the gamma coefficient (optimal value).</p>
</dd>
<dt>stdgamma :float</dt><dd><p>Standard deviation associated to gamma, based on the standard deviation associated
to the isoseismal intensity values.</p>
</dd>
<dt>gamma_ini<span class="classifier">float</span></dt><dd><p>Value of gamma used to initialize the calibration process..</p>
</dd>
<dt>nbre_iteration<span class="classifier">int</span></dt><dd><p>Number of iteration needed before convergence of the calibration process.</p>
</dd>
<dt>nbre_iterationMax<span class="classifier">int</span></dt><dd><p>Maximal number of iteration allowed.</p>
</dd>
<dt>nbre_iterationMin<span class="classifier">int</span></dt><dd><p>Minimal number of iteration allowed.</p>
</dd>
<dt>nbreEvt<span class="classifier">int</span></dt><dd><p>Number of calibration earthquake used in the calibration process.</p>
</dd>
<dt>nbreI<span class="classifier">int</span></dt><dd><p>Number of intensity data used in the calibration process.</p>
</dd>
<dt>evtfile<span class="classifier">str</span></dt><dd><p>Name of the evt file that contains the metadata of different earthquakes.</p>
</dd>
<dt>obsfile<span class="classifier">str</span></dt><dd><p>Name and path of the obs file that contain the macroseismic fields of the calibration.</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-results_att_hist"></span><p>Created on Tue Aug 10 15:41:44 2021</p>
<p>&#64;author: PROVOST-LUD</p>
<dl class="py function">
<dt class="sig sig-object py" id="results_att_hist.get_betagamma_hist">
<span class="sig-prename descclassname"><span class="pre">results_att_hist.</span></span><span class="sig-name descname"><span class="pre">get_betagamma_hist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_folder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xedges</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">array([-</span> <span class="pre">5.,</span> <span class="pre">-</span> <span class="pre">4.9,</span> <span class="pre">-</span> <span class="pre">4.8,</span> <span class="pre">-</span> <span class="pre">4.7,</span> <span class="pre">-</span> <span class="pre">4.6,</span> <span class="pre">-</span> <span class="pre">4.5,</span> <span class="pre">-</span> <span class="pre">4.4,</span> <span class="pre">-</span> <span class="pre">4.3,</span> <span class="pre">-</span> <span class="pre">4.2,</span> <span class="pre">-</span> <span class="pre">4.1,</span> <span class="pre">-</span> <span class="pre">4.,</span> <span class="pre">-</span> <span class="pre">3.9,</span> <span class="pre">-</span> <span class="pre">3.8,</span> <span class="pre">-</span> <span class="pre">3.7,</span> <span class="pre">-</span> <span class="pre">3.6,</span> <span class="pre">-</span> <span class="pre">3.5,</span> <span class="pre">-</span> <span class="pre">3.4,</span> <span class="pre">-</span> <span class="pre">3.3,</span> <span class="pre">-</span> <span class="pre">3.2,</span> <span class="pre">-</span> <span class="pre">3.1,</span> <span class="pre">-</span> <span class="pre">3.,</span> <span class="pre">-</span> <span class="pre">2.9,</span> <span class="pre">-</span> <span class="pre">2.8,</span> <span class="pre">-</span> <span class="pre">2.7,</span> <span class="pre">-</span> <span class="pre">2.6,</span> <span class="pre">-</span> <span class="pre">2.5,</span> <span class="pre">-</span> <span class="pre">2.4,</span> <span class="pre">-</span> <span class="pre">2.3,</span> <span class="pre">-</span> <span class="pre">2.2,</span> <span class="pre">-</span> <span class="pre">2.1,</span> <span class="pre">-</span> <span class="pre">2.])</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">yedges</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">array([-</span> <span class="pre">1.00000000e-02,</span> <span class="pre">-</span> <span class="pre">9.99000000e-03,</span> <span class="pre">-</span> <span class="pre">9.98000000e-03,</span> <span class="pre">...,</span> <span class="pre">-</span> <span class="pre">1.00000000e-05,</span> <span class="pre">-</span> <span class="pre">4.07660017e-16,</span> <span class="pre">1.00000000e-05])</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#results_att_hist.get_betagamma_hist" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>output_folder<span class="classifier">TYPE</span></dt><dd><p>DESCRIPTION.</p>
</dd>
<dt>xedges<span class="classifier">TYPE, optional</span></dt><dd><p>DESCRIPTION. The default is np.arange(-5, -1.9, 0.1).</p>
</dd>
<dt>yedges<span class="classifier">TYPE, optional</span></dt><dd><p>DESCRIPTION. The default is np.arange(-0.01, 0.00002, 0.00001).</p>
</dd>
</dl>
<dl class="simple">
<dt>hist<span class="classifier">TYPE</span></dt><dd><p>DESCRIPTION.</p>
</dd>
<dt>xedges<span class="classifier">TYPE</span></dt><dd><p>DESCRIPTION.</p>
</dd>
<dt>yedges<span class="classifier">TYPE</span></dt><dd><p>DESCRIPTION.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="results_att_hist.get_hist_bootstrap">
<span class="sig-prename descclassname"><span class="pre">results_att_hist.</span></span><span class="sig-name descname"><span class="pre">get_hist_bootstrap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_folder</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#results_att_hist.get_hist_bootstrap" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>output_folder<span class="classifier">TYPE</span></dt><dd><p>DESCRIPTION.</p>
</dd>
</dl>
<dl class="simple">
<dt>liste_beta<span class="classifier">TYPE</span></dt><dd><p>DESCRIPTION.</p>
</dd>
<dt>beta_baseDB<span class="classifier">TYPE</span></dt><dd><p>DESCRIPTION.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="results_att_hist.get_list_beta_folder">
<span class="sig-prename descclassname"><span class="pre">results_att_hist.</span></span><span class="sig-name descname"><span class="pre">get_list_beta_folder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_folder</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#results_att_hist.get_list_beta_folder" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>output_folder<span class="classifier">TYPE</span></dt><dd><p>DESCRIPTION.</p>
</dd>
</dl>
<dl class="simple">
<dt>liste_beta<span class="classifier">TYPE</span></dt><dd><p>DESCRIPTION.</p>
</dd>
<dt>fichiers_beta<span class="classifier">TYPE</span></dt><dd><p>DESCRIPTION.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="results_att_hist.get_list_betagamma_folder">
<span class="sig-prename descclassname"><span class="pre">results_att_hist.</span></span><span class="sig-name descname"><span class="pre">get_list_betagamma_folder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_folder</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#results_att_hist.get_list_betagamma_folder" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>output_folder<span class="classifier">TYPE</span></dt><dd><p>DESCRIPTION.</p>
</dd>
</dl>
<dl class="simple">
<dt>liste_beta<span class="classifier">TYPE</span></dt><dd><p>DESCRIPTION.</p>
</dd>
<dt>liste_gamma<span class="classifier">TYPE</span></dt><dd><p>DESCRIPTION.</p>
</dd>
<dt>fichiers_betagamma<span class="classifier">TYPE</span></dt><dd><p>DESCRIPTION.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="results_att_hist.get_table_inoutputbeta">
<span class="sig-prename descclassname"><span class="pre">results_att_hist.</span></span><span class="sig-name descname"><span class="pre">get_table_inoutputbeta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_folder</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#results_att_hist.get_table_inoutputbeta" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>output_folder<span class="classifier">TYPE</span></dt><dd><p>DESCRIPTION.</p>
</dd>
</dl>
<dl class="simple">
<dt>TYPE</dt><dd><p>DESCRIPTION.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="results_att_hist.plot_hist_bootstrap">
<span class="sig-prename descclassname"><span class="pre">results_att_hist.</span></span><span class="sig-name descname"><span class="pre">plot_hist_bootstrap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">liste</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta_base</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xlim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[-</span> <span class="pre">4,</span> <span class="pre">-</span> <span class="pre">2]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ylim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[0,</span> <span class="pre">15]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bbins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">array([-</span> <span class="pre">4.,</span> <span class="pre">-</span> <span class="pre">3.9,</span> <span class="pre">-</span> <span class="pre">3.8,</span> <span class="pre">-</span> <span class="pre">3.7,</span> <span class="pre">-</span> <span class="pre">3.6,</span> <span class="pre">-</span> <span class="pre">3.5,</span> <span class="pre">-</span> <span class="pre">3.4,</span> <span class="pre">-</span> <span class="pre">3.3,</span> <span class="pre">-</span> <span class="pre">3.2,</span> <span class="pre">-</span> <span class="pre">3.1,</span> <span class="pre">-</span> <span class="pre">3.,</span> <span class="pre">-</span> <span class="pre">2.9,</span> <span class="pre">-</span> <span class="pre">2.8,</span> <span class="pre">-</span> <span class="pre">2.7,</span> <span class="pre">-</span> <span class="pre">2.6,</span> <span class="pre">-</span> <span class="pre">2.5,</span> <span class="pre">-</span> <span class="pre">2.4,</span> <span class="pre">-</span> <span class="pre">2.3,</span> <span class="pre">-</span> <span class="pre">2.2,</span> <span class="pre">-</span> <span class="pre">2.1])</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#results_att_hist.plot_hist_bootstrap" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>ax<span class="classifier">TYPE</span></dt><dd><p>DESCRIPTION.</p>
</dd>
<dt>liste<span class="classifier">TYPE</span></dt><dd><p>DESCRIPTION.</p>
</dd>
<dt>beta_base<span class="classifier">TYPE</span></dt><dd><p>DESCRIPTION.</p>
</dd>
<dt>xlim<span class="classifier">TYPE, optional</span></dt><dd><p>DESCRIPTION. The default is [-4, -2].</p>
</dd>
<dt>ylim<span class="classifier">TYPE, optional</span></dt><dd><p>DESCRIPTION. The default is [0, 15].</p>
</dd>
<dt>bbins<span class="classifier">TYPE, optional</span></dt><dd><p>DESCRIPTION. The default is np.arange(-4, -2, 0.1).</p>
</dd>
</dl>
<p>None.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="results_att_hist.write_betahistfile">
<span class="sig-prename descclassname"><span class="pre">results_att_hist.</span></span><span class="sig-name descname"><span class="pre">write_betahistfile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">outputname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta_values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bins</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path_subsets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datasetlist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">specific_comment</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#results_att_hist.write_betahistfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that write a file with the attenuation coefficient beta values
histogram. The coefficient beta values results by the inversion of the data
of the different subsets.</p>
<dl class="simple">
<dt>outputname<span class="classifier">str</span></dt><dd><p>Name of the output file.</p>
</dd>
<dt>beta_values<span class="classifier">numpy.darray or list</span></dt><dd><p>Output beta values.</p>
</dd>
<dt>bins<span class="classifier">int or sequence of scalars or str</span></dt><dd><p>If bins is an int, it defines the number of equal-width bins in the
given range (10, by default). If bins is a sequence, it defines a
monotonically increasing array of bin edges, including the rightmost
edge, allowing for non-uniform bin widths. If bins is a string,
it defines the method used to calculate the optimal bin width,
as defined by numpy.histogram_bin_edges.</p>
</dd>
<dt>path_subsets<span class="classifier">str</span></dt><dd><p>Path to the folder where the inversion output with the beta values are stored.</p>
</dd>
<dt>datasetlist<span class="classifier">str</span></dt><dd><p>path and name of the file where the subsets names are stored.</p>
</dd>
<dt>specific_comment<span class="classifier">str</span></dt><dd><p>Add a specific comment to the histogram file.</p>
</dd>
</dl>
<dl class="simple">
<dt>bin_edges<span class="classifier">array of dtype float</span></dt><dd><p>Return the bin edges (length(hist)+1).</p>
</dd>
<dt>hist<span class="classifier">array</span></dt><dd><p>The values of the histogram. See density and weights for a description
of the possible semantics.</p>
</dd>
<dt>normedHist<span class="classifier">array</span></dt><dd><p>Normed values of the histogram.</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-results_bootstrap_hist"></span><p>Created on Wed Jul 28 17:55:30 2021</p>
<p>&#64;author: PROVOST-LUD</p>
<span class="target" id="module-write_outputs"></span><p>Created on Tue Jan  3 09:59:06 2023</p>
<p>&#64;author: PROVOST-LUD</p>
<dl class="py function">
<dt class="sig sig-object py" id="write_outputs.write_IPEfile4QUakeMD">
<span class="sig-prename descclassname"><span class="pre">write_outputs.</span></span><span class="sig-name descname"><span class="pre">write_IPEfile4QUakeMD</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">coeff_dataframe</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comments</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'No</span> <span class="pre">comments'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">C1_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'C1'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">C2_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'C2'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'beta'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'gamma'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#write_outputs.write_IPEfile4QUakeMD" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the ouputs of IPE calibration, i.e. C1, C2, beta and gamma values, from a dataframe to an IPE file compatible with QUake-MD tool
and the CalIPE post-processing tools</p>
<dl class="simple">
<dt>coeff_dataframe<span class="classifier">pandas.DataFrame</span></dt><dd><p>DataFrame that contains the coefficients of the IPE and the probability/weight associated to each IPE. This dataframe
should have a column named ‘proba’, that contains the probability/weight associated to each IPE. It should also contains
columns with the C1, C2, beta and gamma coefficient values. The name of these columns is up to the user (see the other input parameters)</p>
</dd>
<dt>outname<span class="classifier">str</span></dt><dd><p>Name of the output file.</p>
</dd>
<dt>comments<span class="classifier">str, optional</span></dt><dd><p>Description of the IPEs written in the output file. The default is ‘No comments’.</p>
</dd>
<dt>C1_col<span class="classifier">str, optional</span></dt><dd><p>Name of the columns that contains the C1 values. The default is ‘C1’.</p>
</dd>
<dt>C2_col<span class="classifier">str, optional</span></dt><dd><p>Name of the columns that contains the C2 values. The default is ‘C2’.</p>
</dd>
<dt>beta_col<span class="classifier">str, optional</span></dt><dd><p>Name of the columns that contains the beta values. The default is ‘beta’.</p>
</dd>
<dt>gamma_col<span class="classifier">str, optional</span></dt><dd><p>Name of the columns that contains the gamme values. The default is ‘gamma’.</p>
</dd>
</dl>
<p>None.</p>
</dd></dl>

<span class="target" id="module-wrms"></span><p>Created on Mon Jul  5 10:48:29 2021</p>
<p>&#64;author: PROVOST-LUD</p>
<dl class="py function">
<dt class="sig sig-object py" id="wrms.apply_IPE">
<span class="sig-prename descclassname"><span class="pre">wrms.</span></span><span class="sig-name descname"><span class="pre">apply_IPE</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Hypo</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Mag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">C1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">C2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wrms.apply_IPE" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Function that apply the following equation:</dt><dd><p>I = C1 + C2*Mag + Beta*log10(Hypo) + Gamma*Hypo</p>
</dd>
</dl>
<dl class="simple">
<dt>Hypo<span class="classifier">numpy.array</span></dt><dd><p>Array with the hypocentral distances in km for which the intensities will be computed.</p>
</dd>
<dt>Mag<span class="classifier">float</span></dt><dd><p>magnitude of the earthquake for which the intensities will be computed.</p>
</dd>
<dt>C1<span class="classifier">float</span></dt><dd><p>C1 coefficient.</p>
</dd>
<dt>C2<span class="classifier">float</span></dt><dd><p>C2 coefficient.</p>
</dd>
<dt>beta<span class="classifier">float</span></dt><dd><p>Geometric attenuation coefficient.</p>
</dd>
<dt>gamma<span class="classifier">float</span></dt><dd><p>Intresic attenuation.</p>
</dd>
</dl>
<dl class="simple">
<dt>numpy.array</dt><dd><p>Predicted intensities associated to the hypocentral distances Hypo.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wrms.calcul_wrms_C1C2betagamma">
<span class="sig-prename descclassname"><span class="pre">wrms.</span></span><span class="sig-name descname"><span class="pre">calcul_wrms_C1C2betagamma</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obsdata</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">C1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">C2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Beta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Gamma</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wrms.calcul_wrms_C1C2betagamma" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Compute the WRMS for the following equation:</dt><dd><p>I = C1 + C2*Mag + Beta*log10(Hypo) + Gamma*Hypo</p>
</dd>
</dl>
<dl>
<dt>obsdata<span class="classifier">pandas.DataFrame</span></dt><dd><p>DataFrame which contain for one earthquake the observed intensities, the associated epicentral distances,
magnitude and hypocentral depth. Mandatory columns are:</p>
<blockquote>
<div><ul class="simple">
<li><p>I: observed intensity</p></li>
<li><p>Depi: associated epicentral intensity</p></li>
<li><p>StdI: standard deviation/uncertainty associated to the intensity value</p></li>
<li><p>Depth: hypocentral depth</p></li>
<li><p>Mag: magnitude</p></li>
</ul>
</div></blockquote>
</dd>
<dt>C1<span class="classifier">float</span></dt><dd><p>C1 coefficient.</p>
</dd>
<dt>C2<span class="classifier">float</span></dt><dd><p>C2 coefficient.</p>
</dd>
<dt>Beta<span class="classifier">float</span></dt><dd><p>Geometric attenuation coefficient.</p>
</dd>
<dt>Gamma<span class="classifier">float</span></dt><dd><p>Intresic attenuation.</p>
</dd>
</dl>
<dl class="simple">
<dt>WRMS<span class="classifier">float</span></dt><dd><p>WRMS computed.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wrms.calcul_wrms_beta">
<span class="sig-prename descclassname"><span class="pre">wrms.</span></span><span class="sig-name descname"><span class="pre">calcul_wrms_beta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obsdata</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Beta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Gamma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wrms.calcul_wrms_beta" title="Permalink to this definition">¶</a></dt>
<dd><p>For one earthquake, compute the WRMS for the Koveslighety equation for a given coefficient beta values.</p>
<dl>
<dt>obsdata<span class="classifier">pandas.DataFrame</span></dt><dd><p>Dataframe with the observed intensity and their associated epicentral 
depth for the given earthquake. Mandatory columns are:</p>
<blockquote>
<div><ul class="simple">
<li><p>I: observed intensity</p></li>
<li><p>Depi: associated epicentral intensity</p></li>
<li><p>StdI: standard deviation/uncertainty associated to the intensity value</p></li>
<li><p>Depth: hypocentral depth</p></li>
<li><p>Io: epicentral intensity</p></li>
</ul>
</div></blockquote>
</dd>
<dt>Beta<span class="classifier">float</span></dt><dd><blockquote>
<div><p>Value of the geometric attenuation coefficient beta.</p>
</div></blockquote>
<dl class="simple">
<dt>Gamma<span class="classifier">float, optional</span></dt><dd><p>Intresic attenuation coefficient. The default is 0.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="simple">
<dt>WRMS<span class="classifier">float</span></dt><dd><p>WRMS computed by comparing observed intensity and predicted intensity.</p>
</dd>
<dt>obsdata<span class="classifier">pandas.DataFrame</span></dt><dd><p>Dataframe with the observed intensities and their associated epicentral and
the predicted intensities.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wrms.calcul_wrms_evt">
<span class="sig-prename descclassname"><span class="pre">wrms.</span></span><span class="sig-name descname"><span class="pre">calcul_wrms_evt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obsbin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Beta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">I0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Gamma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wrms.calcul_wrms_evt" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the WRMS for the Koveslighety equation for ine earthquake.</p>
<dl>
<dt>obsbin<span class="classifier">pandas.DataFrame</span></dt><dd><p>Dataframe with the observed intensity and their associated epicentral 
depth for the given earthquake. Mandatory columns are:</p>
<blockquote>
<div><ul class="simple">
<li><p>I: observed intensity</p></li>
<li><p>Depi: associated epicentral intensity</p></li>
<li><p>StdI: standard deviation/uncertainty associated to the intensity value</p></li>
</ul>
</div></blockquote>
</dd>
<dt>Beta<span class="classifier">float</span></dt><dd><p>Geometric attenuation coefficient.</p>
</dd>
<dt>I0<span class="classifier">float</span></dt><dd><p>Epicentral intensity.</p>
</dd>
<dt>depth<span class="classifier">float</span></dt><dd><p>Hypocentral depth.</p>
</dd>
<dt>Gamma<span class="classifier">float, optional</span></dt><dd><p>Intresic attenuation coefficient. The default is 0.</p>
</dd>
</dl>
<dl class="simple">
<dt>WRMS<span class="classifier">float</span></dt><dd><p>WRMS computed by comparing observed intensity and predicted intensity.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wrms.classic_config_wmrsevt">
<span class="sig-prename descclassname"><span class="pre">wrms.</span></span><span class="sig-name descname"><span class="pre">classic_config_wmrsevt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fig_wrms</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minI0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxI0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minH</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxH</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wrms.classic_config_wmrsevt" title="Permalink to this definition">¶</a></dt>
<dd><p>Build the classical matplotlib figure configuration to plot the 2D WRMS space
in function of depth and epicentral intenisty, with fixed attenuation coefficient.
The WRMS space is computed with the Koveslighety equation.</p>
<dl class="simple">
<dt>fig_wrms<span class="classifier">matplotlib.figures</span></dt><dd><p>figure on which the configuration is built.</p>
</dd>
<dt>minI0<span class="classifier">float</span></dt><dd><p>Minimal epicentral intensity for which the WRMS is computed.</p>
</dd>
<dt>maxI0<span class="classifier">float</span></dt><dd><p>Maximal epicentral intensity for which the WRMS is computed.</p>
</dd>
<dt>minH<span class="classifier">float</span></dt><dd><p>Minimal depth (km) for which the WRMS is computed.</p>
</dd>
<dt>maxH<span class="classifier">float</span></dt><dd><p>Minimal depth (km) for which the WRMS is computed.</p>
</dd>
</dl>
<dl class="simple">
<dt>ax_iohh<span class="classifier">matplotlib.axes</span></dt><dd><p>axe on which the 2D WRMS space in function of depth and epicentral intensity will be plotted.</p>
</dd>
<dt>ax_hh<span class="classifier">matplotlib.axes</span></dt><dd><p>axe on which a section of the 2D WRMS space can be plotted.
The section is associated to a given epicentral intensity. The section is then the WRMS in function of depth for a given epicentral intensity.</p>
</dd>
<dt>ax_io<span class="classifier">matplotlib.axes</span></dt><dd><p>axe on which a section of the 2D WRMS space can be plotted.
The section is associated to a given depth. The section is then the WRMS in function of epicentral intensity for a depth.</p>
</dd>
<dt>ax_cb<span class="classifier">matplotlib.axes</span></dt><dd><p>axe which will support the colorbar associated to the 2D WRMS space.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wrms.getHline_in_HI0wrms_space">
<span class="sig-prename descclassname"><span class="pre">wrms.</span></span><span class="sig-name descname"><span class="pre">getHline_in_HI0wrms_space</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obsdata</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Beta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minH</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxH</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pasH</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minI0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxI0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pasI0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wrms.getHline_in_HI0wrms_space" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a section in the 2D depth/epicentral intensity WRMS space for one earthquake.
The section is collected for the depth equal to the inverted depth during the attenuation calibration. 
The WRMS space is computed with the Koveslighety equation, with gamma equal to 0.</p>
<dl>
<dt>obsdata<span class="classifier">pandas.DataFrame</span></dt><dd><p>dataframe with the observed intensities and the inverted epicentral
intensity. The mandatory columns are:</p>
<blockquote>
<div><ul class="simple">
<li><p>EVID: ID of the earthquake</p></li>
<li><p>I: observed intensity</p></li>
<li><p>Depi: associated epicentral distance</p></li>
<li><p>StdI: standard deviation/uncertainty associated to I value</p></li>
<li><p>Io: value of the inverted epicentral intensity</p></li>
</ul>
</div></blockquote>
</dd>
<dt>evid<span class="classifier">float, int, str</span></dt><dd><p>ID of the earthquake.</p>
</dd>
<dt>Beta<span class="classifier">float</span></dt><dd><p>geometric attenuation coefficient.</p>
</dd>
<dt>minH<span class="classifier">float, optional</span></dt><dd><p>Minimal depth (km) for which the WRMS will be computed. The default is 1.</p>
</dd>
<dt>maxH<span class="classifier">float, optional</span></dt><dd><p>Maximal depth (km) for which the WRMS will be computed. The default is 25.</p>
</dd>
<dt>pasH<span class="classifier">float, optional</span></dt><dd><p>Step in km between two depths for which the WRMS will be computed. The default is 0.25.</p>
</dd>
<dt>minI0<span class="classifier">float, optional</span></dt><dd><p>Minimal epicentral intensity for which the WRMS will be computed. The default is 2.</p>
</dd>
<dt>maxI0<span class="classifier">float, optional</span></dt><dd><p>Maximal epicentral intensity for which the WRMS will be computed. The default is 10.</p>
</dd>
<dt>pasI0<span class="classifier">float, optional</span></dt><dd><p>Step  between two values of epicentral intensity for which the WRMS will be computed. The default is 0.1.</p>
</dd>
</dl>
<dl class="simple">
<dt>line_wrms_hinv<span class="classifier">TYPE</span></dt><dd><p>DESCRIPTION.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wrms.getI0line_in_HI0wrms_space">
<span class="sig-prename descclassname"><span class="pre">wrms.</span></span><span class="sig-name descname"><span class="pre">getI0line_in_HI0wrms_space</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obsdata</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Beta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minH</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxH</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pasH</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minI0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxI0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pasI0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wrms.getI0line_in_HI0wrms_space" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a section in the 2D depth/epicentral intensity WRMS space for one earthquake.
The section is collected for the epicentral intensity equal to the inverted epicentral
intensity during the attenuation calibration. 
The WRMS space is computed with the Koveslighety equation, with gamma equal to 0.</p>
<dl>
<dt>obsdata<span class="classifier">pandas.DataFrame</span></dt><dd><p>dataframe with the observed intensities and the inverted epicentral
intensity. The mandatory columns are:</p>
<blockquote>
<div><ul class="simple">
<li><p>EVID: ID of the earthquake</p></li>
<li><p>I: observed intensity</p></li>
<li><p>Depi: associated epicentral distance</p></li>
<li><p>StdI: standard deviation/uncertainty associated to I value</p></li>
<li><p>Io: value of the inverted epicentral intensity</p></li>
</ul>
</div></blockquote>
</dd>
<dt>evid<span class="classifier">float, int, str</span></dt><dd><p>ID of the earthquake.</p>
</dd>
<dt>Beta<span class="classifier">float</span></dt><dd><p>geometric attenuation coefficient.</p>
</dd>
<dt>minH<span class="classifier">float, optional</span></dt><dd><p>Minimal depth (km) for which the WRMS will be computed. The default is 1.</p>
</dd>
<dt>maxH<span class="classifier">float, optional</span></dt><dd><p>Maximal depth (km) for which the WRMS will be computed. The default is 25.</p>
</dd>
<dt>pasH<span class="classifier">float, optional</span></dt><dd><p>Step in km between two depths for which the WRMS will be computed. The default is 0.25.</p>
</dd>
<dt>minI0<span class="classifier">float, optional</span></dt><dd><p>Minimal epicentral intensity for which the WRMS will be computed. The default is 2.</p>
</dd>
<dt>maxI0<span class="classifier">float, optional</span></dt><dd><p>Maximal epicentral intensity for which the WRMS will be computed. The default is 10.</p>
</dd>
<dt>pasI0<span class="classifier">float, optional</span></dt><dd><p>Step  between two values of epicentral intensity for which the WRMS will be computed. The default is 0.1.</p>
</dd>
</dl>
<dl class="simple">
<dt>line_wrms_ioinv<span class="classifier">numpy.array</span></dt><dd><p>WRMS value for epicentral intensity equal to the inverted epicentral intensity.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wrms.get_HI0_wrms_space">
<span class="sig-prename descclassname"><span class="pre">wrms.</span></span><span class="sig-name descname"><span class="pre">get_HI0_wrms_space</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obsdata</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Beta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minH</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxH</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pasH</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minI0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxI0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pasI0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wrms.get_HI0_wrms_space" title="Permalink to this definition">¶</a></dt>
<dd><p>For a given earthquake, compute the WRMS for different depths and epicentral intensity and a given attenuation
coefficient Beta for the Koveslighety equation wih gamma equal to 0.</p>
<dl class="simple">
<dt>obsdata<span class="classifier">pandas.DataFrame</span></dt><dd><p>Dataframe with the observed intensities and associated epicentral distances.</p>
</dd>
<dt>evid<span class="classifier">str, float, int</span></dt><dd><p>Id of the earthquake.</p>
</dd>
<dt>Beta<span class="classifier">float</span></dt><dd><p>geometric attenuation coefficient beta.</p>
</dd>
<dt>minH<span class="classifier">float, optional</span></dt><dd><p>Minimal depth (km) for which the WRMS will be computed. The default is 1.</p>
</dd>
<dt>maxH<span class="classifier">float, optional</span></dt><dd><p>Maximal depth (km) for which the WRMS will be computed. The default is 25.</p>
</dd>
<dt>pasH<span class="classifier">float, optional</span></dt><dd><p>Step in km between two depths for which the WRMS will be computed. The default is 0.25.</p>
</dd>
<dt>minI0<span class="classifier">float, optional</span></dt><dd><p>Minimal epicentral intensity for which the WRMS will be computed. The default is 2.</p>
</dd>
<dt>maxI0<span class="classifier">float, optional</span></dt><dd><p>Maximal epicentral intensity for which the WRMS will be computed. The default is 10.</p>
</dd>
<dt>pasI0<span class="classifier">float, optional</span></dt><dd><p>Step  between two values of epicentral intensity for which the WRMS will be computed. The default is 0.1.</p>
</dd>
</dl>
<dl class="simple">
<dt>hh_plot<span class="classifier">numpy.array</span></dt><dd><p>depths for which the WRMS has been computed</p>
</dd>
<dt>io_plot<span class="classifier">numpy.array</span></dt><dd><p>epicentral intensities for which the WRMS has been computed</p>
</dd>
<dt>wrms<span class="classifier">numpy.array</span></dt><dd><p>Computed WRMS. The order of the WRMS correspond to the hh_plot and io_plot orders.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wrms.plot_HI0_wrms_space">
<span class="sig-prename descclassname"><span class="pre">wrms.</span></span><span class="sig-name descname"><span class="pre">plot_HI0_wrms_space</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax_cb</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fig_wrms</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hh_plot</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">io_plot</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wrms</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minH</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxH</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minI0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxI0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">99</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wrms.plot_HI0_wrms_space" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the 2D WRMS space in function of depth and epicentral intensity, with fixed attenuation coefficients.
xaxis is the depth, yaxis is the epicentral intensity and the color is the WRMS value.</p>
<dl class="simple">
<dt>ax<span class="classifier">matplotlib.axes</span></dt><dd><p>axe where the 2D WRMS space is plotted.</p>
</dd>
<dt>ax_cb<span class="classifier">matplotlib.axes</span></dt><dd><p>axe where the corresponding colorbar is plotted.</p>
</dd>
<dt>fig_wrms<span class="classifier">matplotlib.figures</span></dt><dd><p>Figure containing both ax and ax_cb.</p>
</dd>
<dt>hh_plot<span class="classifier">numpy.array</span></dt><dd><p>depths for which the WMRS is computed.</p>
</dd>
<dt>io_plot<span class="classifier">numpy.array</span></dt><dd><p>epicentral intensities for which the WMRS is computed.</p>
</dd>
<dt>wrms<span class="classifier">numpy.array</span></dt><dd><p>Computed WRMS. The order of the WRMS correspond to the hh_plot and io_plot orders..</p>
</dd>
<dt>minH<span class="classifier">float, optional</span></dt><dd><p>Minimal depth (km) for which the WRMS will be computed. The default is 1.</p>
</dd>
<dt>maxH<span class="classifier">float, optional</span></dt><dd><p>Maximal depth (km) for which the WRMS will be computed. The default is 25.</p>
</dd>
<dt>minI0<span class="classifier">float, optional</span></dt><dd><p>Minimal epicentral intensity for which the WRMS will be computed. The default is 2.</p>
</dd>
<dt>maxI0<span class="classifier">float, optional</span></dt><dd><p>Maximal epicentral intensity for which the WRMS will be computed. The default is 10.</p>
</dd>
<dt>vmin<span class="classifier">float, optional</span></dt><dd><p>Minimal value of WRMS used to define the colormap. The default is 0.</p>
</dd>
<dt>vmax<span class="classifier">float, optional</span></dt><dd><p>Maximal value of WRMS used to define the colormap. The default is -99. In this case,
the maximal value of all computed WRMS is used.</p>
</dd>
</dl>
<p>None.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wrms.plot_wrms_beta_1evt">
<span class="sig-prename descclassname"><span class="pre">wrms.</span></span><span class="sig-name descname"><span class="pre">plot_wrms_beta_1evt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obsdata</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minbeta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxbeta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pasbeta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ls</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wrms.plot_wrms_beta_1evt" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the WRMS for one earthquake and different coefficient beta values using
the Koveslighety equation. Epicentral intensity, depth and the gamma attenuation
coefficient are fixed.</p>
<dl>
<dt>ax<span class="classifier">TYPE</span></dt><dd><p>DESCRIPTION.</p>
</dd>
<dt>obsdata<span class="classifier">pandas.DataFrame</span></dt><dd><p>Dataframe with the observed intensity and their associated epicentral 
depth for the given earthquake. Mandatory columns are:</p>
<blockquote>
<div><ul class="simple">
<li><p>I: observed intensity</p></li>
<li><p>Depi: associated epicentral intensity</p></li>
<li><p>StdI: standard deviation/uncertainty associated to the intensity value</p></li>
<li><p>Depth: hypocentral depth</p></li>
<li><p>Io: epicentral intensity</p></li>
</ul>
</div></blockquote>
</dd>
<dt>evid<span class="classifier">float, int, str</span></dt><dd><p>ID of the earthquake.</p>
</dd>
<dt>minbeta<span class="classifier">float</span></dt><dd><p>Minimal value of beta coefficient used to compute and plot the WRMS.</p>
</dd>
<dt>maxbeta<span class="classifier">float</span></dt><dd><p>Maximal value of beta coefficient used to compute and plot the WRMS.</p>
</dd>
<dt>pasbeta<span class="classifier">float</span></dt><dd><p>Step value between two beta values.</p>
</dd>
<dt>color<span class="classifier">str</span></dt><dd><p>Color used in the plot (see matplotlib documentation).</p>
</dd>
<dt>ls<span class="classifier">str</span></dt><dd><p>Linestyle used in the plot (see matplotlib documentation).</p>
</dd>
<dt>gamma<span class="classifier">float, optional</span></dt><dd><p>Intresic attenuation coefficient. The default is 0.</p>
</dd>
</dl>
<p>None.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wrms.plot_wrms_withHI0lines">
<span class="sig-prename descclassname"><span class="pre">wrms.</span></span><span class="sig-name descname"><span class="pre">plot_wrms_withHI0lines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fig_wrms</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obsdata</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Beta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minH</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxH</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pasH</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minI0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxI0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pasI0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">99</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wrms.plot_wrms_withHI0lines" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the 2D WRMS space in depth and epicentral intensity with two sections.
The two section of the 2D space are sections where the epicentral intensity is equal
to the inverted epicentral intensity and where the depth is equal to the inverted depth.</p>
<dl>
<dt>fig_wrms<span class="classifier">matplotlib.figures</span></dt><dd><p>figure on which the plot of the 2D WRMS space and its sections are built..</p>
</dd>
<dt>obsdata<span class="classifier">pandas.DataFrame</span></dt><dd><p>dataframe with the observed intensities and the inverted epicentral
intensity. The mandatory columns are:</p>
<blockquote>
<div><ul class="simple">
<li><p>EVID: ID of the earthquake</p></li>
<li><p>I: observed intensity</p></li>
<li><p>Depi: associated epicentral distance</p></li>
<li><p>StdI: standard deviation/uncertainty associated to I value</p></li>
<li><p>Io: value of the inverted epicentral intensity.</p></li>
</ul>
</div></blockquote>
</dd>
<dt>evid<span class="classifier">float, int, str</span></dt><dd><p>ID of the earthquake.</p>
</dd>
<dt>Beta<span class="classifier">float</span></dt><dd><p>geometric attenuation coefficient.</p>
</dd>
<dt>minH<span class="classifier">float, optional</span></dt><dd><p>Minimal depth (km) for which the WRMS will be computed. The default is 1.</p>
</dd>
<dt>maxH<span class="classifier">float, optional</span></dt><dd><p>Maximal depth (km) for which the WRMS will be computed. The default is 25.</p>
</dd>
<dt>pasH<span class="classifier">float, optional</span></dt><dd><p>Step in km between two depths for which the WRMS will be computed. The default is 0.25.</p>
</dd>
<dt>minI0<span class="classifier">float, optional</span></dt><dd><p>Minimal epicentral intensity for which the WRMS will be computed. The default is 2.</p>
</dd>
<dt>maxI0<span class="classifier">float, optional</span></dt><dd><p>Maximal epicentral intensity for which the WRMS will be computed. The default is 10.</p>
</dd>
<dt>pasI0<span class="classifier">float, optional</span></dt><dd><p>Step between two values of epicentral intensity for which the WRMS will be computed. The default is 0.1.</p>
</dd>
</dl>
<dl class="simple">
<dt>ax_iohh<span class="classifier">matplotlib.axes</span></dt><dd><p>Axe where the 2D WRMS space is plotted.</p>
</dd>
<dt>ax_hh<span class="classifier">matplotlib.axes</span></dt><dd><p>Axe where the section where the depth is equal to the inverted depth is plotted.</p>
</dd>
<dt>ax_io<span class="classifier">matplotlib.axes</span></dt><dd><p>Axe where the section where the epicentral intensity is equal to the inverted epicentral intensity is plotted.</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">CalIPE_doc</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="input_files.html">Input data files</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="output_files.html">Output data files</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Inventory and documentation of CalIPE functions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-attKov_onedataset">Calibration functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-postprocessing_IPEs">Post-processing functions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="output_files.html" title="previous chapter">Output data files</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, Ludmila Provost.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.4.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/inventory.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>